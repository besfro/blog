{"meta":{"version":1,"warehouse":"3.0.2"},"models":{"Asset":[{"_id":"source/CNAME","path":"CNAME","modified":0,"renderable":0},{"_id":"source/images/avatar.jpg","path":"images/avatar.jpg","modified":0,"renderable":0},{"_id":"source/images/apple-touch-icon.png","path":"images/apple-touch-icon.png","modified":0,"renderable":0},{"_id":"source/images/favicon-16x16.png","path":"images/favicon-16x16.png","modified":0,"renderable":0},{"_id":"source/images/avatar.png","path":"images/avatar.png","modified":0,"renderable":0},{"_id":"source/images/favicon-32x32.png","path":"images/favicon-32x32.png","modified":0,"renderable":0},{"_id":"source/images/logo.svg","path":"images/logo.svg","modified":0,"renderable":0},{"_id":"source/images/posts/capture.net.card.jpg","path":"images/posts/capture.net.card.jpg","modified":0,"renderable":0},{"_id":"source/images/posts/pwa.native.png","path":"images/posts/pwa.native.png","modified":0,"renderable":0},{"_id":"source/images/posts/wireshark.tls.set.jpg","path":"images/posts/wireshark.tls.set.jpg","modified":0,"renderable":0},{"_id":"source/images/posts/pwa.vs.native.png","path":"images/posts/pwa.vs.native.png","modified":0,"renderable":0},{"_id":"source/images/posts/system.var.jpg","path":"images/posts/system.var.jpg","modified":0,"renderable":0},{"_id":"source/images/posts/capture.jpg","path":"images/posts/capture.jpg","modified":0,"renderable":0},{"_id":"source/images/posts/http2.statistic.png","path":"images/posts/http2.statistic.png","modified":0,"renderable":0},{"_id":"source/images/posts/wireshark.filter.jpg","path":"images/posts/wireshark.filter.jpg","modified":0,"renderable":0},{"_id":"source/images/posts/verdaccio.run.jpg","path":"images/posts/verdaccio.run.jpg","modified":0,"renderable":0},{"_id":"source/images/posts/verdaccio.ls.jpg","path":"images/posts/verdaccio.ls.jpg","modified":1,"renderable":0}],"Cache":[{"_id":"source/CNAME","hash":"aabd776136eaf72609c605ca990399769b007b93","modified":1586147312126},{"_id":"themes/next/.gitignore","hash":"d9021ac0041b511356fc7044cb02c6e0e567d706","modified":1584728747185},{"_id":"themes/next/.eslintrc.json","hash":"d3c11de434171d55d70daadd3914bc33544b74b8","modified":1584728747169},{"_id":"themes/next/.stylintrc","hash":"6259e2a0b65d46865ab89564b88fc67638668295","modified":1584728747185},{"_id":"themes/next/.editorconfig","hash":"731c650ddad6eb0fc7c3d4a91cad1698fe7ad311","modified":1584728747168},{"_id":"themes/next/.travis.yml","hash":"379f31a140ce41e441442add6f673bf397d863ea","modified":1584728747186},{"_id":"themes/next/_config.yml","hash":"65054c8c71bea2593c68b7610682a094ae19c930","modified":1586149076139},{"_id":"themes/next/.gitattributes","hash":"3e00e1fb043438cd820d94ee3dc9ffb6718996f3","modified":1584728747176},{"_id":"themes/next/README.md","hash":"7d56751b580d042559b2acf904fca4b42bcb30a7","modified":1584728747187},{"_id":"themes/next/package.json","hash":"bfa483bfcc88bd7601faf707d23b5e315bb39428","modified":1584728747259},{"_id":"themes/next/crowdin.yml","hash":"4a53f5985e545c635cb56b2a57ed290cb8cf8942","modified":1584728747188},{"_id":"themes/next/LICENSE.md","hash":"0a9c7399f102b4eb0a6950dd31264be421557c7d","modified":1584728747186},{"_id":"themes/next/gulpfile.js","hash":"0c76a1ac610ee8cbe8e2cc9cca1c925ffd0edf98","modified":1584728747202},{"_id":"source/_drafts/HTTP-3现状.md","hash":"5bb98f4b2823ce276c2d9f2fd382efe745c71f5e","modified":1586104190417},{"_id":"source/_posts/Javascript是如何执行一段代码的.md","hash":"e07db244d5ceed122e4ba5a29a96805a16ac9903","modified":1585972912359},{"_id":"source/_posts/NPM@7 将支持 Mnorepo 特性.md","hash":"ac3dda7e303f4f81eeeb9de3c879f93672f6913d","modified":1586012798629},{"_id":"source/_posts/PWA对比Native谁更胜一筹.md","hash":"1f49032785568ce38eab49c2554518a270bd5f9c","modified":1586272830476},{"_id":"source/_posts/使用WireShark抓包HTTP2.md","hash":"2a3b03a4672506b045f9e1de896e204cc603ce37","modified":1585972720857},{"_id":"source/_posts/谷歌将逐步停止支持-User-Agent.md","hash":"ebf0107ea798f3d425d01b0c0be713a19e670fe3","modified":1585975530563},{"_id":"source/_posts/前端安全-CSRF.md","hash":"99ff04b826fca5e021708d2daaf32e2175de5a86","modified":1585990968853},{"_id":"source/images/avatar.jpg","hash":"432bd5097911e12deaf6d9006ddf07dbef0de2cd","modified":1585992634618},{"_id":"source/images/apple-touch-icon.png","hash":"ce9417d8d8e37c30db803d9a95f8c7d140686b36","modified":1585992775121},{"_id":"source/images/favicon-16x16.png","hash":"c41313395e2b4645ad972dd9ff6988d2c81628b2","modified":1585992828052},{"_id":"source/images/avatar.png","hash":"ef3daf2f9f31786a1acb2fd98c1f3118deac7b27","modified":1585992788904},{"_id":"themes/next/.github/CODE_OF_CONDUCT.md","hash":"778b7e052993ed59f21ed266ba7119ee2e5253fb","modified":1584728747177},{"_id":"source/_posts/使用verdaccio搭建私有NPM.md","hash":"64229c5250f9f9e24713ac0d3d52d73d18c43181","modified":1586272830477},{"_id":"source/tags/index.md","hash":"6c56bd5e387328c8350a241f4c6fbeb8474e7e05","modified":1584779489475},{"_id":"themes/next/.github/config.yml","hash":"d2f6c321fa0bff36b9c3c64e33ca6e4ccd186c50","modified":1584728747182},{"_id":"themes/next/.github/PULL_REQUEST_TEMPLATE.md","hash":"d2f8e6b65783e31787feb05d2ccea86151f53f35","modified":1584728747181},{"_id":"themes/next/.github/issue-close-app.yml","hash":"b14756e65546eb9ecc9d4393f0c9a84a3dac1824","modified":1584728747182},{"_id":"themes/next/.github/lock.yml","hash":"3ce3d0a26030a1cd52b273cc6a6d444d7c8d85c2","modified":1584728747183},{"_id":"themes/next/.github/mergeable.yml","hash":"1c1cb77a62df1e3654b151c2da34b4a10d351170","modified":1584728747183},{"_id":"source/images/favicon-32x32.png","hash":"b0280337d3fa067a8b29a85bfaae5db2d55120a1","modified":1585992811193},{"_id":"themes/next/.github/CONTRIBUTING.md","hash":"5ddde54fb50d11dc08cec899a3588addb56aa386","modified":1584728747178},{"_id":"themes/next/.github/support.yml","hash":"7ce2722d6904c31a086444c422dc49b6aa310651","modified":1584728747184},{"_id":"themes/next/.github/release-drafter.yml","hash":"09c3352b2d643acdc6839601ceb38abc38ab97c5","modified":1584728747184},{"_id":"themes/next/.github/stale.yml","hash":"590b65aca710e0fba75d3cf5361a64d13b6b0f63","modified":1584728747184},{"_id":"themes/next/docs/DATA-FILES.md","hash":"980fb8d37701f7fd96b30bb911519de3bbb473d1","modified":1584728747190},{"_id":"themes/next/docs/AUTHORS.md","hash":"cde7cc095ac31b421a573042cf61060f90d9ad0d","modified":1584728747189},{"_id":"themes/next/docs/AGPL3.md","hash":"f463f95b169d64983f59fa6f3e4b6760290a0e6b","modified":1584728747188},{"_id":"themes/next/docs/LEANCLOUD-COUNTER-SECURITY.md","hash":"6cc663db5e99fd86bb993c10d446ad26ada88e58","modified":1584728747191},{"_id":"themes/next/.github/issue_label_bot.yaml","hash":"533fbe6b2f87d7e7ec6949063bb7ea7eb4fbe52d","modified":1584728747182},{"_id":"themes/next/docs/ALGOLIA-SEARCH.md","hash":"60c7e9ef0c578deebad43e9395c958fa61096baf","modified":1584728747189},{"_id":"themes/next/docs/UPDATE-FROM-5.1.X.md","hash":"1e86d32063b490d204baa9d45d8d3cb22c24a37d","modified":1584728747193},{"_id":"themes/next/languages/ar.yml","hash":"ab452dbf9b743ad09dd288e59e4cd05e39073da7","modified":1584728747203},{"_id":"themes/next/languages/de.yml","hash":"b0031b3138fa284b343b077f9f5ee0e74d99780b","modified":1584728747203},{"_id":"themes/next/languages/default.yml","hash":"ea5e6aee4cb14510793ac4593a3bddffe23e530c","modified":1584728747203},{"_id":"themes/next/languages/en.yml","hash":"c181fcf7ec02773ead2cb8d91e97bb091cca0f11","modified":1584728747204},{"_id":"themes/next/languages/es.yml","hash":"3fde31f66a85dc6680c3fb465a33267c4131b3f2","modified":1584728747204},{"_id":"themes/next/languages/fa.yml","hash":"fba239631e9f7f0f2ed57cdd68aaf1575287f239","modified":1584728747205},{"_id":"themes/next/languages/fr.yml","hash":"59ec6667044a490ae4f4fcfa63dbe44258295939","modified":1584728747206},{"_id":"themes/next/languages/hu.yml","hash":"9563b8c8a7ced986907ce19d04752a1311fbd7c5","modified":1584728747206},{"_id":"themes/next/languages/id.yml","hash":"a6d2b28eadca084fb431aae3b6b951a472283020","modified":1584728747207},{"_id":"themes/next/languages/it.yml","hash":"161c577cac26f02c9d2ccf2dc9821a426b0ce4db","modified":1584728747207},{"_id":"themes/next/languages/ja.yml","hash":"8f5ad466b8c41c111cba7de5b83f85ec9230be74","modified":1584728747208},{"_id":"themes/next/languages/ko.yml","hash":"9b213360a8124154b97bf7a98eae2c7882085586","modified":1584728747208},{"_id":"themes/next/languages/nl.yml","hash":"c67f1d49cf359d1ad1b0a8f2044ce0cba3bfd26d","modified":1584728747209},{"_id":"themes/next/languages/pt-BR.yml","hash":"2ef717b9fcd01e042b32668853f9b5ea9aaf3bdb","modified":1584728747209},{"_id":"themes/next/languages/pt.yml","hash":"5f18c0aeab170daabcc2c22b2febd7c8ba261f40","modified":1584728747209},{"_id":"themes/next/languages/ru.yml","hash":"f471f4c5a6c394ff22427a4225abfe33a7b4d70f","modified":1584728747210},{"_id":"themes/next/languages/tr.yml","hash":"a02bc85395aaa5af3eaabb072fc9e9c82165e097","modified":1584728747210},{"_id":"themes/next/languages/uk.yml","hash":"926717252a5ff257e25094910237100f488e486f","modified":1584728747211},{"_id":"themes/next/languages/vi.yml","hash":"6a9eab836e0a443465b98f2a5c93e6c46d641a9f","modified":1584728747211},{"_id":"themes/next/docs/INSTALLATION.md","hash":"07ea00bee149a1bdc9073e903ee6b411e9f2f818","modified":1584728747191},{"_id":"themes/next/languages/zh-CN.yml","hash":"e13af4140b29e0e3c2f32897d3a2a5b27b1404fa","modified":1585890975750},{"_id":"themes/next/languages/zh-HK.yml","hash":"37c18e916d84854caeaa440693be250c7f553e30","modified":1584728747212},{"_id":"themes/next/languages/zh-TW.yml","hash":"b888df9d5aeb732c35b3edc311257f15702a9bb4","modified":1584728747213},{"_id":"themes/next/layout/_layout.swig","hash":"91cced869c2bc4a2f69dba76b07c6ba1ad98c60a","modified":1584871250417},{"_id":"themes/next/layout/archive.swig","hash":"607d27c867a35dee55b4b49baae366a63f418688","modified":1585886314800},{"_id":"themes/next/layout/category.swig","hash":"014202a6e316096f85f8c1489568d31212c5f1b2","modified":1584728747257},{"_id":"themes/next/layout/category.swig.bk","hash":"9febc49ff6f476fd0261c75aecbc67cc24c11667","modified":1584728747256},{"_id":"themes/next/layout/index.swig","hash":"014202a6e316096f85f8c1489568d31212c5f1b2","modified":1584728747257},{"_id":"themes/next/layout/page.swig","hash":"fab764b530f5db3a602456e50f082169d29b6e58","modified":1584728747257},{"_id":"themes/next/layout/post.swig","hash":"d75078e7acd9ead60dee9bec05b2b4f60e121177","modified":1584728747258},{"_id":"themes/next/layout/tag.swig","hash":"eedd3a19aa5222184ea6ee628fa46dfa0654ece8","modified":1584728747258},{"_id":"themes/next/scripts/renderer.js","hash":"e3658eea97b1183ee2e9f676231e53f7994741f6","modified":1584728747274},{"_id":"themes/next/docs/MATH.md","hash":"f56946053ade0915ff7efa74d43c38b8dd9e63bb","modified":1584728747192},{"_id":"source/images/logo.svg","hash":"16af0a4ec0ee96f5aabd09b3760109f6adbcb2a4","modified":1585992876053},{"_id":"themes/next/docs/LICENSE.txt","hash":"ae5ad07e4f4106bad55535dba042221539e6c7f9","modified":1584728747192},{"_id":"source/images/posts/capture.net.card.jpg","hash":"1550f1aa3d7cefab9362b415ece65e4e88ac84d9","modified":1585967231187},{"_id":"source/images/posts/pwa.native.png","hash":"9845ece9fc891a8506896efae6deb63bf86bd8e5","modified":1585989035505},{"_id":"themes/next/.github/ISSUE_TEMPLATE/bug-report.md","hash":"e67146befddec3a0dc47dc80d1109070c71d5d04","modified":1584728747178},{"_id":"source/images/posts/wireshark.tls.set.jpg","hash":"b02a34d1824952190f9a77c262465b0f7665d56d","modified":1585970087096},{"_id":"source/images/posts/pwa.vs.native.png","hash":"1750fabd3314096c97bb7c7b6e7db73d53c29dbc","modified":1585989451501},{"_id":"source/images/posts/system.var.jpg","hash":"9d4ff3a774fe68b7767cdb05562c2a9444632722","modified":1585969838522},{"_id":"themes/next/.github/ISSUE_TEMPLATE/question.md","hash":"59275aa0582f793fee7be67904dcf52ad33a7181","modified":1584728747181},{"_id":"themes/next/.github/ISSUE_TEMPLATE/other.md","hash":"d5aa1a3323639a36bcd9a401484b67537043cd3c","modified":1584728747179},{"_id":"themes/next/.github/ISSUE_TEMPLATE/feature-request.md","hash":"6beeca0f45a429cd932b6e648617f548ff64c27c","modified":1584728747179},{"_id":"themes/next/docs/ru/DATA-FILES.md","hash":"54e6a067ed95268eab6be2ba040a7e9b1907928e","modified":1584728747194},{"_id":"themes/next/docs/ru/README.md","hash":"1e5ddb26ad6f931f8c06ce2120f257ff38b74fdf","modified":1584728747194},{"_id":"themes/next/docs/ru/UPDATE-FROM-5.1.X.md","hash":"cb8e39c377fc4a14aaf133b4d1338a48560e9e65","modified":1584728747196},{"_id":"themes/next/docs/zh-CN/ALGOLIA-SEARCH.md","hash":"3202be9a8d31986caac640e7a4c7ce22e99917eb","modified":1584728747197},{"_id":"themes/next/docs/ru/INSTALLATION.md","hash":"a9cfe5ac9ef727a8650b2b6584482751a26b1460","modified":1584728747194},{"_id":"themes/next/docs/zh-CN/INSTALLATION.md","hash":"716111dd36d276f463c707dfcc9937fea2a1cf7a","modified":1584728747199},{"_id":"themes/next/docs/zh-CN/CODE_OF_CONDUCT.md","hash":"7e6f227f2aaf30f400d4c065650a4e3d0d61b9e1","modified":1584728747197},{"_id":"themes/next/docs/zh-CN/CONTRIBUTING.md","hash":"611f2930c2b281b80543531b1bf33d082531456a","modified":1584728747198},{"_id":"themes/next/docs/zh-CN/MATH.md","hash":"0d46f9f50cf2e4183970adce705d1041155b0d37","modified":1584728747200},{"_id":"themes/next/layout/_macro/post-collapse.swig","hash":"db25de9ceaa1ec5650ff15cf4aee4399ed8f9c42","modified":1584728747214},{"_id":"themes/next/layout/_macro/post.swig","hash":"1de933ba35668e118e3ba220dbe5521c02e4bffe","modified":1584850211041},{"_id":"themes/next/layout/_macro/sidebar.swig","hash":"5bffdb1448caca7db7b1f84e1693e6657a106d50","modified":1584728747216},{"_id":"themes/next/docs/zh-CN/DATA-FILES.md","hash":"2d868cd271d78b08775e28c5b976de8836da4455","modified":1584728747199},{"_id":"themes/next/layout/_partials/comments.swig","hash":"142efb4c6b73d8f736f6784804b40d5871333172","modified":1584728747216},{"_id":"themes/next/layout/_partials/footer.swig","hash":"ed9e7fef585bcce1ac6ccfcbebe818a8ac9af6e5","modified":1584865403237},{"_id":"themes/next/layout/_partials/languages.swig","hash":"c3ea82604a5853fb44c5f4e4663cbe912aa5dcf8","modified":1584728747223},{"_id":"themes/next/layout/_partials/pagination.swig","hash":"2de77d533c91532a8a4052000244d0c1693370df","modified":1584728747225},{"_id":"themes/next/layout/_partials/widgets.swig","hash":"5392dcbb504266f0f61d5b8219914068ef9cdc25","modified":1584728747230},{"_id":"themes/next/docs/zh-CN/LEANCLOUD-COUNTER-SECURITY.md","hash":"50ab381c27611d5bf97bb3907b5ca9998f28187d","modified":1584728747200},{"_id":"themes/next/layout/_scripts/noscript.swig","hash":"7b9e0f776a5be6c3f95bc7f394e1424ba02ba93b","modified":1584728747232},{"_id":"themes/next/layout/_scripts/index.swig","hash":"1822eaf55bbb4bec88871c324fc18ad95580ccb4","modified":1584728747231},{"_id":"themes/next/layout/_scripts/pjax.swig","hash":"3690129f11eebd8ecf2e4103711d8ca78011c762","modified":1584728747233},{"_id":"themes/next/layout/_scripts/three.swig","hash":"6b092c6d882b2dfa5273e1b3f60b244cb7c29fcd","modified":1584728747236},{"_id":"themes/next/layout/_scripts/vendors.swig","hash":"244ca2d74ee0d497c87572c6a26b43c62a952673","modified":1584728747236},{"_id":"themes/next/layout/_third-party/baidu-push.swig","hash":"bd9ba0bf60cc3008ee14339fa395ee6af188e879","modified":1584728747240},{"_id":"themes/next/layout/_third-party/index.swig","hash":"c6b63cbc80938e6e09578b8c67e01adf13a9e3bd","modified":1584728747245},{"_id":"themes/next/layout/_third-party/quicklink.swig","hash":"5ae5adcd6f63ed98b2071e4f7e5e38c4d7d24e1b","modified":1584728747247},{"_id":"themes/next/layout/_third-party/rating.swig","hash":"269102fc5e46bd1ce75abdcce161f0570ae70e2f","modified":1584728747248},{"_id":"themes/next/docs/zh-CN/README.md","hash":"8f7c0d0b766024152591d4ccfac715c8e18b37f3","modified":1584728747201},{"_id":"themes/next/source/css/_mixins.styl","hash":"cf81a6731aa436e7bb8d9a743b01f62107e27dd3","modified":1584728747321},{"_id":"themes/next/source/css/main.styl","hash":"815ef30987d02f3d76dbe4b5ee3a72135a152678","modified":1584728747334},{"_id":"themes/next/docs/zh-CN/UPDATE-FROM-5.1.X.md","hash":"b3201934b966bc731eaf8a4dad4ba4bdcd300c10","modified":1584728747201},{"_id":"themes/next/source/images/apple-touch-icon-next.png","hash":"2959dbc97f31c80283e67104fe0854e2369e40aa","modified":1584728747336},{"_id":"themes/next/source/images/avatar.gif","hash":"18c53e15eb0c84b139995f9334ed8522b40aeaf6","modified":1584728747336},{"_id":"themes/next/source/css/_colors.styl","hash":"dbf0318df3b183f32b1f1c98621614e2fea72969","modified":1584728747281},{"_id":"themes/next/source/images/algolia_logo.svg","hash":"45eeea0b5fba833e21e38ea10ed5ab385ceb4f01","modified":1584728747335},{"_id":"themes/next/source/images/cc-by-nc.svg","hash":"6f076713fb9bf934aa2c1046bdf2cf2e37bc1eab","modified":1584728747339},{"_id":"themes/next/source/images/cc-by-nd.svg","hash":"42cd73da328077ccc92f859bb8f3cf621b3484f8","modified":1584728747339},{"_id":"themes/next/source/images/cc-by-nc-nd.svg","hash":"bc3588c9b2d7c68830524783120ff6cf957cf668","modified":1584728747338},{"_id":"themes/next/source/images/cc-by-nc-sa.svg","hash":"6f55543d1fb9cbc436c101d24f802dec7b41efc3","modified":1584728747338},{"_id":"themes/next/source/images/cc-by-sa.svg","hash":"70c1535f43e54e5ff35ca81419e77e4c0c301398","modified":1584728747340},{"_id":"themes/next/source/images/cc-zero.svg","hash":"9bfb52b2f63527a7049247bf00d44e6dc1170e7d","modified":1584728747341},{"_id":"themes/next/source/images/favicon-16x16-next.png","hash":"943a0d67a9cdf8c198109b28f9dbd42f761d11c3","modified":1584728747341},{"_id":"themes/next/source/images/cc-by.svg","hash":"e92a33c32d1dac8ed94849b2b4e6456e887efe70","modified":1584728747340},{"_id":"themes/next/source/images/favicon-32x32-next.png","hash":"0749d7b24b0d2fae1c8eb7f671ad4646ee1894b1","modified":1584728747342},{"_id":"themes/next/source/images/logo.svg","hash":"169f56fd82941591dad3abd734a50ec7259be950","modified":1584728747342},{"_id":"themes/next/source/images/quote-l.svg","hash":"cd108d6f44351cadf8e6742565217f88818a0458","modified":1584728747343},{"_id":"themes/next/source/images/quote-r.svg","hash":"2a2a250b32a87c69dcc1b1976c74b747bedbfb41","modified":1584728747343},{"_id":"themes/next/source/js/bookmark.js","hash":"2268bfcab8cf9019e590e2d356b08a3d4a0cf791","modified":1584728747345},{"_id":"themes/next/source/js/algolia-search.js","hash":"f0cee802b4d48d5e78ba88d77d4257cb8a88dd6e","modified":1584728747344},{"_id":"themes/next/source/js/local-search.js","hash":"42bd753481401902a8487576742cfe1e328fdd08","modified":1584728747345},{"_id":"themes/next/source/js/motion.js","hash":"d5aa1a08cdf3c8d1d8d550fb1801274cc41e5874","modified":1584728747346},{"_id":"themes/next/scripts/events/index.js","hash":"d3ba29f9849b88362bc44d5e92ab62262e0fc9cf","modified":1584728747261},{"_id":"themes/next/scripts/filters/default-injects.js","hash":"ad321db012cea520066deb0639335e9bc0dcc343","modified":1584728747268},{"_id":"themes/next/scripts/filters/front-matter.js","hash":"305d03c1e45782988809298c3e3b3c5d5ee438aa","modified":1584728747269},{"_id":"themes/next/scripts/filters/locals.js","hash":"10e4c75395652aff5406073b977c85031ea01659","modified":1584728747269},{"_id":"themes/next/scripts/filters/minify.js","hash":"21196a48cb127bf476ce598f25f24e8a53ef50c2","modified":1584728747270},{"_id":"themes/next/scripts/filters/post.js","hash":"4768cb4f3cc9a5f7e6591241619d8ed85a2fcf36","modified":1584728747271},{"_id":"themes/next/scripts/helpers/engine.js","hash":"42a8e01c3d17ef5a4775d9d8c18e2341faa4725f","modified":1584728747272},{"_id":"themes/next/scripts/helpers/font.js","hash":"20317a314d2283e4f87c8c8d247422f33427ebbe","modified":1584728747272},{"_id":"themes/next/scripts/helpers/next-config.js","hash":"b8d7ddfa4baa9b8d6b9066a634aa81c6243beec9","modified":1584728747273},{"_id":"themes/next/scripts/helpers/next-url.js","hash":"301c8061c17aa3394b726dc8f6a2863c176a03a6","modified":1584728747273},{"_id":"themes/next/scripts/tags/button.js","hash":"178d3efb8d2c1aca606181894c352fc65c40c32a","modified":1584728747275},{"_id":"themes/next/scripts/tags/center-quote.js","hash":"e11a738ee77c4304add79c964bdec3715c45653a","modified":1584728747275},{"_id":"themes/next/scripts/tags/caniuse.js","hash":"840536754121e0da5968f5ad235f29200fc5d769","modified":1584728747275},{"_id":"themes/next/scripts/tags/group-pictures.js","hash":"93ccd3f99d3cb42674f29183c756df63acb5d7f8","modified":1584728747276},{"_id":"themes/next/scripts/tags/label.js","hash":"fc83f4e1be2c34e81cb79938f4f99973eba1ea60","modified":1584728747277},{"_id":"themes/next/scripts/tags/mermaid.js","hash":"81134494ff0134c0dae1b3815caf6606fccd4e46","modified":1584728747277},{"_id":"themes/next/scripts/tags/note.js","hash":"1fdf4f95810fdb983bfd5ad4c4f13fedd4ea2f8d","modified":1584728747278},{"_id":"themes/next/scripts/tags/pdf.js","hash":"37b53661ad00a01a2ca7d2e4a5ad3a926073f8e2","modified":1584728747278},{"_id":"themes/next/scripts/tags/tabs.js","hash":"72a5adbd8f300bee1d0c289367598ca06b2bed17","modified":1584728747279},{"_id":"themes/next/scripts/tags/video.js","hash":"944293fec96e568d9b09bc1280d5dbc9ee1bbd17","modified":1584728747279},{"_id":"source/images/posts/capture.jpg","hash":"627513540f3c0bc672491e1916a542b0559b2cab","modified":1585971837610},{"_id":"source/images/posts/http2.statistic.png","hash":"62970e9debe56f2b41cad53881537e2a0ef16e48","modified":1585964851764},{"_id":"source/images/posts/wireshark.filter.jpg","hash":"c1535339a24bd42f634a64f4b76a5e3aad22cf93","modified":1585970519758},{"_id":"themes/next/source/js/next-boot.js","hash":"509c5b02446d4989a6ef3081cafeb9497cdde4e5","modified":1584728747347},{"_id":"themes/next/layout/_partials/head/head.swig","hash":"ca1b16202403515550f57b51dccb19afcb10ccf1","modified":1584728747218},{"_id":"themes/next/source/lib/anime.min.js","hash":"960be51132134acd65c2017cc8a5d69cb419a0cd","modified":1584728747350},{"_id":"themes/next/source/js/utils.js","hash":"212349738695f0c5dffcf26f6a3d33ce912e4ed4","modified":1584728747349},{"_id":"themes/next/layout/_partials/head/head-unique.swig","hash":"7d638e413f2548fc990c4a467dd03de6c81fc960","modified":1584728747218},{"_id":"themes/next/layout/_partials/header/index.swig","hash":"94edc28022325ba21b4e23bb13e1fac337223adc","modified":1584728747221},{"_id":"themes/next/layout/_partials/header/brand.swig","hash":"7248ba0b9decb51fd1f4ac5aac18057fc3dc5c37","modified":1584728747220},{"_id":"themes/next/layout/_partials/header/menu-item.swig","hash":"11acd6b585eeb823358e642c7dde7d637fda706f","modified":1584728747221},{"_id":"themes/next/layout/_partials/header/menu.swig","hash":"34a845987f536ffed8d6a9efc46306c26f84e3d7","modified":1584728747222},{"_id":"themes/next/layout/_partials/header/sub-menu.swig","hash":"bed6cc2b48cf2655036ba39c9bae73a295228a4d","modified":1584728747222},{"_id":"themes/next/layout/_partials/page/breadcrumb.swig","hash":"91c0addb33006619faa4c32e5d66874e25f1e9b3","modified":1584728747224},{"_id":"themes/next/layout/_partials/page/page-header.swig","hash":"b3b4ffcbda422d7fc21ee43fec7d2a5056b2f381","modified":1584728747224},{"_id":"themes/next/layout/_partials/post/post-copyright.swig","hash":"5fd5ba53962aefccb43b1d2b306a534add2373e1","modified":1584728747225},{"_id":"themes/next/layout/_partials/post/post-followme.swig","hash":"deffa919e72da6c2cdc2f32d403c809916bd36d1","modified":1584728747226},{"_id":"themes/next/layout/_partials/post/post-footer.swig","hash":"ce712c110b5ce8aacba7a86b0558ff89700675c9","modified":1584728747226},{"_id":"themes/next/layout/_partials/post/post-related.swig","hash":"bc7b047a6246df07767373644b1637d91c3a88b1","modified":1584728747227},{"_id":"themes/next/layout/_partials/search/algolia-search.swig","hash":"98fd1f5df044f4534e1d4ca9ab092ba5761739a9","modified":1584728747228},{"_id":"themes/next/layout/_partials/post/post-reward.swig","hash":"f349a226e5370075bb6924e60da8b0170c7cfcc1","modified":1584728747227},{"_id":"themes/next/layout/_partials/search/localsearch.swig","hash":"d2f7adee8eaa591afeb96967ba010d4597a9cb80","modified":1584728747229},{"_id":"themes/next/layout/_partials/search/index.swig","hash":"557364cc5bed278980fb49ca1498b0d49eee8624","modified":1584728747229},{"_id":"themes/next/layout/_partials/sidebar/site-overview.swig","hash":"d1b9a43bdfaf2b151cce1a74d23e65c2e488e41b","modified":1584728747230},{"_id":"themes/next/layout/_scripts/pages/schedule.swig","hash":"34c05e9d73b0f081db70990c296b6d6a0f8ea2ca","modified":1584728747233},{"_id":"themes/next/layout/_scripts/schemes/gemini.swig","hash":"34495d408e8467555afee489500b8aad98c52079","modified":1584728747234},{"_id":"themes/next/layout/_scripts/schemes/mist.swig","hash":"0b44f400ec00d2b5add5ee96c11d22465c432376","modified":1584728747234},{"_id":"themes/next/layout/_scripts/schemes/muse.swig","hash":"0b44f400ec00d2b5add5ee96c11d22465c432376","modified":1584728747234},{"_id":"themes/next/layout/_scripts/schemes/pisces.swig","hash":"34495d408e8467555afee489500b8aad98c52079","modified":1584728747235},{"_id":"themes/next/layout/_third-party/analytics/baidu-analytics.swig","hash":"84adaadd83ce447fa9da2cff19006334c9fcbff9","modified":1584728747238},{"_id":"themes/next/layout/_third-party/analytics/google-analytics.swig","hash":"b8819bd056f8a580c5556d4415836a906ed5d7a4","modified":1584728747238},{"_id":"themes/next/layout/_third-party/analytics/index.swig","hash":"85b60e222712ca3b2c4dc2039de2dc36b8d82940","modified":1584865600792},{"_id":"themes/next/layout/_third-party/analytics/growingio.swig","hash":"91c2cb900c76224c5814eeb842d1d5f517f9bf05","modified":1584865505222},{"_id":"themes/next/layout/_third-party/chat/chatra.swig","hash":"2642e8aef5afbe23a2a76efdc955dab2ee04ed48","modified":1584728747240},{"_id":"themes/next/layout/_third-party/chat/tidio.swig","hash":"fb94ee487d75e484e59b7fba96e989f699ff8a83","modified":1584728747241},{"_id":"themes/next/layout/_third-party/comments/changyan.swig","hash":"9298e6d6c4a62a0862fc0f4060ed99779d7b68cb","modified":1584728747242},{"_id":"themes/next/layout/_third-party/comments/disqus.swig","hash":"1b29b99fa921f12c25d3dc95facdf84ef7bb1b5c","modified":1584728747243},{"_id":"themes/next/layout/_third-party/comments/disqusjs.swig","hash":"a42f97eda3748583bac2253c47fe5dfa54f07b8f","modified":1584728747243},{"_id":"themes/next/layout/_third-party/comments/gitalk.swig","hash":"606ad14a29320157df9b8f33738282c51bb393d9","modified":1584728747244},{"_id":"themes/next/layout/_third-party/comments/livere.swig","hash":"3d91899ca079e84d95087b882526d291e6f53918","modified":1584728747244},{"_id":"themes/next/layout/_third-party/comments/valine.swig","hash":"ae2707d6e47582bb470c075649ec7bad86a6d5a9","modified":1584728747245},{"_id":"themes/next/layout/_third-party/math/index.swig","hash":"59df21fcfe9d0ada8cee3188cb1075529c1c3eb8","modified":1584728747246},{"_id":"themes/next/layout/_third-party/math/katex.swig","hash":"276f523e414d4aa7f350a8f2fd3df8a3d8ea9656","modified":1584728747246},{"_id":"themes/next/layout/_third-party/math/mathjax.swig","hash":"1f34b2d3c753a3589ab6c462880bd4eb7df09914","modified":1584728747247},{"_id":"themes/next/layout/_third-party/search/algolia-search.swig","hash":"fd726aad77a57b288f07d6998ec29291c67c7cbb","modified":1584728747249},{"_id":"themes/next/layout/_third-party/statistics/busuanzi-counter.swig","hash":"5b5618c2f6ad1d7971e6db257222fce89aa56565","modified":1584865807186},{"_id":"themes/next/layout/_third-party/search/localsearch.swig","hash":"58296a5c1883f26464c2a5ccf734c19f5fbf395a","modified":1584728747249},{"_id":"themes/next/layout/_third-party/statistics/cnzz-analytics.swig","hash":"53a0760c75d5aaabb3ce8e8aa8e003510d59807f","modified":1584728747252},{"_id":"themes/next/layout/_third-party/statistics/firestore.swig","hash":"01d94354d07e72cad47100482068b6be69fcc033","modified":1584728747253},{"_id":"themes/next/layout/_third-party/statistics/index.swig","hash":"964cd6bac668cf6d211a2624fbef3948cfdece55","modified":1584872943152},{"_id":"themes/next/layout/_third-party/statistics/lean-analytics.swig","hash":"c171ea94e9afbba97f06856904264da331559463","modified":1584728747254},{"_id":"themes/next/layout/_third-party/tags/mermaid.swig","hash":"619338ddacf01e3df812e66a997e778f672f4726","modified":1584728747255},{"_id":"themes/next/layout/_third-party/search/swiftype.swig","hash":"aa6ab95b8b76611694613defb4bf25003d1b927f","modified":1584728747250},{"_id":"themes/next/layout/_third-party/tags/pdf.swig","hash":"5a223b60406cee7438cfe3a5e41d1284425aa7a5","modified":1584728747255},{"_id":"themes/next/source/css/_variables/Mist.styl","hash":"40480ec86214b5da843549aa3cc2732ed3a718d6","modified":1584728747332},{"_id":"themes/next/source/css/_variables/Gemini.styl","hash":"583ff1e7a2ca889f1f54eb0ca793894466823c7c","modified":1584728747332},{"_id":"themes/next/source/css/_variables/Pisces.styl","hash":"4c17c448d090a2468edc3fbd797770e7150a4054","modified":1584728747333},{"_id":"themes/next/source/css/_variables/Muse.styl","hash":"c22b58af3327236ec54d5706501aa5a20e15012e","modified":1584728747333},{"_id":"themes/next/source/css/_variables/base.styl","hash":"cc9bf3b5a34cf788c1ebc31513ca040b6192932f","modified":1584728747334},{"_id":"themes/next/source/js/schemes/muse.js","hash":"78c77614b9fe0d7d97aa08468c6cffbcbda96b75","modified":1584728747348},{"_id":"themes/next/source/lib/font-awesome/.bower.json","hash":"b4aefc910578d76b267e86dfffdd5121c8db9aec","modified":1584728747351},{"_id":"themes/next/source/lib/font-awesome/.gitignore","hash":"03ddbf76c1dd1afb93eed0b670d2eee747472ef1","modified":1584728747351},{"_id":"themes/next/source/js/schemes/pisces.js","hash":"1a9741145938e2c754a808381350723cbebf43c5","modified":1584728747348},{"_id":"themes/next/source/lib/font-awesome/.npmignore","hash":"c31ff06a740955e44edd4403902e653ccabfd4db","modified":1584728747352},{"_id":"themes/next/scripts/events/lib/injects-point.js","hash":"08496b71c9939718e7955704d219e44d7109247b","modified":1584728747262},{"_id":"themes/next/source/lib/font-awesome/HELP-US-OUT.txt","hash":"ee33b2798b1e714b904d663436c6b3521011d1fa","modified":1584728747352},{"_id":"themes/next/scripts/events/lib/config.js","hash":"913154f487b0e49c5a7fb0f462ec7fa4c90e87cb","modified":1584728747261},{"_id":"themes/next/scripts/filters/comment/changyan.js","hash":"d002c9eea7e7dd31b64a4172012d4294489974d5","modified":1584728747264},{"_id":"themes/next/scripts/events/lib/injects.js","hash":"e73f697bb160b223fdde783237148be5f41c1d78","modified":1584728747263},{"_id":"themes/next/scripts/filters/comment/common.js","hash":"31a6c8fbdfa16112b0b099727437b9df7641d421","modified":1584728747264},{"_id":"themes/next/scripts/filters/comment/default-config.js","hash":"0c3bea89d64bc12c1bbe6f208a83773c6fb5375a","modified":1584728747265},{"_id":"themes/next/scripts/filters/comment/disqus.js","hash":"14917c0f9ac76b50296e64437316cba0966c61d1","modified":1584728747265},{"_id":"themes/next/scripts/filters/comment/disqusjs.js","hash":"67cf90d9a2428c14eb113a64bdd213c22a019aef","modified":1584728747266},{"_id":"themes/next/scripts/filters/comment/gitalk.js","hash":"323a47df6ded894944a2647db44556d6163e67c4","modified":1584728747267},{"_id":"themes/next/scripts/filters/comment/livere.js","hash":"a4f3153ac76a7ffdf6cc70f52f1b2cc218ed393e","modified":1584728747267},{"_id":"themes/next/scripts/filters/comment/valine.js","hash":"7ff11f64f4315d06ba585928fc9a8bc3761894a5","modified":1584728747268},{"_id":"themes/next/source/lib/font-awesome/bower.json","hash":"71e7183634dc1b9449f590f15ebd7201add22ca7","modified":1584728747353},{"_id":"themes/next/source/lib/velocity/velocity.ui.min.js","hash":"dde584994ac13dc601836e86f4cf490e418d9723","modified":1584728747363},{"_id":"themes/next/source/lib/velocity/velocity.min.js","hash":"bf172816a9c57f9040e3d19c24e181a142daf92b","modified":1584728747362},{"_id":"themes/next/source/css/_common/outline/mobile.styl","hash":"78406dfb644b0e516f697aead3ed5d545c5b8144","modified":1584728747303},{"_id":"themes/next/source/css/_common/components/components.styl","hash":"d17236df3b4d6def1e4e81133ef4729c390de3ac","modified":1584728747284},{"_id":"themes/next/source/css/_common/components/back-to-top-sidebar.styl","hash":"510a6f0ba7485dd54ce347cca890ab52c4957081","modified":1584728747282},{"_id":"themes/next/source/css/_common/scaffolding/buttons.styl","hash":"45f4badac6ec45cf24355f6157aece1d4d3f1134","modified":1584728747309},{"_id":"themes/next/source/css/_common/components/reading-progress.styl","hash":"c52648a7b09f9fe37858f5694fcc1ffc709ad147","modified":1584728747294},{"_id":"themes/next/source/css/_common/outline/outline.styl","hash":"ca1da6314c123f1bf0a95feefb073f08bb8c256a","modified":1584728747304},{"_id":"themes/next/source/css/_common/scaffolding/base.styl","hash":"a88d17d642c3ae3452e9eeb87b0d22d6d63dc0f6","modified":1584728747309},{"_id":"themes/next/source/css/_common/scaffolding/normalize.styl","hash":"6d740699fb6a7640647a8fd77c4ea4992d8d6437","modified":1584728747313},{"_id":"themes/next/source/css/_common/scaffolding/scaffolding.styl","hash":"43045d115f8fe95732c446aa45bf1c97609ff2a5","modified":1584728747314},{"_id":"themes/next/source/css/_common/scaffolding/tables.styl","hash":"7ed4733240206d1aa729c835e69a85f8f3c73cd6","modified":1584728747315},{"_id":"themes/next/source/css/_common/components/back-to-top.styl","hash":"0534b329d279a6f255112b3305ff92c810f31724","modified":1584728747283},{"_id":"themes/next/source/css/_common/scaffolding/comments.styl","hash":"90be8ad82cd0707e2952fe2c815638a723d1cfbb","modified":1584728747310},{"_id":"themes/next/source/css/_common/scaffolding/pagination.styl","hash":"b619f39e18398422e0ac4999d8f042a5eaebe9cd","modified":1584728747313},{"_id":"themes/next/source/css/_schemes/Gemini/index.styl","hash":"f65e8f5be2a7cbb477524a0933460d99b75f80db","modified":1584728747322},{"_id":"themes/next/source/css/_schemes/Mist/_layout.styl","hash":"33a3afa51df3dfffc12dd98cc9fa329cd6ce00e1","modified":1584728747324},{"_id":"themes/next/source/css/_common/scaffolding/toggles.styl","hash":"20e0e3e3eba384930c022e21511214d244b4c9e7","modified":1584728747321},{"_id":"themes/next/source/css/_schemes/Mist/_posts-expand.styl","hash":"75993e40e791a2dd954c27884b45929f7c3f6bf2","modified":1585972268930},{"_id":"themes/next/source/css/_schemes/Mist/_menu.styl","hash":"716e8b0f056bf6393e6bc6969ac84598ab8e7a6f","modified":1584728747324},{"_id":"themes/next/source/css/_schemes/Mist/_header.styl","hash":"b9e87d32da24264bda247c1526afe140c858b0ef","modified":1584728747323},{"_id":"themes/next/source/css/_schemes/Pisces/_header.styl","hash":"558794fced306339b98dc2b0ee7f0576802f1355","modified":1584728747329},{"_id":"themes/next/source/css/_schemes/Mist/index.styl","hash":"c5142739e01e9f25c8b32b2209af85c787bb2b42","modified":1584728747325},{"_id":"themes/next/source/css/_schemes/Pisces/_layout.styl","hash":"5de34e1d8a290751641ae456c942410852d5e809","modified":1584728747330},{"_id":"themes/next/source/css/_schemes/Pisces/_sidebar.styl","hash":"919068c7db32bfee26238e3a783efe14b3060d63","modified":1584728747331},{"_id":"themes/next/source/css/_schemes/Pisces/_menu.styl","hash":"315eea625a90a19421b6d6413322ae40bb5ad4c6","modified":1584728747330},{"_id":"themes/next/source/css/_schemes/Pisces/index.styl","hash":"25c2a7930da14f023329df20f38df2728057fb4d","modified":1584728747331},{"_id":"themes/next/source/css/_schemes/Pisces/_sub-menu.styl","hash":"c9df5ee78b46f4a2926e6e88fbe1ba1a9a75aecc","modified":1584728747331},{"_id":"themes/next/source/css/_schemes/Muse/_header.styl","hash":"8674bd88df076a1dfe4023ed6750ded1f5b00223","modified":1584728747326},{"_id":"themes/next/source/css/_schemes/Muse/_menu.styl","hash":"cf10a9f9e0d3919741525007799d34ff06a3ba4f","modified":1584728747327},{"_id":"themes/next/source/css/_schemes/Muse/_layout.styl","hash":"49c76bc723d3952abb613d9d68398ed7305da999","modified":1584728747326},{"_id":"themes/next/source/css/_schemes/Muse/_sub-menu.styl","hash":"2d3e05015796a790abd9d68957a5c698c0c9f9b6","modified":1584728747328},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.min.css","hash":"88af80502c44cd52ca81ffe7dc7276b7eccb06cf","modified":1584728747355},{"_id":"themes/next/source/css/_schemes/Muse/index.styl","hash":"25c2a7930da14f023329df20f38df2728057fb4d","modified":1584728747328},{"_id":"themes/next/source/css/_schemes/Muse/_sidebar.styl","hash":"9898323ee5a7ac2a5d4f633c653112280beb2643","modified":1584728747328},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.css.map","hash":"1573904b82807abbb32c97a3632c6c6808eaac50","modified":1584728747354},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.css","hash":"3655f1fdf1e584c4d8e8d39026093ca306a5a341","modified":1584728747354},{"_id":"themes/next/source/css/_common/outline/header/github-banner.styl","hash":"b31c86d1a4f89837f9187bed646bda96b2cd286c","modified":1584728747300},{"_id":"themes/next/source/css/_common/outline/header/menu.styl","hash":"73c578914052e11392cd4364af9075b66832b793","modified":1584728747302},{"_id":"themes/next/source/css/_common/outline/footer/footer.styl","hash":"7eeb22c5696f8e0c95161dc57703973cf81c8c12","modified":1584728747299},{"_id":"themes/next/source/css/_common/outline/header/header.styl","hash":"300058ca12e81013e77ba01fe66ac210525768b6","modified":1584728747301},{"_id":"themes/next/source/css/_common/outline/header/bookmark.styl","hash":"f7977cfacaca9db6fab4d154486ad57ec4b0fde9","modified":1584728747300},{"_id":"themes/next/source/css/_common/outline/header/headerband.styl","hash":"6d5f26646e2914474f295de8bf6dc327d4acd529","modified":1584728747301},{"_id":"themes/next/source/css/_common/outline/sidebar/sidebar-author-links.styl","hash":"49722d555a2edb18094bb2cb3d7336dd72051b93","modified":1584728747304},{"_id":"themes/next/source/css/_common/outline/sidebar/sidebar-blogroll.styl","hash":"096f908c08ce553e482aadfd3e767a0145191093","modified":1584728747305},{"_id":"themes/next/source/css/_common/outline/header/site-meta.styl","hash":"95af3adc865eebd6b2fbca07d8e48cc12b6b39e0","modified":1584728747302},{"_id":"themes/next/source/css/_common/outline/header/site-nav.styl","hash":"b8c816fba0a9b4a35fbae03ba5b1b2da96ba2687","modified":1584728747303},{"_id":"themes/next/source/css/_common/outline/sidebar/sidebar-button.styl","hash":"0812ae7ecd1d8c60ec4290f506ec10881ed0fca8","modified":1584728747306},{"_id":"themes/next/source/css/_common/outline/sidebar/sidebar-dimmer.styl","hash":"12f7eaf6b56624cbc411528562d6bb848ff97039","modified":1584728747306},{"_id":"themes/next/source/css/_common/outline/sidebar/sidebar-author.styl","hash":"357f825f0a649b2e28cba1481d4c9a0cb402e43a","modified":1584728747305},{"_id":"themes/next/source/css/_common/outline/sidebar/sidebar-nav.styl","hash":"b11b04737a1a0fea3bd9f0081d96ee6c015358d4","modified":1584728747307},{"_id":"themes/next/source/css/_common/outline/sidebar/sidebar.styl","hash":"5d540f683018745a5ed1d6f635df28ea610c1244","modified":1584728747308},{"_id":"themes/next/source/css/_common/outline/sidebar/sidebar-toggle.styl","hash":"098b4bdf49c7300490f959386d5d1185a32543f6","modified":1584728747307},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.woff2","hash":"d6f48cba7d076fb6f2fd6ba993a75b9dc1ecbf0c","modified":1584728747361},{"_id":"themes/next/source/css/_common/outline/sidebar/sidebar-toc.styl","hash":"fa0a2ea57b7b4ce75b5d18c264af2d92ea3192f9","modified":1584728747307},{"_id":"themes/next/source/css/_common/outline/sidebar/site-state.styl","hash":"67a1fcb33535122d41acd24f1f49cf02c89b88fa","modified":1584728747308},{"_id":"themes/next/source/css/_common/components/pages/pages.styl","hash":"6cf78a379bb656cc0abb4ab80fcae60152ce41ad","modified":1584728747285},{"_id":"themes/next/source/css/_common/components/post/post-collapse.styl","hash":"a00ad72fd0b60f0a5c6074f1020d5d7657c390fb","modified":1584851276904},{"_id":"themes/next/source/css/_common/components/pages/breadcrumb.styl","hash":"236a039b0900f4267de566b46f62314ad967d30f","modified":1584728747284},{"_id":"themes/next/source/css/_common/components/pages/tag-cloud.styl","hash":"a22c639cdf1073c9d060af62233125991ddf4dd5","modified":1584728747287},{"_id":"themes/next/source/css/_common/components/post/post-copyright.styl","hash":"9af620eba5ccceea21a0e3bc69f6f1fa7637c2f3","modified":1584728747288},{"_id":"themes/next/source/css/_common/components/pages/categories.styl","hash":"18edddb2ffb3f85a68e4367f81e06c461e07bc25","modified":1584728747285},{"_id":"themes/next/source/css/_common/components/post/post-followme.styl","hash":"57b9a179675f1536e017cba457b6ac575e397c4f","modified":1584728747290},{"_id":"themes/next/source/css/_common/components/post/post-expand.styl","hash":"2bfe115c2fc68f4dfce4afc4a001a2db81edd83b","modified":1584728747290},{"_id":"themes/next/source/css/_common/components/post/post-eof.styl","hash":"724ca213d15ae27158c2cddf9c26d3dba3582283","modified":1584728747289},{"_id":"themes/next/source/css/_common/components/post/post-header.styl","hash":"d9874c4194632c41baf76dcba690662c460e111e","modified":1584851338345},{"_id":"themes/next/source/css/_common/components/post/post-rtl.styl","hash":"09dda2667628d1f91b2e37d8fc6df1413f961b64","modified":1584728747293},{"_id":"themes/next/source/css/_common/components/post/post-gallery.styl","hash":"0dfb97703a519d9438f64f9e41ab1dd37381f733","modified":1584728747291},{"_id":"themes/next/source/css/_common/components/post/post-widgets.styl","hash":"b266d2ce5e2b117be01537889e839a69004dc0bb","modified":1584728747293},{"_id":"themes/next/source/css/_common/components/post/post-nav.styl","hash":"81b2bbd6fb590101a089bc390ed4934f5c462215","modified":1584728747292},{"_id":"themes/next/source/css/_common/components/post/post-reward.styl","hash":"82a275ca74086a46b8e82d5ebf78c7a807cd9c8b","modified":1584728747292},{"_id":"themes/next/source/css/_common/components/post/post-tags.styl","hash":"5cc9e7394c927065c688cba5edd6e0a27587f1d8","modified":1584728747293},{"_id":"themes/next/source/css/_common/components/third-party/gitalk.styl","hash":"b87f4a06c0db893df4f756f24be182e1a4751f24","modified":1584728747295},{"_id":"themes/next/source/css/_common/components/third-party/search.styl","hash":"bad99f4cccb93b3cefe990a2c85124e60698d32e","modified":1584728747297},{"_id":"themes/next/source/css/_common/components/post/post.styl","hash":"d0ddd1fdb75f2360202b98f280c79cb73685d4c7","modified":1584818631721},{"_id":"themes/next/source/css/_common/components/third-party/related-posts.styl","hash":"8ed7a9d5dfac592de703421b543978095129aa5b","modified":1584728747297},{"_id":"themes/next/source/css/_common/components/third-party/math.styl","hash":"d83102771df652769e51ddfd041cf5f4ca1a041d","modified":1584728747296},{"_id":"themes/next/source/css/_common/components/third-party/third-party.styl","hash":"1f6b0d3ab227697ca115e57fd61122ea7950e19d","modified":1584728747298},{"_id":"themes/next/source/css/_common/scaffolding/highlight/highlight.styl","hash":"80488259271bcfe38031f4c2e902463daba9336b","modified":1584728747312},{"_id":"themes/next/source/css/_common/scaffolding/tags/blockquote-center.styl","hash":"8c318a485c56dbdcdb22fd00781484ecc151bf8a","modified":1584728747316},{"_id":"themes/next/source/css/_common/scaffolding/highlight/diff.styl","hash":"83bd737f663a8461e66985af8ddbfc0a731fc939","modified":1584728747311},{"_id":"themes/next/source/css/_common/scaffolding/highlight/theme.styl","hash":"c911045b2ce9a66e38d9dd30c7ed078abbc10cbf","modified":1584728747312},{"_id":"themes/next/source/css/_common/scaffolding/tags/group-pictures.styl","hash":"aca7bb220fc14ef2a8f96282d2a95a96a9238d46","modified":1584728747316},{"_id":"themes/next/source/css/_common/scaffolding/tags/note.styl","hash":"9d1f42d01f6e346b61f83cdd4f5fbd3bf8e44968","modified":1584728747319},{"_id":"themes/next/source/css/_common/scaffolding/tags/pdf.styl","hash":"03a5bcecc0b12231462ef6ffe432fa77ee71beff","modified":1584728747319},{"_id":"themes/next/source/css/_common/scaffolding/tags/tags.styl","hash":"51d46fa3c7c6b691c61a2c2b0ac005c97cfbf72b","modified":1584728747320},{"_id":"themes/next/source/css/_common/scaffolding/tags/label.styl","hash":"8b7aafb911850c73074cdb6cc87abe4ac8c12e99","modified":1584728747317},{"_id":"themes/next/source/css/_common/scaffolding/highlight/copy-code.styl","hash":"4079e616fbf36112dec0674c1e0713d1d9769068","modified":1584728747311},{"_id":"themes/next/source/css/_common/scaffolding/tags/tabs.styl","hash":"798a81e94fc14c78173b6f2553b0892d90fcb29a","modified":1584728747320},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.woff","hash":"28b782240b3e76db824e12c02754a9731a167527","modified":1584728747360},{"_id":"themes/next/source/css/_common/components/pages/schedule.styl","hash":"66001b7624ca044f9c06e75036f0e6e4b091b094","modified":1584728747286},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.eot","hash":"d980c2ce873dc43af460d4d572d441304499f400","modified":1584728747359},{"_id":"public/search.xml","hash":"a0949060c88f7264bb82054db5e5681b0883c526","modified":1586147430312},{"_id":"public/tags/index.html","hash":"cd8fb0dfe63c760d2cd4309a032cb37ba43682bf","modified":1586149090152},{"_id":"public/Javascript是如何执行一段代码的/index.html","hash":"a07d16e4ca209e15a40af61417828861441b1af1","modified":1586149090152},{"_id":"public/使用verdaccio搭建私有NPM/index.html","hash":"248c90018791cf3ef4b7684c451ba7b23c3035cf","modified":1586149090152},{"_id":"public/archives/index.html","hash":"a4c6ddc502c9cd40ce91a3aead499d99dbf3d016","modified":1586149090152},{"_id":"public/archives/2019/index.html","hash":"dc1348cd5a34c2d2642cef083448b4a8e68daf22","modified":1586149090152},{"_id":"public/archives/2019/01/index.html","hash":"e6838148282be6bdcb9db17f4815b13fa6bc4b26","modified":1586149090152},{"_id":"public/archives/2019/07/index.html","hash":"773a6e1a7423cae90ffb350ded03ff7243b85e1b","modified":1586149090152},{"_id":"public/archives/2019/08/index.html","hash":"00e214c94016029febc9981d98e6adedc0d12fde","modified":1586149090152},{"_id":"public/archives/2019/09/index.html","hash":"0863ef0dc72fcbc99932162ce751abd1dfd6377c","modified":1586149090152},{"_id":"public/archives/2020/index.html","hash":"3892fb1575a446e74b8fda66cb3724c862ed370a","modified":1586149090152},{"_id":"public/archives/2020/03/index.html","hash":"8bb76b86561a20f32370f73108ea2209c21e77b4","modified":1586149090152},{"_id":"public/archives/2020/04/index.html","hash":"7755b5382f1d6353aa3e33044b8fdb781f2ff0c3","modified":1586149090152},{"_id":"public/tags/NPM/index.html","hash":"322189dc0802636ae9ed0ceb75d16909affe9db3","modified":1586149090152},{"_id":"public/tags/menorepo/index.html","hash":"abba8ad9f1f91f64852d1edbdb7b14b28d9dfb05","modified":1586149090152},{"_id":"public/tags/PWA/index.html","hash":"44bebf979c12d5bd047e962333f3cd0b100f23fe","modified":1586149090152},{"_id":"public/tags/HTTP2/index.html","hash":"ef6f52197ce2f15fb17aed118434c1121c008170","modified":1586149090152},{"_id":"public/tags/WireShark/index.html","hash":"92a09229534df68ed6383d4907f6d038a58c3734","modified":1586149090152},{"_id":"public/tags/user-agent/index.html","hash":"cb51f9a19b14e0de2d4a05cf58256cdece04183b","modified":1586149090152},{"_id":"public/tags/chrome/index.html","hash":"6cf925366eb4288a253703f839a32e4ce961cd27","modified":1586149090152},{"_id":"public/tags/前端安全/index.html","hash":"95a17b1816eeda932cc4b6bdd593cb13ec55be70","modified":1586149090152},{"_id":"public/tags/CSRF/index.html","hash":"51bebb666771d8403d85dab1d8f7bf362f4a774e","modified":1586149090152},{"_id":"public/谷歌将逐步停止支持-User-Agent/index.html","hash":"03273e7d08458c873e690a2ec9cad0fa1a8827ed","modified":1586149090152},{"_id":"public/PWA对比Native谁更胜一筹/index.html","hash":"968dcbfc682f3715bd05b082c042fde473fd8b3e","modified":1586149090152},{"_id":"public/NPM@7 将支持 Mnorepo 特性/index.html","hash":"918211bc1582d72c4f02d0065ed53f26b98a36b8","modified":1586149090152},{"_id":"public/使用WireShark抓包HTTP2/index.html","hash":"0cbdfa41c246b89017344d926f60479b1f3e64df","modified":1586149090152},{"_id":"public/前端安全-CSRF/index.html","hash":"47caf568e190d7d2aa0586591ee77d809035836f","modified":1586149090152},{"_id":"public/categories/news/index.html","hash":"9292cdf9973e7ba21dfb367501cc565c91103585","modified":1586149090152},{"_id":"public/categories/posts/index.html","hash":"151719ef8aecc9d76f8f8c333dddfbd8086d14f1","modified":1586149090152},{"_id":"public/index.html","hash":"a1dbe0aae476577c6b4a156bfe9f4a84a46d2635","modified":1586149090152},{"_id":"public/CNAME","hash":"aabd776136eaf72609c605ca990399769b007b93","modified":1586147430312},{"_id":"public/images/avatar.jpg","hash":"432bd5097911e12deaf6d9006ddf07dbef0de2cd","modified":1586147430312},{"_id":"public/images/favicon-16x16.png","hash":"c41313395e2b4645ad972dd9ff6988d2c81628b2","modified":1586147430312},{"_id":"public/images/avatar.png","hash":"ef3daf2f9f31786a1acb2fd98c1f3118deac7b27","modified":1586147430312},{"_id":"public/images/favicon-32x32.png","hash":"b0280337d3fa067a8b29a85bfaae5db2d55120a1","modified":1586147430312},{"_id":"public/images/logo.svg","hash":"169f56fd82941591dad3abd734a50ec7259be950","modified":1586147430312},{"_id":"public/images/posts/capture.net.card.jpg","hash":"1550f1aa3d7cefab9362b415ece65e4e88ac84d9","modified":1586147430312},{"_id":"public/images/posts/pwa.native.png","hash":"9845ece9fc891a8506896efae6deb63bf86bd8e5","modified":1586147430312},{"_id":"public/images/posts/wireshark.tls.set.jpg","hash":"b02a34d1824952190f9a77c262465b0f7665d56d","modified":1586147430312},{"_id":"public/images/posts/system.var.jpg","hash":"9d4ff3a774fe68b7767cdb05562c2a9444632722","modified":1586147430312},{"_id":"public/images/apple-touch-icon-next.png","hash":"2959dbc97f31c80283e67104fe0854e2369e40aa","modified":1586147430312},{"_id":"public/images/avatar.gif","hash":"18c53e15eb0c84b139995f9334ed8522b40aeaf6","modified":1586147430312},{"_id":"public/images/algolia_logo.svg","hash":"45eeea0b5fba833e21e38ea10ed5ab385ceb4f01","modified":1586147430312},{"_id":"public/images/cc-by-nc.svg","hash":"6f076713fb9bf934aa2c1046bdf2cf2e37bc1eab","modified":1586147430312},{"_id":"public/images/cc-by-nd.svg","hash":"42cd73da328077ccc92f859bb8f3cf621b3484f8","modified":1586147430312},{"_id":"public/images/cc-by-nc-nd.svg","hash":"bc3588c9b2d7c68830524783120ff6cf957cf668","modified":1586147430312},{"_id":"public/images/cc-by-nc-sa.svg","hash":"6f55543d1fb9cbc436c101d24f802dec7b41efc3","modified":1586147430312},{"_id":"public/images/cc-by-sa.svg","hash":"70c1535f43e54e5ff35ca81419e77e4c0c301398","modified":1586147430312},{"_id":"public/images/favicon-16x16-next.png","hash":"943a0d67a9cdf8c198109b28f9dbd42f761d11c3","modified":1586147430312},{"_id":"public/images/cc-zero.svg","hash":"9bfb52b2f63527a7049247bf00d44e6dc1170e7d","modified":1586147430312},{"_id":"public/images/cc-by.svg","hash":"e92a33c32d1dac8ed94849b2b4e6456e887efe70","modified":1586147430312},{"_id":"public/images/favicon-32x32-next.png","hash":"0749d7b24b0d2fae1c8eb7f671ad4646ee1894b1","modified":1586147430312},{"_id":"public/images/quote-l.svg","hash":"cd108d6f44351cadf8e6742565217f88818a0458","modified":1586147430312},{"_id":"public/images/quote-r.svg","hash":"2a2a250b32a87c69dcc1b1976c74b747bedbfb41","modified":1586147430312},{"_id":"public/images/posts/capture.jpg","hash":"627513540f3c0bc672491e1916a542b0559b2cab","modified":1586147430312},{"_id":"public/images/posts/http2.statistic.png","hash":"62970e9debe56f2b41cad53881537e2a0ef16e48","modified":1586147430312},{"_id":"public/lib/font-awesome/HELP-US-OUT.txt","hash":"ee33b2798b1e714b904d663436c6b3521011d1fa","modified":1586147430312},{"_id":"public/lib/font-awesome/css/font-awesome.css.map","hash":"1573904b82807abbb32c97a3632c6c6808eaac50","modified":1586147430312},{"_id":"public/images/apple-touch-icon.png","hash":"ce9417d8d8e37c30db803d9a95f8c7d140686b36","modified":1586147430312},{"_id":"public/images/posts/pwa.vs.native.png","hash":"1750fabd3314096c97bb7c7b6e7db73d53c29dbc","modified":1586147430312},{"_id":"public/images/posts/wireshark.filter.jpg","hash":"c1535339a24bd42f634a64f4b76a5e3aad22cf93","modified":1586147430312},{"_id":"public/lib/font-awesome/fonts/fontawesome-webfont.woff","hash":"28b782240b3e76db824e12c02754a9731a167527","modified":1586147430312},{"_id":"public/js/bookmark.js","hash":"a00945ff886e9f6f835731cdaf29a3a3727c8877","modified":1586147430312},{"_id":"public/js/algolia-search.js","hash":"23cc3c013185eb97ef347c3b4c92d928f2f3398f","modified":1586147430312},{"_id":"public/js/motion.js","hash":"72df86f6dfa29cce22abeff9d814c9dddfcf13a9","modified":1586147430312},{"_id":"public/js/next-boot.js","hash":"a22eeb6048ddd6b9224c8a671cbcfa303a2f7a1a","modified":1586147430312},{"_id":"public/js/schemes/muse.js","hash":"47c4f60eb7f7dc3303e84914b611dc34827069e1","modified":1586147430312},{"_id":"public/js/schemes/pisces.js","hash":"3d9d3c14b77044d66be1898a9a934696e9127c82","modified":1586147430312},{"_id":"public/lib/font-awesome/bower.json","hash":"64394a2a9aa00f8e321d8daa5e51a420f0e96dad","modified":1586147430312},{"_id":"public/css/main.css","hash":"0f4bd7540fe1e672558312f4a752a3ad593133ef","modified":1586147430312},{"_id":"public/lib/font-awesome/fonts/fontawesome-webfont.woff2","hash":"d6f48cba7d076fb6f2fd6ba993a75b9dc1ecbf0c","modified":1586147430312},{"_id":"public/lib/font-awesome/fonts/fontawesome-webfont.eot","hash":"d980c2ce873dc43af460d4d572d441304499f400","modified":1586147430312},{"_id":"public/js/local-search.js","hash":"5d6f4d28b121f42a5d633d3f19a3ea161f9dbb48","modified":1586147430312},{"_id":"public/js/utils.js","hash":"95c5d37aa06521675afcf8619cfc5dbba3d2e18a","modified":1586147430312},{"_id":"public/lib/velocity/velocity.ui.min.js","hash":"ed5e534cd680a25d8d14429af824f38a2c7d9908","modified":1586147430312},{"_id":"public/lib/anime.min.js","hash":"47cb482a8a488620a793d50ba8f6752324b46af3","modified":1586147430312},{"_id":"public/lib/font-awesome/css/font-awesome.min.css","hash":"512c7d79033e3028a9be61b540cf1a6870c896f8","modified":1586147430312},{"_id":"public/lib/font-awesome/css/font-awesome.css","hash":"0140952c64e3f2b74ef64e050f2fe86eab6624c8","modified":1586147430312},{"_id":"public/lib/velocity/velocity.min.js","hash":"2f1afadc12e4cf59ef3b405308d21baa97e739c6","modified":1586147430312},{"_id":"source/_drafts/ios8-web-app.md","hash":"448b1e344fd9f8d247cf8511d59e1f0a2493ae3f","modified":1586160890769},{"_id":"source/images/posts/verdaccio.run.jpg","hash":"5761e4694759b1ca1a88b40c159269375a9c80df","modified":1586237262402},{"_id":"source/images/posts/verdaccio.ls.jpg","hash":"af09359f95d8dda77b89a63b010accfb8ea0ea86","modified":1586272830489}],"Category":[{"name":"news","_id":"ck8nz89jb0005qcnchz7oeovy"},{"name":"posts","_id":"ck8nz89kh000dqcnc7sod95xb"}],"Data":[],"Page":[{"title":"标签","date":"2018-10-10T04:21:48.000Z","type":"tags","_content":"","source":"tags/index.md","raw":"---\ntitle: 标签\ndate: 2018-10-10 12:21:48\ntype: \"tags\"\n---","updated":"2020-03-21T08:31:29.475Z","path":"tags/index.html","comments":1,"layout":"page","_id":"ck8nz89p2000vqcncgjsrdqp9","content":"","site":{"data":{}},"length":0,"excerpt":"","more":""}],"Post":[{"title":"HTTP/3现状","_content":"\nHTTP/3 是下一代跨 Web 的网络通信协议，这意味着它会部分取代 HTTP/1 和 HTTP/2。离 2 月在苏黎世召开的下一届 QUIC 工作组会议还有一个月的时间，回顾一下 HTTP/3 的承诺和当前客户端 / 服务器的支持情况可能会非常有助益。   \n\n<!-- more -->\n\n#### HTTP/3 更快的连接速度 \n\nHTTP/3 承诺让互联网连接更快、更稳定和更安全。它的前身为“HTTP over QUIC”，其目标是让 HTTP 在谷歌自己的传输层协议 QUIC 上运行，随后，它被提议为IETF ，目前它是 Internet 草案。在 2018 年 10 月，IETF HTTP & QUIC 工作组联席主席 Mark Nottingham提议将 HTTP over QUIC 重命名为 HTTP/3 ，以澄清其本质特点以及与 QUIC 的独立性。  \n  \nQUIC 是 HTTP/3 的关键元素，因为它是主要特性的基础。QUIC 构建在 UDP 之上，致力于解决使用 TCP 协议的主要问题，比如，连接建立的延迟以及在包丢失的情况下多个流的处理。TCP 延迟问题源于其拥塞控制算法的需求，该算法要求在拥塞发生之前会缓慢地开始（slow start）评估可以发送多少流量。在 HTTP/1.0 中，每个 TCP 请求 / 响应交换都会被分配一个新的连接，因此会导致启动缓慢的问题。  \n\n从此之后，规避 TCP 启动慢的尝试一直是 HTTP 协议改善的核心。  \n\nHTTP/1.1 引入了“keep-alive”连接，允许在同一个 TCP 连接上对多个请求 - 响应交换进行序列化，因此不需要为每个请求都设置新的连接建立阶段。然而，HTTP/1.1 的 keep-alive 连接不支持同时发送多个请求，随着 Web 页面日益复杂，这导致了新的瓶颈。  \n\nHTTP/2 则源自现在已被弃用的 SPDY 协议，它引入了在同一连接中嵌入第一等流的概念。这使得在保证多路复用的同时实现请求- 响应交换成为可能，但是它有一个主要的缺陷：当包丢失增加时， HTTP/2 的性能会由于 TCP 处理包重传的方式（HOL 阻塞）而下降。这种影响可能非常严重，因为所有流都共享相同的连接。当数据包丢失超过一个给定的阈值时，HTTP/1 的多连接甚至会比 HTTP/2 运行地更高效。  \n\n如前文所述，QUIC 提供了对流的第一等支持，这解决了 HTTP/2 中连接初始化缓慢的问题。另外，它可以对它们进行单独处理，从而解决了由于包丢失而导致的性能问题。采用 QUIC 作为传输层协议是 HTTP/3 与 HTTP/2 最大的区别。由于 QUIC 原生实现了大量与流管理相关的特性，这些特性是 HTTP/2 规范的组成部分，因此可以从 HTTP/3 中删除它们。此外，由于 HTTP/2 HPACK 报头压缩严重依赖于 TCP 向端点传递包的顺序，所以需要采用 QUIC 来创建新的 HTTP 报头压缩方案，即 QPACK 。  \n\n最近几年来，谷歌一直在使用QUIC 提供自己的服务，包括搜索、YouTube 等，而且在Chrome 中也支持它。曾经有一段时间，在与支持QUIC 的谷歌服务通信时，Chrome 是唯一的手段。最近， Mozilla 在 Firefox 72 中也增加了对 HTTP/3 的支持，尽管仍处于试验阶段。命令行工具 curl 在 7.66.0 版本中也增加了对 HTTP/3 的支持以及许多其他特性。在服务器端， LightSpeed 和 Nginx 支持 HTTP/3。  \n\n在云方面，除了谷歌之外，Cloudflare 几个月前宣布已经为部分客户启用了对HTTP/3 的初步支持。Cloudflare 也是 Quiche 背后的公司，Quiche 是一个支持 HTTP/3 客户端和服务器实现的开源 Rust 库。  \n\n如前所述，HTTP/3 仍然正在由 IETF 进行定义，还没有确定正式的发布日期。与此同时，在世界范围内，HTTP/3 的使用正在增长，全世界使用它的服务接近 300,000 个。谷歌仍然是部署 HTTP/3 的最重要组织，但是其他几个组织也占据了重要的份额。InfoQ 将继续及时报道 HTTP/3，让我们的读者了解互联网的最新变革。  \n\n\n#### 参考文献\n[InfoQ 原文](https://www.infoq.cn/article/D2QIvuLXXW9RiIR8wWMW)","source":"_drafts/HTTP-3现状.md","raw":"---\ntitle: HTTP/3现状\ntags: [HTTP/3,HTTP]\n---\n\nHTTP/3 是下一代跨 Web 的网络通信协议，这意味着它会部分取代 HTTP/1 和 HTTP/2。离 2 月在苏黎世召开的下一届 QUIC 工作组会议还有一个月的时间，回顾一下 HTTP/3 的承诺和当前客户端 / 服务器的支持情况可能会非常有助益。   \n\n<!-- more -->\n\n#### HTTP/3 更快的连接速度 \n\nHTTP/3 承诺让互联网连接更快、更稳定和更安全。它的前身为“HTTP over QUIC”，其目标是让 HTTP 在谷歌自己的传输层协议 QUIC 上运行，随后，它被提议为IETF ，目前它是 Internet 草案。在 2018 年 10 月，IETF HTTP & QUIC 工作组联席主席 Mark Nottingham提议将 HTTP over QUIC 重命名为 HTTP/3 ，以澄清其本质特点以及与 QUIC 的独立性。  \n  \nQUIC 是 HTTP/3 的关键元素，因为它是主要特性的基础。QUIC 构建在 UDP 之上，致力于解决使用 TCP 协议的主要问题，比如，连接建立的延迟以及在包丢失的情况下多个流的处理。TCP 延迟问题源于其拥塞控制算法的需求，该算法要求在拥塞发生之前会缓慢地开始（slow start）评估可以发送多少流量。在 HTTP/1.0 中，每个 TCP 请求 / 响应交换都会被分配一个新的连接，因此会导致启动缓慢的问题。  \n\n从此之后，规避 TCP 启动慢的尝试一直是 HTTP 协议改善的核心。  \n\nHTTP/1.1 引入了“keep-alive”连接，允许在同一个 TCP 连接上对多个请求 - 响应交换进行序列化，因此不需要为每个请求都设置新的连接建立阶段。然而，HTTP/1.1 的 keep-alive 连接不支持同时发送多个请求，随着 Web 页面日益复杂，这导致了新的瓶颈。  \n\nHTTP/2 则源自现在已被弃用的 SPDY 协议，它引入了在同一连接中嵌入第一等流的概念。这使得在保证多路复用的同时实现请求- 响应交换成为可能，但是它有一个主要的缺陷：当包丢失增加时， HTTP/2 的性能会由于 TCP 处理包重传的方式（HOL 阻塞）而下降。这种影响可能非常严重，因为所有流都共享相同的连接。当数据包丢失超过一个给定的阈值时，HTTP/1 的多连接甚至会比 HTTP/2 运行地更高效。  \n\n如前文所述，QUIC 提供了对流的第一等支持，这解决了 HTTP/2 中连接初始化缓慢的问题。另外，它可以对它们进行单独处理，从而解决了由于包丢失而导致的性能问题。采用 QUIC 作为传输层协议是 HTTP/3 与 HTTP/2 最大的区别。由于 QUIC 原生实现了大量与流管理相关的特性，这些特性是 HTTP/2 规范的组成部分，因此可以从 HTTP/3 中删除它们。此外，由于 HTTP/2 HPACK 报头压缩严重依赖于 TCP 向端点传递包的顺序，所以需要采用 QUIC 来创建新的 HTTP 报头压缩方案，即 QPACK 。  \n\n最近几年来，谷歌一直在使用QUIC 提供自己的服务，包括搜索、YouTube 等，而且在Chrome 中也支持它。曾经有一段时间，在与支持QUIC 的谷歌服务通信时，Chrome 是唯一的手段。最近， Mozilla 在 Firefox 72 中也增加了对 HTTP/3 的支持，尽管仍处于试验阶段。命令行工具 curl 在 7.66.0 版本中也增加了对 HTTP/3 的支持以及许多其他特性。在服务器端， LightSpeed 和 Nginx 支持 HTTP/3。  \n\n在云方面，除了谷歌之外，Cloudflare 几个月前宣布已经为部分客户启用了对HTTP/3 的初步支持。Cloudflare 也是 Quiche 背后的公司，Quiche 是一个支持 HTTP/3 客户端和服务器实现的开源 Rust 库。  \n\n如前所述，HTTP/3 仍然正在由 IETF 进行定义，还没有确定正式的发布日期。与此同时，在世界范围内，HTTP/3 的使用正在增长，全世界使用它的服务接近 300,000 个。谷歌仍然是部署 HTTP/3 的最重要组织，但是其他几个组织也占据了重要的份额。InfoQ 将继续及时报道 HTTP/3，让我们的读者了解互联网的最新变革。  \n\n\n#### 参考文献\n[InfoQ 原文](https://www.infoq.cn/article/D2QIvuLXXW9RiIR8wWMW)","slug":"HTTP-3现状","published":0,"date":"2020-04-05T16:25:08.476Z","updated":"2020-04-05T16:29:50.417Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck8nz89io0000qcnc61txcmxy","content":"<p>HTTP/3 是下一代跨 Web 的网络通信协议，这意味着它会部分取代 HTTP/1 和 HTTP/2。离 2 月在苏黎世召开的下一届 QUIC 工作组会议还有一个月的时间，回顾一下 HTTP/3 的承诺和当前客户端 / 服务器的支持情况可能会非常有助益。   </p>\n<a id=\"more\"></a>\n\n<h4 id=\"HTTP-3-更快的连接速度\"><a href=\"#HTTP-3-更快的连接速度\" class=\"headerlink\" title=\"HTTP/3 更快的连接速度\"></a>HTTP/3 更快的连接速度</h4><p>HTTP/3 承诺让互联网连接更快、更稳定和更安全。它的前身为“HTTP over QUIC”，其目标是让 HTTP 在谷歌自己的传输层协议 QUIC 上运行，随后，它被提议为IETF ，目前它是 Internet 草案。在 2018 年 10 月，IETF HTTP &amp; QUIC 工作组联席主席 Mark Nottingham提议将 HTTP over QUIC 重命名为 HTTP/3 ，以澄清其本质特点以及与 QUIC 的独立性。  </p>\n<p>QUIC 是 HTTP/3 的关键元素，因为它是主要特性的基础。QUIC 构建在 UDP 之上，致力于解决使用 TCP 协议的主要问题，比如，连接建立的延迟以及在包丢失的情况下多个流的处理。TCP 延迟问题源于其拥塞控制算法的需求，该算法要求在拥塞发生之前会缓慢地开始（slow start）评估可以发送多少流量。在 HTTP/1.0 中，每个 TCP 请求 / 响应交换都会被分配一个新的连接，因此会导致启动缓慢的问题。  </p>\n<p>从此之后，规避 TCP 启动慢的尝试一直是 HTTP 协议改善的核心。  </p>\n<p>HTTP/1.1 引入了“keep-alive”连接，允许在同一个 TCP 连接上对多个请求 - 响应交换进行序列化，因此不需要为每个请求都设置新的连接建立阶段。然而，HTTP/1.1 的 keep-alive 连接不支持同时发送多个请求，随着 Web 页面日益复杂，这导致了新的瓶颈。  </p>\n<p>HTTP/2 则源自现在已被弃用的 SPDY 协议，它引入了在同一连接中嵌入第一等流的概念。这使得在保证多路复用的同时实现请求- 响应交换成为可能，但是它有一个主要的缺陷：当包丢失增加时， HTTP/2 的性能会由于 TCP 处理包重传的方式（HOL 阻塞）而下降。这种影响可能非常严重，因为所有流都共享相同的连接。当数据包丢失超过一个给定的阈值时，HTTP/1 的多连接甚至会比 HTTP/2 运行地更高效。  </p>\n<p>如前文所述，QUIC 提供了对流的第一等支持，这解决了 HTTP/2 中连接初始化缓慢的问题。另外，它可以对它们进行单独处理，从而解决了由于包丢失而导致的性能问题。采用 QUIC 作为传输层协议是 HTTP/3 与 HTTP/2 最大的区别。由于 QUIC 原生实现了大量与流管理相关的特性，这些特性是 HTTP/2 规范的组成部分，因此可以从 HTTP/3 中删除它们。此外，由于 HTTP/2 HPACK 报头压缩严重依赖于 TCP 向端点传递包的顺序，所以需要采用 QUIC 来创建新的 HTTP 报头压缩方案，即 QPACK 。  </p>\n<p>最近几年来，谷歌一直在使用QUIC 提供自己的服务，包括搜索、YouTube 等，而且在Chrome 中也支持它。曾经有一段时间，在与支持QUIC 的谷歌服务通信时，Chrome 是唯一的手段。最近， Mozilla 在 Firefox 72 中也增加了对 HTTP/3 的支持，尽管仍处于试验阶段。命令行工具 curl 在 7.66.0 版本中也增加了对 HTTP/3 的支持以及许多其他特性。在服务器端， LightSpeed 和 Nginx 支持 HTTP/3。  </p>\n<p>在云方面，除了谷歌之外，Cloudflare 几个月前宣布已经为部分客户启用了对HTTP/3 的初步支持。Cloudflare 也是 Quiche 背后的公司，Quiche 是一个支持 HTTP/3 客户端和服务器实现的开源 Rust 库。  </p>\n<p>如前所述，HTTP/3 仍然正在由 IETF 进行定义，还没有确定正式的发布日期。与此同时，在世界范围内，HTTP/3 的使用正在增长，全世界使用它的服务接近 300,000 个。谷歌仍然是部署 HTTP/3 的最重要组织，但是其他几个组织也占据了重要的份额。InfoQ 将继续及时报道 HTTP/3，让我们的读者了解互联网的最新变革。  </p>\n<h4 id=\"参考文献\"><a href=\"#参考文献\" class=\"headerlink\" title=\"参考文献\"></a>参考文献</h4><p><a href=\"https://www.infoq.cn/article/D2QIvuLXXW9RiIR8wWMW\" target=\"_blank\" rel=\"noopener\">InfoQ 原文</a></p>\n","site":{"data":{}},"length":1606,"excerpt":"<p>HTTP/3 是下一代跨 Web 的网络通信协议，这意味着它会部分取代 HTTP/1 和 HTTP/2。离 2 月在苏黎世召开的下一届 QUIC 工作组会议还有一个月的时间，回顾一下 HTTP/3 的承诺和当前客户端 / 服务器的支持情况可能会非常有助益。   </p>","more":"<h4 id=\"HTTP-3-更快的连接速度\"><a href=\"#HTTP-3-更快的连接速度\" class=\"headerlink\" title=\"HTTP/3 更快的连接速度\"></a>HTTP/3 更快的连接速度</h4><p>HTTP/3 承诺让互联网连接更快、更稳定和更安全。它的前身为“HTTP over QUIC”，其目标是让 HTTP 在谷歌自己的传输层协议 QUIC 上运行，随后，它被提议为IETF ，目前它是 Internet 草案。在 2018 年 10 月，IETF HTTP &amp; QUIC 工作组联席主席 Mark Nottingham提议将 HTTP over QUIC 重命名为 HTTP/3 ，以澄清其本质特点以及与 QUIC 的独立性。  </p>\n<p>QUIC 是 HTTP/3 的关键元素，因为它是主要特性的基础。QUIC 构建在 UDP 之上，致力于解决使用 TCP 协议的主要问题，比如，连接建立的延迟以及在包丢失的情况下多个流的处理。TCP 延迟问题源于其拥塞控制算法的需求，该算法要求在拥塞发生之前会缓慢地开始（slow start）评估可以发送多少流量。在 HTTP/1.0 中，每个 TCP 请求 / 响应交换都会被分配一个新的连接，因此会导致启动缓慢的问题。  </p>\n<p>从此之后，规避 TCP 启动慢的尝试一直是 HTTP 协议改善的核心。  </p>\n<p>HTTP/1.1 引入了“keep-alive”连接，允许在同一个 TCP 连接上对多个请求 - 响应交换进行序列化，因此不需要为每个请求都设置新的连接建立阶段。然而，HTTP/1.1 的 keep-alive 连接不支持同时发送多个请求，随着 Web 页面日益复杂，这导致了新的瓶颈。  </p>\n<p>HTTP/2 则源自现在已被弃用的 SPDY 协议，它引入了在同一连接中嵌入第一等流的概念。这使得在保证多路复用的同时实现请求- 响应交换成为可能，但是它有一个主要的缺陷：当包丢失增加时， HTTP/2 的性能会由于 TCP 处理包重传的方式（HOL 阻塞）而下降。这种影响可能非常严重，因为所有流都共享相同的连接。当数据包丢失超过一个给定的阈值时，HTTP/1 的多连接甚至会比 HTTP/2 运行地更高效。  </p>\n<p>如前文所述，QUIC 提供了对流的第一等支持，这解决了 HTTP/2 中连接初始化缓慢的问题。另外，它可以对它们进行单独处理，从而解决了由于包丢失而导致的性能问题。采用 QUIC 作为传输层协议是 HTTP/3 与 HTTP/2 最大的区别。由于 QUIC 原生实现了大量与流管理相关的特性，这些特性是 HTTP/2 规范的组成部分，因此可以从 HTTP/3 中删除它们。此外，由于 HTTP/2 HPACK 报头压缩严重依赖于 TCP 向端点传递包的顺序，所以需要采用 QUIC 来创建新的 HTTP 报头压缩方案，即 QPACK 。  </p>\n<p>最近几年来，谷歌一直在使用QUIC 提供自己的服务，包括搜索、YouTube 等，而且在Chrome 中也支持它。曾经有一段时间，在与支持QUIC 的谷歌服务通信时，Chrome 是唯一的手段。最近， Mozilla 在 Firefox 72 中也增加了对 HTTP/3 的支持，尽管仍处于试验阶段。命令行工具 curl 在 7.66.0 版本中也增加了对 HTTP/3 的支持以及许多其他特性。在服务器端， LightSpeed 和 Nginx 支持 HTTP/3。  </p>\n<p>在云方面，除了谷歌之外，Cloudflare 几个月前宣布已经为部分客户启用了对HTTP/3 的初步支持。Cloudflare 也是 Quiche 背后的公司，Quiche 是一个支持 HTTP/3 客户端和服务器实现的开源 Rust 库。  </p>\n<p>如前所述，HTTP/3 仍然正在由 IETF 进行定义，还没有确定正式的发布日期。与此同时，在世界范围内，HTTP/3 的使用正在增长，全世界使用它的服务接近 300,000 个。谷歌仍然是部署 HTTP/3 的最重要组织，但是其他几个组织也占据了重要的份额。InfoQ 将继续及时报道 HTTP/3，让我们的读者了解互联网的最新变革。  </p>\n<h4 id=\"参考文献\"><a href=\"#参考文献\" class=\"headerlink\" title=\"参考文献\"></a>参考文献</h4><p><a href=\"https://www.infoq.cn/article/D2QIvuLXXW9RiIR8wWMW\" target=\"_blank\" rel=\"noopener\">InfoQ 原文</a></p>"},{"title":"Javascript是如何执行一段代码的","date":"2020-03-26T04:25:06.000Z","_content":"\n#### 介绍下 Javascript\n\n#### 编译\n\n#### 执行\n\n#### 函数执行上下文\n\n#### 子函数\n\n#### 闭包\n","source":"_posts/Javascript是如何执行一段代码的.md","raw":"---\ntitle: Javascript是如何执行一段代码的\ndate: 2020-03-26 12:25:06\ntags:\n---\n\n#### 介绍下 Javascript\n\n#### 编译\n\n#### 执行\n\n#### 函数执行上下文\n\n#### 子函数\n\n#### 闭包\n","slug":"Javascript是如何执行一段代码的","published":1,"updated":"2020-04-04T04:01:52.359Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck8nz89j00001qcnchk718c3a","content":"<h4 id=\"介绍下-Javascript\"><a href=\"#介绍下-Javascript\" class=\"headerlink\" title=\"介绍下 Javascript\"></a>介绍下 Javascript</h4><h4 id=\"编译\"><a href=\"#编译\" class=\"headerlink\" title=\"编译\"></a>编译</h4><h4 id=\"执行\"><a href=\"#执行\" class=\"headerlink\" title=\"执行\"></a>执行</h4><h4 id=\"函数执行上下文\"><a href=\"#函数执行上下文\" class=\"headerlink\" title=\"函数执行上下文\"></a>函数执行上下文</h4><h4 id=\"子函数\"><a href=\"#子函数\" class=\"headerlink\" title=\"子函数\"></a>子函数</h4><h4 id=\"闭包\"><a href=\"#闭包\" class=\"headerlink\" title=\"闭包\"></a>闭包</h4>","site":{"data":{}},"length":29,"excerpt":"","more":"<h4 id=\"介绍下-Javascript\"><a href=\"#介绍下-Javascript\" class=\"headerlink\" title=\"介绍下 Javascript\"></a>介绍下 Javascript</h4><h4 id=\"编译\"><a href=\"#编译\" class=\"headerlink\" title=\"编译\"></a>编译</h4><h4 id=\"执行\"><a href=\"#执行\" class=\"headerlink\" title=\"执行\"></a>执行</h4><h4 id=\"函数执行上下文\"><a href=\"#函数执行上下文\" class=\"headerlink\" title=\"函数执行上下文\"></a>函数执行上下文</h4><h4 id=\"子函数\"><a href=\"#子函数\" class=\"headerlink\" title=\"子函数\"></a>子函数</h4><h4 id=\"闭包\"><a href=\"#闭包\" class=\"headerlink\" title=\"闭包\"></a>闭包</h4>"},{"title":"NPM@7 将支持 Mnorepo 特性","date":"2019-08-04T12:48:28.000Z","_content":"\n\n从架构的角度来看, 将大型单体代码库拆分为较小的、独立封装的一系列模块通常是个好方法。从微服务到可复用组件库, 很多技术都很适合模块化。但从版本发布和源代码管理的角度来看, 它也可能是一场噩梦。\n\n<!-- more -->\n\n#### NPM 存在的问题\n\n当项目有数十乃至数百个代码存储库时, 发现工作也变得愈加困难。每当创建一个新的存储库, 所有人必须将其添加到自己的代码模块中。\n\n访问控制成了单调乏味的工作, 且容易出错, 尤其是得在\"需要了解\"的基础上一次一个地授予存储库访问权限, 实在令人头疼。新员工经常要经历无止境的依赖项地狱。每个访问请求都会引出它们需要访问的另外两个存储库来。\n\n高度模块化的架构也使版本控制变复杂了。我们可以让一系列相关模块的版本同步更新, 给它们做\"快照\"（例如 Babel 和 React 就是这么做的）。但要让人们为那么多的包做这种工作（还包括和他们没什么关系的包）就是在自找麻烦。\n\n包之间的依赖项重复会大大增加安装依赖项所需的时间。一些生态系统（特别是 npm）是高度模块化的。模块化会鼓励复用, 但也意味着某些包可能在你开发的每个包里都复制了一份。\n\n\n\n#### 解决方案\n\nMonorepo 是针对这个问题的流行解决方案。它意味着你会将所有模块放在同一个代码存储库中, 而不是每个模块配一个代码存储库。然后开发者在开发应用时只用这个\"monorepo\"就够了。由于所需的内容都放在了一起, 发现、访问控制和版本控制工作都变得更加简单  \n\n显然, 代价就是你只能对所有代码做整体权限控制。但如果你能接受这一点, monorepo 就能在兼顾模块化所有优势的前提下提供非常简单的源代码管理方法  \n\n那么 monorepo 怎样搭配 npm 使用呢？最受欢迎的两大解决方案分别是 Yarn workspaces 和 lerna  \n\n\n#### 使用 lerna 实现 monorepo  \n\n首先我们全局安装 lerna  \n\n```\nnpm install-g lerna\n```\n\n接下来, 我们需要创建新的 lerna 存储库：\n\n```\nmkdir monorepo_example  \ncdmonorepo_example  \nlerna init  \n```\n\n查看 lerna.json 可以看到版本和包的定义位置  \n\n```\ncat lerna.json\n\n{\n  \"packages\": [\n    \"packages/*\"\n  ],\n  \"version\": \"0.0.0\"\n}\n```\n\n如上所示, 我们的 monorepo 中所有包的版本都是 0.0.0。但是我们的 monorepo 中还没有任何包。在我们添加包之前应该先登录到我们的存储库, 以便 lerna 在每个新包上正确设置 publishConfig  \n\n如果你要发布在公共 npm 存储库之外的位置上（例如 Verdaccio）, 则首先需要设置你的存储库    \n\n```\n$npm config set registry https://registry.npm.yourcompany.com  \n```\n\n接下来, 我们用具有发布权限的用户登录到存储库中。如果你的包没有作用域, 则可以省略 -scope 标志  \n\n```\n$npm login -scope test\n```\n\n现在为我们的 monorepo 添加一些定域包（scoped package）\n\n```\nlerna create @test/ a\nlerna create @test/ b\nlerna create @test/ c\n```\n\n如果你为每个包选择了默认设置, 那么现在测试域内会有三个包（a、b、c）, 版本为 0.0.0。在更新版本之前, 我们需要提交已完成的工作的并为 git 创建一个远程连接：  \n\n```\ngit add\ngit commit -m \"Initial commit\"\ngit remote add origin git@github.com:username/reponame.git\ngit push -u origin master\n```\n\n现在我们可以使用一个命令来更新所有包的版本  \n\n```\nlerna version major\n```\n\n此命令不仅会将每个包都更新到 1.0.0, 还会为你推送版本更新到 git。最后一步是将这些包发布到 npm。Lerna 用一个命令就能完成这个任务  \n\n```\n$ lerna publish from-git\n```\n\n这条命令成功运行后, 你就成功将第一个 monorepo 中的所有包都发布到 npm 了  \n\n\n#### 总结一下\n\n用 Lerna 创建一个新的 monorepo   \n\n为我们的 monorepo 添加了三个新的定域包  \n\n更新了所有包的版本并使用一条命令提交给了 git  \n\n使用一条命令将所有包发布到了 npm 存储库   \n\n有关 Lerna 的更多信息, 包括解决重复问题的方案, 建议查阅他们提供优秀的 文档   \n\n\n#### 未来计划\n\n我们也很高兴地宣布, 我们计划为 npm@7 带来一流的 monorepo 支持。如果你在搭配 monorepo 使用 npm, 我们需要你的反馈！请告诉我们你对目前的 monorepo 解决方案的看法。","source":"_posts/NPM@7 将支持 Mnorepo 特性.md","raw":"---\ntitle: NPM@7 将支持 Mnorepo 特性\ndate: 2019-08-04 20:48:28\ntags: [NPM, menorepo]\ncategories: news\n---\n\n\n从架构的角度来看, 将大型单体代码库拆分为较小的、独立封装的一系列模块通常是个好方法。从微服务到可复用组件库, 很多技术都很适合模块化。但从版本发布和源代码管理的角度来看, 它也可能是一场噩梦。\n\n<!-- more -->\n\n#### NPM 存在的问题\n\n当项目有数十乃至数百个代码存储库时, 发现工作也变得愈加困难。每当创建一个新的存储库, 所有人必须将其添加到自己的代码模块中。\n\n访问控制成了单调乏味的工作, 且容易出错, 尤其是得在\"需要了解\"的基础上一次一个地授予存储库访问权限, 实在令人头疼。新员工经常要经历无止境的依赖项地狱。每个访问请求都会引出它们需要访问的另外两个存储库来。\n\n高度模块化的架构也使版本控制变复杂了。我们可以让一系列相关模块的版本同步更新, 给它们做\"快照\"（例如 Babel 和 React 就是这么做的）。但要让人们为那么多的包做这种工作（还包括和他们没什么关系的包）就是在自找麻烦。\n\n包之间的依赖项重复会大大增加安装依赖项所需的时间。一些生态系统（特别是 npm）是高度模块化的。模块化会鼓励复用, 但也意味着某些包可能在你开发的每个包里都复制了一份。\n\n\n\n#### 解决方案\n\nMonorepo 是针对这个问题的流行解决方案。它意味着你会将所有模块放在同一个代码存储库中, 而不是每个模块配一个代码存储库。然后开发者在开发应用时只用这个\"monorepo\"就够了。由于所需的内容都放在了一起, 发现、访问控制和版本控制工作都变得更加简单  \n\n显然, 代价就是你只能对所有代码做整体权限控制。但如果你能接受这一点, monorepo 就能在兼顾模块化所有优势的前提下提供非常简单的源代码管理方法  \n\n那么 monorepo 怎样搭配 npm 使用呢？最受欢迎的两大解决方案分别是 Yarn workspaces 和 lerna  \n\n\n#### 使用 lerna 实现 monorepo  \n\n首先我们全局安装 lerna  \n\n```\nnpm install-g lerna\n```\n\n接下来, 我们需要创建新的 lerna 存储库：\n\n```\nmkdir monorepo_example  \ncdmonorepo_example  \nlerna init  \n```\n\n查看 lerna.json 可以看到版本和包的定义位置  \n\n```\ncat lerna.json\n\n{\n  \"packages\": [\n    \"packages/*\"\n  ],\n  \"version\": \"0.0.0\"\n}\n```\n\n如上所示, 我们的 monorepo 中所有包的版本都是 0.0.0。但是我们的 monorepo 中还没有任何包。在我们添加包之前应该先登录到我们的存储库, 以便 lerna 在每个新包上正确设置 publishConfig  \n\n如果你要发布在公共 npm 存储库之外的位置上（例如 Verdaccio）, 则首先需要设置你的存储库    \n\n```\n$npm config set registry https://registry.npm.yourcompany.com  \n```\n\n接下来, 我们用具有发布权限的用户登录到存储库中。如果你的包没有作用域, 则可以省略 -scope 标志  \n\n```\n$npm login -scope test\n```\n\n现在为我们的 monorepo 添加一些定域包（scoped package）\n\n```\nlerna create @test/ a\nlerna create @test/ b\nlerna create @test/ c\n```\n\n如果你为每个包选择了默认设置, 那么现在测试域内会有三个包（a、b、c）, 版本为 0.0.0。在更新版本之前, 我们需要提交已完成的工作的并为 git 创建一个远程连接：  \n\n```\ngit add\ngit commit -m \"Initial commit\"\ngit remote add origin git@github.com:username/reponame.git\ngit push -u origin master\n```\n\n现在我们可以使用一个命令来更新所有包的版本  \n\n```\nlerna version major\n```\n\n此命令不仅会将每个包都更新到 1.0.0, 还会为你推送版本更新到 git。最后一步是将这些包发布到 npm。Lerna 用一个命令就能完成这个任务  \n\n```\n$ lerna publish from-git\n```\n\n这条命令成功运行后, 你就成功将第一个 monorepo 中的所有包都发布到 npm 了  \n\n\n#### 总结一下\n\n用 Lerna 创建一个新的 monorepo   \n\n为我们的 monorepo 添加了三个新的定域包  \n\n更新了所有包的版本并使用一条命令提交给了 git  \n\n使用一条命令将所有包发布到了 npm 存储库   \n\n有关 Lerna 的更多信息, 包括解决重复问题的方案, 建议查阅他们提供优秀的 文档   \n\n\n#### 未来计划\n\n我们也很高兴地宣布, 我们计划为 npm@7 带来一流的 monorepo 支持。如果你在搭配 monorepo 使用 npm, 我们需要你的反馈！请告诉我们你对目前的 monorepo 解决方案的看法。","slug":"NPM@7 将支持 Mnorepo 特性","published":1,"updated":"2020-04-04T15:06:38.629Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck8nz89j70003qcnc1kkr950o","content":"<p>从架构的角度来看, 将大型单体代码库拆分为较小的、独立封装的一系列模块通常是个好方法。从微服务到可复用组件库, 很多技术都很适合模块化。但从版本发布和源代码管理的角度来看, 它也可能是一场噩梦。</p>\n<a id=\"more\"></a>\n\n<h4 id=\"NPM-存在的问题\"><a href=\"#NPM-存在的问题\" class=\"headerlink\" title=\"NPM 存在的问题\"></a>NPM 存在的问题</h4><p>当项目有数十乃至数百个代码存储库时, 发现工作也变得愈加困难。每当创建一个新的存储库, 所有人必须将其添加到自己的代码模块中。</p>\n<p>访问控制成了单调乏味的工作, 且容易出错, 尤其是得在”需要了解”的基础上一次一个地授予存储库访问权限, 实在令人头疼。新员工经常要经历无止境的依赖项地狱。每个访问请求都会引出它们需要访问的另外两个存储库来。</p>\n<p>高度模块化的架构也使版本控制变复杂了。我们可以让一系列相关模块的版本同步更新, 给它们做”快照”（例如 Babel 和 React 就是这么做的）。但要让人们为那么多的包做这种工作（还包括和他们没什么关系的包）就是在自找麻烦。</p>\n<p>包之间的依赖项重复会大大增加安装依赖项所需的时间。一些生态系统（特别是 npm）是高度模块化的。模块化会鼓励复用, 但也意味着某些包可能在你开发的每个包里都复制了一份。</p>\n<h4 id=\"解决方案\"><a href=\"#解决方案\" class=\"headerlink\" title=\"解决方案\"></a>解决方案</h4><p>Monorepo 是针对这个问题的流行解决方案。它意味着你会将所有模块放在同一个代码存储库中, 而不是每个模块配一个代码存储库。然后开发者在开发应用时只用这个”monorepo”就够了。由于所需的内容都放在了一起, 发现、访问控制和版本控制工作都变得更加简单  </p>\n<p>显然, 代价就是你只能对所有代码做整体权限控制。但如果你能接受这一点, monorepo 就能在兼顾模块化所有优势的前提下提供非常简单的源代码管理方法  </p>\n<p>那么 monorepo 怎样搭配 npm 使用呢？最受欢迎的两大解决方案分别是 Yarn workspaces 和 lerna  </p>\n<h4 id=\"使用-lerna-实现-monorepo\"><a href=\"#使用-lerna-实现-monorepo\" class=\"headerlink\" title=\"使用 lerna 实现 monorepo\"></a>使用 lerna 实现 monorepo</h4><p>首先我们全局安装 lerna  </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install-g lerna</span><br></pre></td></tr></table></figure>\n\n<p>接下来, 我们需要创建新的 lerna 存储库：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkdir monorepo_example  </span><br><span class=\"line\">cdmonorepo_example  </span><br><span class=\"line\">lerna init</span><br></pre></td></tr></table></figure>\n\n<p>查看 lerna.json 可以看到版本和包的定义位置  </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cat lerna.json</span><br><span class=\"line\"></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  &quot;packages&quot;: [</span><br><span class=\"line\">    &quot;packages&#x2F;*&quot;</span><br><span class=\"line\">  ],</span><br><span class=\"line\">  &quot;version&quot;: &quot;0.0.0&quot;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>如上所示, 我们的 monorepo 中所有包的版本都是 0.0.0。但是我们的 monorepo 中还没有任何包。在我们添加包之前应该先登录到我们的存储库, 以便 lerna 在每个新包上正确设置 publishConfig  </p>\n<p>如果你要发布在公共 npm 存储库之外的位置上（例如 Verdaccio）, 则首先需要设置你的存储库    </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$npm config set registry https:&#x2F;&#x2F;registry.npm.yourcompany.com</span><br></pre></td></tr></table></figure>\n\n<p>接下来, 我们用具有发布权限的用户登录到存储库中。如果你的包没有作用域, 则可以省略 -scope 标志  </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$npm login -scope test</span><br></pre></td></tr></table></figure>\n\n<p>现在为我们的 monorepo 添加一些定域包（scoped package）</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">lerna create @test&#x2F; a</span><br><span class=\"line\">lerna create @test&#x2F; b</span><br><span class=\"line\">lerna create @test&#x2F; c</span><br></pre></td></tr></table></figure>\n\n<p>如果你为每个包选择了默认设置, 那么现在测试域内会有三个包（a、b、c）, 版本为 0.0.0。在更新版本之前, 我们需要提交已完成的工作的并为 git 创建一个远程连接：  </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git add</span><br><span class=\"line\">git commit -m &quot;Initial commit&quot;</span><br><span class=\"line\">git remote add origin git@github.com:username&#x2F;reponame.git</span><br><span class=\"line\">git push -u origin master</span><br></pre></td></tr></table></figure>\n\n<p>现在我们可以使用一个命令来更新所有包的版本  </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">lerna version major</span><br></pre></td></tr></table></figure>\n\n<p>此命令不仅会将每个包都更新到 1.0.0, 还会为你推送版本更新到 git。最后一步是将这些包发布到 npm。Lerna 用一个命令就能完成这个任务  </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ lerna publish from-git</span><br></pre></td></tr></table></figure>\n\n<p>这条命令成功运行后, 你就成功将第一个 monorepo 中的所有包都发布到 npm 了  </p>\n<h4 id=\"总结一下\"><a href=\"#总结一下\" class=\"headerlink\" title=\"总结一下\"></a>总结一下</h4><p>用 Lerna 创建一个新的 monorepo   </p>\n<p>为我们的 monorepo 添加了三个新的定域包  </p>\n<p>更新了所有包的版本并使用一条命令提交给了 git  </p>\n<p>使用一条命令将所有包发布到了 npm 存储库   </p>\n<p>有关 Lerna 的更多信息, 包括解决重复问题的方案, 建议查阅他们提供优秀的 文档   </p>\n<h4 id=\"未来计划\"><a href=\"#未来计划\" class=\"headerlink\" title=\"未来计划\"></a>未来计划</h4><p>我们也很高兴地宣布, 我们计划为 npm@7 带来一流的 monorepo 支持。如果你在搭配 monorepo 使用 npm, 我们需要你的反馈！请告诉我们你对目前的 monorepo 解决方案的看法。</p>\n","site":{"data":{}},"length":1968,"excerpt":"<p>从架构的角度来看, 将大型单体代码库拆分为较小的、独立封装的一系列模块通常是个好方法。从微服务到可复用组件库, 很多技术都很适合模块化。但从版本发布和源代码管理的角度来看, 它也可能是一场噩梦。</p>","more":"<h4 id=\"NPM-存在的问题\"><a href=\"#NPM-存在的问题\" class=\"headerlink\" title=\"NPM 存在的问题\"></a>NPM 存在的问题</h4><p>当项目有数十乃至数百个代码存储库时, 发现工作也变得愈加困难。每当创建一个新的存储库, 所有人必须将其添加到自己的代码模块中。</p>\n<p>访问控制成了单调乏味的工作, 且容易出错, 尤其是得在”需要了解”的基础上一次一个地授予存储库访问权限, 实在令人头疼。新员工经常要经历无止境的依赖项地狱。每个访问请求都会引出它们需要访问的另外两个存储库来。</p>\n<p>高度模块化的架构也使版本控制变复杂了。我们可以让一系列相关模块的版本同步更新, 给它们做”快照”（例如 Babel 和 React 就是这么做的）。但要让人们为那么多的包做这种工作（还包括和他们没什么关系的包）就是在自找麻烦。</p>\n<p>包之间的依赖项重复会大大增加安装依赖项所需的时间。一些生态系统（特别是 npm）是高度模块化的。模块化会鼓励复用, 但也意味着某些包可能在你开发的每个包里都复制了一份。</p>\n<h4 id=\"解决方案\"><a href=\"#解决方案\" class=\"headerlink\" title=\"解决方案\"></a>解决方案</h4><p>Monorepo 是针对这个问题的流行解决方案。它意味着你会将所有模块放在同一个代码存储库中, 而不是每个模块配一个代码存储库。然后开发者在开发应用时只用这个”monorepo”就够了。由于所需的内容都放在了一起, 发现、访问控制和版本控制工作都变得更加简单  </p>\n<p>显然, 代价就是你只能对所有代码做整体权限控制。但如果你能接受这一点, monorepo 就能在兼顾模块化所有优势的前提下提供非常简单的源代码管理方法  </p>\n<p>那么 monorepo 怎样搭配 npm 使用呢？最受欢迎的两大解决方案分别是 Yarn workspaces 和 lerna  </p>\n<h4 id=\"使用-lerna-实现-monorepo\"><a href=\"#使用-lerna-实现-monorepo\" class=\"headerlink\" title=\"使用 lerna 实现 monorepo\"></a>使用 lerna 实现 monorepo</h4><p>首先我们全局安装 lerna  </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install-g lerna</span><br></pre></td></tr></table></figure>\n\n<p>接下来, 我们需要创建新的 lerna 存储库：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkdir monorepo_example  </span><br><span class=\"line\">cdmonorepo_example  </span><br><span class=\"line\">lerna init</span><br></pre></td></tr></table></figure>\n\n<p>查看 lerna.json 可以看到版本和包的定义位置  </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cat lerna.json</span><br><span class=\"line\"></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  &quot;packages&quot;: [</span><br><span class=\"line\">    &quot;packages&#x2F;*&quot;</span><br><span class=\"line\">  ],</span><br><span class=\"line\">  &quot;version&quot;: &quot;0.0.0&quot;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>如上所示, 我们的 monorepo 中所有包的版本都是 0.0.0。但是我们的 monorepo 中还没有任何包。在我们添加包之前应该先登录到我们的存储库, 以便 lerna 在每个新包上正确设置 publishConfig  </p>\n<p>如果你要发布在公共 npm 存储库之外的位置上（例如 Verdaccio）, 则首先需要设置你的存储库    </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$npm config set registry https:&#x2F;&#x2F;registry.npm.yourcompany.com</span><br></pre></td></tr></table></figure>\n\n<p>接下来, 我们用具有发布权限的用户登录到存储库中。如果你的包没有作用域, 则可以省略 -scope 标志  </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$npm login -scope test</span><br></pre></td></tr></table></figure>\n\n<p>现在为我们的 monorepo 添加一些定域包（scoped package）</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">lerna create @test&#x2F; a</span><br><span class=\"line\">lerna create @test&#x2F; b</span><br><span class=\"line\">lerna create @test&#x2F; c</span><br></pre></td></tr></table></figure>\n\n<p>如果你为每个包选择了默认设置, 那么现在测试域内会有三个包（a、b、c）, 版本为 0.0.0。在更新版本之前, 我们需要提交已完成的工作的并为 git 创建一个远程连接：  </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git add</span><br><span class=\"line\">git commit -m &quot;Initial commit&quot;</span><br><span class=\"line\">git remote add origin git@github.com:username&#x2F;reponame.git</span><br><span class=\"line\">git push -u origin master</span><br></pre></td></tr></table></figure>\n\n<p>现在我们可以使用一个命令来更新所有包的版本  </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">lerna version major</span><br></pre></td></tr></table></figure>\n\n<p>此命令不仅会将每个包都更新到 1.0.0, 还会为你推送版本更新到 git。最后一步是将这些包发布到 npm。Lerna 用一个命令就能完成这个任务  </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ lerna publish from-git</span><br></pre></td></tr></table></figure>\n\n<p>这条命令成功运行后, 你就成功将第一个 monorepo 中的所有包都发布到 npm 了  </p>\n<h4 id=\"总结一下\"><a href=\"#总结一下\" class=\"headerlink\" title=\"总结一下\"></a>总结一下</h4><p>用 Lerna 创建一个新的 monorepo   </p>\n<p>为我们的 monorepo 添加了三个新的定域包  </p>\n<p>更新了所有包的版本并使用一条命令提交给了 git  </p>\n<p>使用一条命令将所有包发布到了 npm 存储库   </p>\n<p>有关 Lerna 的更多信息, 包括解决重复问题的方案, 建议查阅他们提供优秀的 文档   </p>\n<h4 id=\"未来计划\"><a href=\"#未来计划\" class=\"headerlink\" title=\"未来计划\"></a>未来计划</h4><p>我们也很高兴地宣布, 我们计划为 npm@7 带来一流的 monorepo 支持。如果你在搭配 monorepo 使用 npm, 我们需要你的反馈！请告诉我们你对目前的 monorepo 解决方案的看法。</p>"},{"title":"PWA 对比 Native 谁更胜一筹","date":"2020-03-06T10:28:17.000Z","_content":" \n\n自诞生以来, 渐进式 Web 应用 (PWA) 已经取得了可观的成就。PWA 的加载速度比其他应用更快, 并且它们的体积也不大。你知道优步的 PWA 在 **2G** 网络上只需 **3** 秒钟即可加载完毕吗\n\n<!-- more -->\n\n#### PWA 的强大能力\n\n在将移动网站重建为 PWA 之后, Pinterest([详细案例](https://www.infoq.cn/article/pinterest-progressive-web-app-performance-case-study))  的参与度增加了 **60％**。\nTinder 的加载时间从 11.91 秒减少到 **4.69 秒**。\nBookmyshow 的 PWA 体积只有其 iOS 应用的 **108** 分之一, 是 Android 应用的 **54** 分之一。\n你知道为什么 PWA 能做到这一切吗？在回答这个问题之前, 让我们先来了解 PWA 的含义：\n\n\n渐进式 Web 应用 是使用 HTML、CSS 和 Javascript 等现代技术开发的。PWA 是能提供原生体验的网站。简而言之, 它们是 Web 应用。\n\n我们知道 PWA 是基于一个脚本运行的, 该脚本被称为 Service worker, 其在后台独立于网站运行。这种方法提供了定期的后台同步、推送通知和丰富的办公体验。\n\n对于应用开发人员来说, 开发这种应用是很容易的, 因为他们不需要像开发Native那样学习新的编程语言。不需要安装开发环境, 因为所有现代浏览器都支持 PWA。\n\n#### PWA、Native 各有优点\n\nPWA 的优点：渐进式 Web 应用速度快、可靠、能减少加载时间并提供出色的用户参与度。  \n\n毫无疑问, 渐进式 Web 应用是有很多益处的。根据上面引用的一些数据, 它们也比Native更好。在分析Native与 PWA 的区别之前, 我们先来了解Native的含义。  \n\nNative程序 这个术语特指 iOS 和 Android 应用程序, 或所有其他类型的移动应用。这些应用是为特定平台构建的, 并使用专用的编程语言来编写。  \n\n这使它们能够在特定的操作系统上无缝运行, 因为它们使用了对应操作系统的工具和框架。当 Android 应用开发人员选择了要开发一款应用的平台（Android）后, 他们就会根据这个平台硬件的独特能力来编写代码。  \n\nNative的好处 包括稳健的安全特性、更少的电池消耗, 并且很容易在应用程序商店中展示上架。   \n\n#### PWA vs Native\n\n简单了解了这两种类型的应用程序后, 你认为哪种类型的应用更适合你的业务？下面我们来从业务的角度上对比这些应用。 \n\n![pwa native compare](/images/posts/pwa.native.png)\n\nPWA 与 Native 对比 #1：用户体验\nPWA 允许你在浏览器和设备上安装的应用中提供相同的界面, 它不需要用户去学习多个界面。另一方面, Native 需要更多的存储空间, 这会影响智能手机空间有限的用户, 削弱他们的用户体验。\n\nPWA 与 Native 对比 #2：安全性\n与 PWA 不同, Native可以访问设备上的所有必要信息, 这些应用嵌入了可确保高度安全的传输层（TLS）证书。对于 PWA 来说, 这些应用需要自己的认证手段。\n\nPWA 与 Native 对比 #3：加载速度\n即使设备未连接到 Internet, PWA 也可以提供更快的加载速度, 这是因为它们使用了 service worker 脚本来缓存数据、管理请求和存储外壳数据。加载速度是提升参与度和保留率背后的一大要素, 因此在这个指标方面, PWA 对比 Native 占了上风。\n\nPWA 与 Native 对比 #4：应用商店可见性\nPWA 在应用商店上发布的流程更为复杂, 使用 PWA 发布时, 你必须简短说明一下它的原生功能, 另外你还需要有效的证据证明你是合法注册企业。Native 不需要这些手续即可在应用商店中上架。\n\nPWA 与 Native 对比 #5：开发成本\n开发 PWA 所需的时间非常少, 从而降低了总体开发成本。另一方面, Native的开发成本更高, 因为开发人员必须根据操作系统的新特性, 花费更多的时间和精力来更新应用。\n\nPWA 与 Native 对比 #6：在线可见性\n从上文可知, Native 在应用商店中上架要容易得多。但由于 PWA 的天然属性, 它们在网络上获得关注度会更容易。由于 PWA 是模仿网站的应用, 你可以在互联网找到这些应用, 它们的可见性不只局限于应用商店。\n\n![pwa vs native](/images/posts/pwa.vs.native.png)\n\n#### 你应该选择谁, 是 Native 还是 PWA\n\n作为企业家, 如果你正在为用户创造一款基础应用, 则应考虑构建 PWA。它不需要你的用户下载应用, 并且你可以通过推送通知轻松地与他们交互  \n\n如果你有时间限制并且想要节省成本, 那么 PWA 是一个不错的选择, 因为开发渐进式 Web 应用所需的时间和成本更少  \n\nPWA 可以覆盖更广泛的受众, 因此如果你正在寻找一款可以提高品牌知名度的应用, 那么这类应用将是你的理想选择  \n\n如果你想要的是可靠性很高的应用, 那么 Native 就能满足你的需求。众所周知, Native 可提供更高的安全性  \n\nNative 程序可以提供更强的计算能力和更好的 UX 选项, 例如地理围栏和传感器 / 检测能力  \n\n基于以上几点, 你就能判断到底应该选择 Native 还是 PWA。作出决定之前一定要先分析业务需求。两种类型的应用都是很有用的, 但它们满足的需求却有所不同  \n\n\n#### 参考文献\n[InfoQ 原文](https://www.infoq.cn/article/1GsAwoz1aS5IXutDAwZo)","source":"_posts/PWA对比Native谁更胜一筹.md","raw":"---\ntitle: PWA 对比 Native 谁更胜一筹\ndate: 2020-03-06 18:28:17\ntags: [PWA]\ncategories: news\n---\n \n\n自诞生以来, 渐进式 Web 应用 (PWA) 已经取得了可观的成就。PWA 的加载速度比其他应用更快, 并且它们的体积也不大。你知道优步的 PWA 在 **2G** 网络上只需 **3** 秒钟即可加载完毕吗\n\n<!-- more -->\n\n#### PWA 的强大能力\n\n在将移动网站重建为 PWA 之后, Pinterest([详细案例](https://www.infoq.cn/article/pinterest-progressive-web-app-performance-case-study))  的参与度增加了 **60％**。\nTinder 的加载时间从 11.91 秒减少到 **4.69 秒**。\nBookmyshow 的 PWA 体积只有其 iOS 应用的 **108** 分之一, 是 Android 应用的 **54** 分之一。\n你知道为什么 PWA 能做到这一切吗？在回答这个问题之前, 让我们先来了解 PWA 的含义：\n\n\n渐进式 Web 应用 是使用 HTML、CSS 和 Javascript 等现代技术开发的。PWA 是能提供原生体验的网站。简而言之, 它们是 Web 应用。\n\n我们知道 PWA 是基于一个脚本运行的, 该脚本被称为 Service worker, 其在后台独立于网站运行。这种方法提供了定期的后台同步、推送通知和丰富的办公体验。\n\n对于应用开发人员来说, 开发这种应用是很容易的, 因为他们不需要像开发Native那样学习新的编程语言。不需要安装开发环境, 因为所有现代浏览器都支持 PWA。\n\n#### PWA、Native 各有优点\n\nPWA 的优点：渐进式 Web 应用速度快、可靠、能减少加载时间并提供出色的用户参与度。  \n\n毫无疑问, 渐进式 Web 应用是有很多益处的。根据上面引用的一些数据, 它们也比Native更好。在分析Native与 PWA 的区别之前, 我们先来了解Native的含义。  \n\nNative程序 这个术语特指 iOS 和 Android 应用程序, 或所有其他类型的移动应用。这些应用是为特定平台构建的, 并使用专用的编程语言来编写。  \n\n这使它们能够在特定的操作系统上无缝运行, 因为它们使用了对应操作系统的工具和框架。当 Android 应用开发人员选择了要开发一款应用的平台（Android）后, 他们就会根据这个平台硬件的独特能力来编写代码。  \n\nNative的好处 包括稳健的安全特性、更少的电池消耗, 并且很容易在应用程序商店中展示上架。   \n\n#### PWA vs Native\n\n简单了解了这两种类型的应用程序后, 你认为哪种类型的应用更适合你的业务？下面我们来从业务的角度上对比这些应用。 \n\n![pwa native compare](/images/posts/pwa.native.png)\n\nPWA 与 Native 对比 #1：用户体验\nPWA 允许你在浏览器和设备上安装的应用中提供相同的界面, 它不需要用户去学习多个界面。另一方面, Native 需要更多的存储空间, 这会影响智能手机空间有限的用户, 削弱他们的用户体验。\n\nPWA 与 Native 对比 #2：安全性\n与 PWA 不同, Native可以访问设备上的所有必要信息, 这些应用嵌入了可确保高度安全的传输层（TLS）证书。对于 PWA 来说, 这些应用需要自己的认证手段。\n\nPWA 与 Native 对比 #3：加载速度\n即使设备未连接到 Internet, PWA 也可以提供更快的加载速度, 这是因为它们使用了 service worker 脚本来缓存数据、管理请求和存储外壳数据。加载速度是提升参与度和保留率背后的一大要素, 因此在这个指标方面, PWA 对比 Native 占了上风。\n\nPWA 与 Native 对比 #4：应用商店可见性\nPWA 在应用商店上发布的流程更为复杂, 使用 PWA 发布时, 你必须简短说明一下它的原生功能, 另外你还需要有效的证据证明你是合法注册企业。Native 不需要这些手续即可在应用商店中上架。\n\nPWA 与 Native 对比 #5：开发成本\n开发 PWA 所需的时间非常少, 从而降低了总体开发成本。另一方面, Native的开发成本更高, 因为开发人员必须根据操作系统的新特性, 花费更多的时间和精力来更新应用。\n\nPWA 与 Native 对比 #6：在线可见性\n从上文可知, Native 在应用商店中上架要容易得多。但由于 PWA 的天然属性, 它们在网络上获得关注度会更容易。由于 PWA 是模仿网站的应用, 你可以在互联网找到这些应用, 它们的可见性不只局限于应用商店。\n\n![pwa vs native](/images/posts/pwa.vs.native.png)\n\n#### 你应该选择谁, 是 Native 还是 PWA\n\n作为企业家, 如果你正在为用户创造一款基础应用, 则应考虑构建 PWA。它不需要你的用户下载应用, 并且你可以通过推送通知轻松地与他们交互  \n\n如果你有时间限制并且想要节省成本, 那么 PWA 是一个不错的选择, 因为开发渐进式 Web 应用所需的时间和成本更少  \n\nPWA 可以覆盖更广泛的受众, 因此如果你正在寻找一款可以提高品牌知名度的应用, 那么这类应用将是你的理想选择  \n\n如果你想要的是可靠性很高的应用, 那么 Native 就能满足你的需求。众所周知, Native 可提供更高的安全性  \n\nNative 程序可以提供更强的计算能力和更好的 UX 选项, 例如地理围栏和传感器 / 检测能力  \n\n基于以上几点, 你就能判断到底应该选择 Native 还是 PWA。作出决定之前一定要先分析业务需求。两种类型的应用都是很有用的, 但它们满足的需求却有所不同  \n\n\n#### 参考文献\n[InfoQ 原文](https://www.infoq.cn/article/1GsAwoz1aS5IXutDAwZo)","slug":"PWA对比Native谁更胜一筹","published":1,"updated":"2020-04-07T15:20:30.476Z","_id":"ck8nz89j90004qcnc9rzbcpk3","comments":1,"layout":"post","photos":[],"link":"","content":"<p>自诞生以来, 渐进式 Web 应用 (PWA) 已经取得了可观的成就。PWA 的加载速度比其他应用更快, 并且它们的体积也不大。你知道优步的 PWA 在 <strong>2G</strong> 网络上只需 <strong>3</strong> 秒钟即可加载完毕吗</p>\n<a id=\"more\"></a>\n\n<h4 id=\"PWA-的强大能力\"><a href=\"#PWA-的强大能力\" class=\"headerlink\" title=\"PWA 的强大能力\"></a>PWA 的强大能力</h4><p>在将移动网站重建为 PWA 之后, Pinterest(<a href=\"https://www.infoq.cn/article/pinterest-progressive-web-app-performance-case-study\" target=\"_blank\" rel=\"noopener\">详细案例</a>)  的参与度增加了 <strong>60％</strong>。<br>Tinder 的加载时间从 11.91 秒减少到 <strong>4.69 秒</strong>。<br>Bookmyshow 的 PWA 体积只有其 iOS 应用的 <strong>108</strong> 分之一, 是 Android 应用的 <strong>54</strong> 分之一。<br>你知道为什么 PWA 能做到这一切吗？在回答这个问题之前, 让我们先来了解 PWA 的含义：</p>\n<p>渐进式 Web 应用 是使用 HTML、CSS 和 Javascript 等现代技术开发的。PWA 是能提供原生体验的网站。简而言之, 它们是 Web 应用。</p>\n<p>我们知道 PWA 是基于一个脚本运行的, 该脚本被称为 Service worker, 其在后台独立于网站运行。这种方法提供了定期的后台同步、推送通知和丰富的办公体验。</p>\n<p>对于应用开发人员来说, 开发这种应用是很容易的, 因为他们不需要像开发Native那样学习新的编程语言。不需要安装开发环境, 因为所有现代浏览器都支持 PWA。</p>\n<h4 id=\"PWA、Native-各有优点\"><a href=\"#PWA、Native-各有优点\" class=\"headerlink\" title=\"PWA、Native 各有优点\"></a>PWA、Native 各有优点</h4><p>PWA 的优点：渐进式 Web 应用速度快、可靠、能减少加载时间并提供出色的用户参与度。  </p>\n<p>毫无疑问, 渐进式 Web 应用是有很多益处的。根据上面引用的一些数据, 它们也比Native更好。在分析Native与 PWA 的区别之前, 我们先来了解Native的含义。  </p>\n<p>Native程序 这个术语特指 iOS 和 Android 应用程序, 或所有其他类型的移动应用。这些应用是为特定平台构建的, 并使用专用的编程语言来编写。  </p>\n<p>这使它们能够在特定的操作系统上无缝运行, 因为它们使用了对应操作系统的工具和框架。当 Android 应用开发人员选择了要开发一款应用的平台（Android）后, 他们就会根据这个平台硬件的独特能力来编写代码。  </p>\n<p>Native的好处 包括稳健的安全特性、更少的电池消耗, 并且很容易在应用程序商店中展示上架。   </p>\n<h4 id=\"PWA-vs-Native\"><a href=\"#PWA-vs-Native\" class=\"headerlink\" title=\"PWA vs Native\"></a>PWA vs Native</h4><p>简单了解了这两种类型的应用程序后, 你认为哪种类型的应用更适合你的业务？下面我们来从业务的角度上对比这些应用。 </p>\n<p><img src=\"/images/posts/pwa.native.png\" alt=\"pwa native compare\"></p>\n<p>PWA 与 Native 对比 #1：用户体验<br>PWA 允许你在浏览器和设备上安装的应用中提供相同的界面, 它不需要用户去学习多个界面。另一方面, Native 需要更多的存储空间, 这会影响智能手机空间有限的用户, 削弱他们的用户体验。</p>\n<p>PWA 与 Native 对比 #2：安全性<br>与 PWA 不同, Native可以访问设备上的所有必要信息, 这些应用嵌入了可确保高度安全的传输层（TLS）证书。对于 PWA 来说, 这些应用需要自己的认证手段。</p>\n<p>PWA 与 Native 对比 #3：加载速度<br>即使设备未连接到 Internet, PWA 也可以提供更快的加载速度, 这是因为它们使用了 service worker 脚本来缓存数据、管理请求和存储外壳数据。加载速度是提升参与度和保留率背后的一大要素, 因此在这个指标方面, PWA 对比 Native 占了上风。</p>\n<p>PWA 与 Native 对比 #4：应用商店可见性<br>PWA 在应用商店上发布的流程更为复杂, 使用 PWA 发布时, 你必须简短说明一下它的原生功能, 另外你还需要有效的证据证明你是合法注册企业。Native 不需要这些手续即可在应用商店中上架。</p>\n<p>PWA 与 Native 对比 #5：开发成本<br>开发 PWA 所需的时间非常少, 从而降低了总体开发成本。另一方面, Native的开发成本更高, 因为开发人员必须根据操作系统的新特性, 花费更多的时间和精力来更新应用。</p>\n<p>PWA 与 Native 对比 #6：在线可见性<br>从上文可知, Native 在应用商店中上架要容易得多。但由于 PWA 的天然属性, 它们在网络上获得关注度会更容易。由于 PWA 是模仿网站的应用, 你可以在互联网找到这些应用, 它们的可见性不只局限于应用商店。</p>\n<p><img src=\"/images/posts/pwa.vs.native.png\" alt=\"pwa vs native\"></p>\n<h4 id=\"你应该选择谁-是-Native-还是-PWA\"><a href=\"#你应该选择谁-是-Native-还是-PWA\" class=\"headerlink\" title=\"你应该选择谁, 是 Native 还是 PWA\"></a>你应该选择谁, 是 Native 还是 PWA</h4><p>作为企业家, 如果你正在为用户创造一款基础应用, 则应考虑构建 PWA。它不需要你的用户下载应用, 并且你可以通过推送通知轻松地与他们交互  </p>\n<p>如果你有时间限制并且想要节省成本, 那么 PWA 是一个不错的选择, 因为开发渐进式 Web 应用所需的时间和成本更少  </p>\n<p>PWA 可以覆盖更广泛的受众, 因此如果你正在寻找一款可以提高品牌知名度的应用, 那么这类应用将是你的理想选择  </p>\n<p>如果你想要的是可靠性很高的应用, 那么 Native 就能满足你的需求。众所周知, Native 可提供更高的安全性  </p>\n<p>Native 程序可以提供更强的计算能力和更好的 UX 选项, 例如地理围栏和传感器 / 检测能力  </p>\n<p>基于以上几点, 你就能判断到底应该选择 Native 还是 PWA。作出决定之前一定要先分析业务需求。两种类型的应用都是很有用的, 但它们满足的需求却有所不同  </p>\n<h4 id=\"参考文献\"><a href=\"#参考文献\" class=\"headerlink\" title=\"参考文献\"></a>参考文献</h4><p><a href=\"https://www.infoq.cn/article/1GsAwoz1aS5IXutDAwZo\" target=\"_blank\" rel=\"noopener\">InfoQ 原文</a></p>\n","site":{"data":{}},"length":1933,"excerpt":"<p>自诞生以来, 渐进式 Web 应用 (PWA) 已经取得了可观的成就。PWA 的加载速度比其他应用更快, 并且它们的体积也不大。你知道优步的 PWA 在 <strong>2G</strong> 网络上只需 <strong>3</strong> 秒钟即可加载完毕吗</p>","more":"<h4 id=\"PWA-的强大能力\"><a href=\"#PWA-的强大能力\" class=\"headerlink\" title=\"PWA 的强大能力\"></a>PWA 的强大能力</h4><p>在将移动网站重建为 PWA 之后, Pinterest(<a href=\"https://www.infoq.cn/article/pinterest-progressive-web-app-performance-case-study\" target=\"_blank\" rel=\"noopener\">详细案例</a>)  的参与度增加了 <strong>60％</strong>。<br>Tinder 的加载时间从 11.91 秒减少到 <strong>4.69 秒</strong>。<br>Bookmyshow 的 PWA 体积只有其 iOS 应用的 <strong>108</strong> 分之一, 是 Android 应用的 <strong>54</strong> 分之一。<br>你知道为什么 PWA 能做到这一切吗？在回答这个问题之前, 让我们先来了解 PWA 的含义：</p>\n<p>渐进式 Web 应用 是使用 HTML、CSS 和 Javascript 等现代技术开发的。PWA 是能提供原生体验的网站。简而言之, 它们是 Web 应用。</p>\n<p>我们知道 PWA 是基于一个脚本运行的, 该脚本被称为 Service worker, 其在后台独立于网站运行。这种方法提供了定期的后台同步、推送通知和丰富的办公体验。</p>\n<p>对于应用开发人员来说, 开发这种应用是很容易的, 因为他们不需要像开发Native那样学习新的编程语言。不需要安装开发环境, 因为所有现代浏览器都支持 PWA。</p>\n<h4 id=\"PWA、Native-各有优点\"><a href=\"#PWA、Native-各有优点\" class=\"headerlink\" title=\"PWA、Native 各有优点\"></a>PWA、Native 各有优点</h4><p>PWA 的优点：渐进式 Web 应用速度快、可靠、能减少加载时间并提供出色的用户参与度。  </p>\n<p>毫无疑问, 渐进式 Web 应用是有很多益处的。根据上面引用的一些数据, 它们也比Native更好。在分析Native与 PWA 的区别之前, 我们先来了解Native的含义。  </p>\n<p>Native程序 这个术语特指 iOS 和 Android 应用程序, 或所有其他类型的移动应用。这些应用是为特定平台构建的, 并使用专用的编程语言来编写。  </p>\n<p>这使它们能够在特定的操作系统上无缝运行, 因为它们使用了对应操作系统的工具和框架。当 Android 应用开发人员选择了要开发一款应用的平台（Android）后, 他们就会根据这个平台硬件的独特能力来编写代码。  </p>\n<p>Native的好处 包括稳健的安全特性、更少的电池消耗, 并且很容易在应用程序商店中展示上架。   </p>\n<h4 id=\"PWA-vs-Native\"><a href=\"#PWA-vs-Native\" class=\"headerlink\" title=\"PWA vs Native\"></a>PWA vs Native</h4><p>简单了解了这两种类型的应用程序后, 你认为哪种类型的应用更适合你的业务？下面我们来从业务的角度上对比这些应用。 </p>\n<p><img src=\"/images/posts/pwa.native.png\" alt=\"pwa native compare\"></p>\n<p>PWA 与 Native 对比 #1：用户体验<br>PWA 允许你在浏览器和设备上安装的应用中提供相同的界面, 它不需要用户去学习多个界面。另一方面, Native 需要更多的存储空间, 这会影响智能手机空间有限的用户, 削弱他们的用户体验。</p>\n<p>PWA 与 Native 对比 #2：安全性<br>与 PWA 不同, Native可以访问设备上的所有必要信息, 这些应用嵌入了可确保高度安全的传输层（TLS）证书。对于 PWA 来说, 这些应用需要自己的认证手段。</p>\n<p>PWA 与 Native 对比 #3：加载速度<br>即使设备未连接到 Internet, PWA 也可以提供更快的加载速度, 这是因为它们使用了 service worker 脚本来缓存数据、管理请求和存储外壳数据。加载速度是提升参与度和保留率背后的一大要素, 因此在这个指标方面, PWA 对比 Native 占了上风。</p>\n<p>PWA 与 Native 对比 #4：应用商店可见性<br>PWA 在应用商店上发布的流程更为复杂, 使用 PWA 发布时, 你必须简短说明一下它的原生功能, 另外你还需要有效的证据证明你是合法注册企业。Native 不需要这些手续即可在应用商店中上架。</p>\n<p>PWA 与 Native 对比 #5：开发成本<br>开发 PWA 所需的时间非常少, 从而降低了总体开发成本。另一方面, Native的开发成本更高, 因为开发人员必须根据操作系统的新特性, 花费更多的时间和精力来更新应用。</p>\n<p>PWA 与 Native 对比 #6：在线可见性<br>从上文可知, Native 在应用商店中上架要容易得多。但由于 PWA 的天然属性, 它们在网络上获得关注度会更容易。由于 PWA 是模仿网站的应用, 你可以在互联网找到这些应用, 它们的可见性不只局限于应用商店。</p>\n<p><img src=\"/images/posts/pwa.vs.native.png\" alt=\"pwa vs native\"></p>\n<h4 id=\"你应该选择谁-是-Native-还是-PWA\"><a href=\"#你应该选择谁-是-Native-还是-PWA\" class=\"headerlink\" title=\"你应该选择谁, 是 Native 还是 PWA\"></a>你应该选择谁, 是 Native 还是 PWA</h4><p>作为企业家, 如果你正在为用户创造一款基础应用, 则应考虑构建 PWA。它不需要你的用户下载应用, 并且你可以通过推送通知轻松地与他们交互  </p>\n<p>如果你有时间限制并且想要节省成本, 那么 PWA 是一个不错的选择, 因为开发渐进式 Web 应用所需的时间和成本更少  </p>\n<p>PWA 可以覆盖更广泛的受众, 因此如果你正在寻找一款可以提高品牌知名度的应用, 那么这类应用将是你的理想选择  </p>\n<p>如果你想要的是可靠性很高的应用, 那么 Native 就能满足你的需求。众所周知, Native 可提供更高的安全性  </p>\n<p>Native 程序可以提供更强的计算能力和更好的 UX 选项, 例如地理围栏和传感器 / 检测能力  </p>\n<p>基于以上几点, 你就能判断到底应该选择 Native 还是 PWA。作出决定之前一定要先分析业务需求。两种类型的应用都是很有用的, 但它们满足的需求却有所不同  </p>\n<h4 id=\"参考文献\"><a href=\"#参考文献\" class=\"headerlink\" title=\"参考文献\"></a>参考文献</h4><p><a href=\"https://www.infoq.cn/article/1GsAwoz1aS5IXutDAwZo\" target=\"_blank\" rel=\"noopener\">InfoQ 原文</a></p>"},{"title":"使用 WireShark 抓包 HTTP2","date":"2019-07-04T00:38:13.000Z","_content":"\n如果我们要使用 HTTP2, 我们要怎么来对 HTTP2 的流量进行分析呢, 本文将介绍如何配置 WireShark 来抓包 HTTP2\n\n<!-- more -->\n\n#### HTTP2 使用现状\n\nHTTP2 (超文本传输协议2) 2015年5月份正式发表。 HTTP2 保留了 1.1 的大部分语义, 不会破坏现有工作, 同时加入的新特性使程序可以有更好的加载速度  \n\n据 Myssl 的统计, 至6月份国内 HTTP2 的使用站点已经超过了 **50%**\n\n![http2 statistic](/images/posts/http2.statistic.png)\n\n\n那么抓包 HTTP2 的请求, 可以使用 WireShark 来进行分析调试  \nWireShark 是一个强大的网络封包分析工具, 新版 Wireshark 增加了对 HTTP2 的支持\n下载地址 [https://www.wireshark.org/#download](https://www.wireshark.org/#download)\n\n#### 配置 WireShark 调式 HTTP2\n\n打开 WireShark, 选择一个网卡  \n\n![capture](/images/posts/capture.jpg)\n\n如果不确定哪个网卡, 在工具栏上点击  **捕获 > 选项**\n\n![capture](/images/posts/capture.net.card.jpg)\n\nWireShare 抓包原理是**读取网卡数据**, 想要解密 HTTPS 数据, 可以通过以下方法配置  \n我们知道 TLS 完成握手之后会保存 session ticket 以便恢复时可以快速会话。Chrome 支持将会话密钥保存在外部文件。前提是系统存在一个变量 **SSLKEYLOGFILE**, 配置并重启浏览器\n\n![system.var](/images/posts/system.var.jpg)\n\n配置 WireShark, 编辑 > 首选项 > Protocols > TLS\n**Pre-Master-Secret log filename** 对应系统变量 SSLKEYLOGFILE 配置的文件地址  \nTLS debug file 是调试日志, 可以配置上, 具体如下图\n\n![wireshark.tls.set](/images/posts/wireshark.tls.set.jpg)\n\n配置成功后可以直接设置过滤 HTTP2 请求  \n\n![wireshark.filter](/images/posts/wireshark.filter.jpg)\n\n\n\n#### 参考文献\n\n[Wiki HTTP2](https://zh.wikipedia.org/wiki/HTTP/2)\n[WireShark TLS Decryption](https://wiki.wireshark.org/TLS#TLS_Decryption)","source":"_posts/使用WireShark抓包HTTP2.md","raw":"---\ntitle: 使用 WireShark 抓包 HTTP2\ndate: 2019-07-04 08:38:13\ntags: [HTTP2, WireShark]\ncategories: posts\n---\n\n如果我们要使用 HTTP2, 我们要怎么来对 HTTP2 的流量进行分析呢, 本文将介绍如何配置 WireShark 来抓包 HTTP2\n\n<!-- more -->\n\n#### HTTP2 使用现状\n\nHTTP2 (超文本传输协议2) 2015年5月份正式发表。 HTTP2 保留了 1.1 的大部分语义, 不会破坏现有工作, 同时加入的新特性使程序可以有更好的加载速度  \n\n据 Myssl 的统计, 至6月份国内 HTTP2 的使用站点已经超过了 **50%**\n\n![http2 statistic](/images/posts/http2.statistic.png)\n\n\n那么抓包 HTTP2 的请求, 可以使用 WireShark 来进行分析调试  \nWireShark 是一个强大的网络封包分析工具, 新版 Wireshark 增加了对 HTTP2 的支持\n下载地址 [https://www.wireshark.org/#download](https://www.wireshark.org/#download)\n\n#### 配置 WireShark 调式 HTTP2\n\n打开 WireShark, 选择一个网卡  \n\n![capture](/images/posts/capture.jpg)\n\n如果不确定哪个网卡, 在工具栏上点击  **捕获 > 选项**\n\n![capture](/images/posts/capture.net.card.jpg)\n\nWireShare 抓包原理是**读取网卡数据**, 想要解密 HTTPS 数据, 可以通过以下方法配置  \n我们知道 TLS 完成握手之后会保存 session ticket 以便恢复时可以快速会话。Chrome 支持将会话密钥保存在外部文件。前提是系统存在一个变量 **SSLKEYLOGFILE**, 配置并重启浏览器\n\n![system.var](/images/posts/system.var.jpg)\n\n配置 WireShark, 编辑 > 首选项 > Protocols > TLS\n**Pre-Master-Secret log filename** 对应系统变量 SSLKEYLOGFILE 配置的文件地址  \nTLS debug file 是调试日志, 可以配置上, 具体如下图\n\n![wireshark.tls.set](/images/posts/wireshark.tls.set.jpg)\n\n配置成功后可以直接设置过滤 HTTP2 请求  \n\n![wireshark.filter](/images/posts/wireshark.filter.jpg)\n\n\n\n#### 参考文献\n\n[Wiki HTTP2](https://zh.wikipedia.org/wiki/HTTP/2)\n[WireShark TLS Decryption](https://wiki.wireshark.org/TLS#TLS_Decryption)","slug":"使用WireShark抓包HTTP2","published":1,"updated":"2020-04-04T03:58:40.857Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck8nz89jd0006qcnc7a35at4r","content":"<p>如果我们要使用 HTTP2, 我们要怎么来对 HTTP2 的流量进行分析呢, 本文将介绍如何配置 WireShark 来抓包 HTTP2</p>\n<a id=\"more\"></a>\n\n<h4 id=\"HTTP2-使用现状\"><a href=\"#HTTP2-使用现状\" class=\"headerlink\" title=\"HTTP2 使用现状\"></a>HTTP2 使用现状</h4><p>HTTP2 (超文本传输协议2) 2015年5月份正式发表。 HTTP2 保留了 1.1 的大部分语义, 不会破坏现有工作, 同时加入的新特性使程序可以有更好的加载速度  </p>\n<p>据 Myssl 的统计, 至6月份国内 HTTP2 的使用站点已经超过了 <strong>50%</strong></p>\n<p><img src=\"/images/posts/http2.statistic.png\" alt=\"http2 statistic\"></p>\n<p>那么抓包 HTTP2 的请求, 可以使用 WireShark 来进行分析调试<br>WireShark 是一个强大的网络封包分析工具, 新版 Wireshark 增加了对 HTTP2 的支持<br>下载地址 <a href=\"https://www.wireshark.org/#download\" target=\"_blank\" rel=\"noopener\">https://www.wireshark.org/#download</a></p>\n<h4 id=\"配置-WireShark-调式-HTTP2\"><a href=\"#配置-WireShark-调式-HTTP2\" class=\"headerlink\" title=\"配置 WireShark 调式 HTTP2\"></a>配置 WireShark 调式 HTTP2</h4><p>打开 WireShark, 选择一个网卡  </p>\n<p><img src=\"/images/posts/capture.jpg\" alt=\"capture\"></p>\n<p>如果不确定哪个网卡, 在工具栏上点击  <strong>捕获 &gt; 选项</strong></p>\n<p><img src=\"/images/posts/capture.net.card.jpg\" alt=\"capture\"></p>\n<p>WireShare 抓包原理是<strong>读取网卡数据</strong>, 想要解密 HTTPS 数据, 可以通过以下方法配置<br>我们知道 TLS 完成握手之后会保存 session ticket 以便恢复时可以快速会话。Chrome 支持将会话密钥保存在外部文件。前提是系统存在一个变量 <strong>SSLKEYLOGFILE</strong>, 配置并重启浏览器</p>\n<p><img src=\"/images/posts/system.var.jpg\" alt=\"system.var\"></p>\n<p>配置 WireShark, 编辑 &gt; 首选项 &gt; Protocols &gt; TLS<br><strong>Pre-Master-Secret log filename</strong> 对应系统变量 SSLKEYLOGFILE 配置的文件地址<br>TLS debug file 是调试日志, 可以配置上, 具体如下图</p>\n<p><img src=\"/images/posts/wireshark.tls.set.jpg\" alt=\"wireshark.tls.set\"></p>\n<p>配置成功后可以直接设置过滤 HTTP2 请求  </p>\n<p><img src=\"/images/posts/wireshark.filter.jpg\" alt=\"wireshark.filter\"></p>\n<h4 id=\"参考文献\"><a href=\"#参考文献\" class=\"headerlink\" title=\"参考文献\"></a>参考文献</h4><p><a href=\"https://zh.wikipedia.org/wiki/HTTP/2\" target=\"_blank\" rel=\"noopener\">Wiki HTTP2</a><br><a href=\"https://wiki.wireshark.org/TLS#TLS_Decryption\" target=\"_blank\" rel=\"noopener\">WireShark TLS Decryption</a></p>\n","site":{"data":{}},"length":676,"excerpt":"<p>如果我们要使用 HTTP2, 我们要怎么来对 HTTP2 的流量进行分析呢, 本文将介绍如何配置 WireShark 来抓包 HTTP2</p>","more":"<h4 id=\"HTTP2-使用现状\"><a href=\"#HTTP2-使用现状\" class=\"headerlink\" title=\"HTTP2 使用现状\"></a>HTTP2 使用现状</h4><p>HTTP2 (超文本传输协议2) 2015年5月份正式发表。 HTTP2 保留了 1.1 的大部分语义, 不会破坏现有工作, 同时加入的新特性使程序可以有更好的加载速度  </p>\n<p>据 Myssl 的统计, 至6月份国内 HTTP2 的使用站点已经超过了 <strong>50%</strong></p>\n<p><img src=\"/images/posts/http2.statistic.png\" alt=\"http2 statistic\"></p>\n<p>那么抓包 HTTP2 的请求, 可以使用 WireShark 来进行分析调试<br>WireShark 是一个强大的网络封包分析工具, 新版 Wireshark 增加了对 HTTP2 的支持<br>下载地址 <a href=\"https://www.wireshark.org/#download\" target=\"_blank\" rel=\"noopener\">https://www.wireshark.org/#download</a></p>\n<h4 id=\"配置-WireShark-调式-HTTP2\"><a href=\"#配置-WireShark-调式-HTTP2\" class=\"headerlink\" title=\"配置 WireShark 调式 HTTP2\"></a>配置 WireShark 调式 HTTP2</h4><p>打开 WireShark, 选择一个网卡  </p>\n<p><img src=\"/images/posts/capture.jpg\" alt=\"capture\"></p>\n<p>如果不确定哪个网卡, 在工具栏上点击  <strong>捕获 &gt; 选项</strong></p>\n<p><img src=\"/images/posts/capture.net.card.jpg\" alt=\"capture\"></p>\n<p>WireShare 抓包原理是<strong>读取网卡数据</strong>, 想要解密 HTTPS 数据, 可以通过以下方法配置<br>我们知道 TLS 完成握手之后会保存 session ticket 以便恢复时可以快速会话。Chrome 支持将会话密钥保存在外部文件。前提是系统存在一个变量 <strong>SSLKEYLOGFILE</strong>, 配置并重启浏览器</p>\n<p><img src=\"/images/posts/system.var.jpg\" alt=\"system.var\"></p>\n<p>配置 WireShark, 编辑 &gt; 首选项 &gt; Protocols &gt; TLS<br><strong>Pre-Master-Secret log filename</strong> 对应系统变量 SSLKEYLOGFILE 配置的文件地址<br>TLS debug file 是调试日志, 可以配置上, 具体如下图</p>\n<p><img src=\"/images/posts/wireshark.tls.set.jpg\" alt=\"wireshark.tls.set\"></p>\n<p>配置成功后可以直接设置过滤 HTTP2 请求  </p>\n<p><img src=\"/images/posts/wireshark.filter.jpg\" alt=\"wireshark.filter\"></p>\n<h4 id=\"参考文献\"><a href=\"#参考文献\" class=\"headerlink\" title=\"参考文献\"></a>参考文献</h4><p><a href=\"https://zh.wikipedia.org/wiki/HTTP/2\" target=\"_blank\" rel=\"noopener\">Wiki HTTP2</a><br><a href=\"https://wiki.wireshark.org/TLS#TLS_Decryption\" target=\"_blank\" rel=\"noopener\">WireShark TLS Decryption</a></p>"},{"title":"谷歌将逐步停止支持 User Agent","date":"2020-04-03T03:22:30.000Z","_content":"\n谷歌将逐步停止支持 User Agent, Chrome 将从 v81 开始逐步淘汰 User Agent, 2020 年 9 月中旬发布的 v85 预计将会完全移除用户代理字符串\n\n<!-- more -->\n\n每一个 HTTP 请求, 都会将 User Agent 作为请求头的一部分发送到服务器。但是这个头字段现在变得越来越长和难以理解  \n在 Chrome on iOS 被标识为\n```\nUser-Agent: Mozilla/5.0 (iPhone; CPU iPhone OS 12_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) CriOS/69.0.3497.105 Mobile/15E148 Safari/605.1\n```\n在 Chrome on Android 被标识为\n```\nUser-Agent: Mozilla/5.0 (Linux; Android 9; Pixel 2 XL Build/PPP3.180510.008) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/67.0.3396.87 Mobile Safari/537.36\n```\n这真是一大串字符, 包含了很多信息。 Safari 采取了一些措施对该字符串进行删减, Chrome 使用了另一种方式, 具体有以下改变 \n\n- 用户代理将冻结\n  - navigator.appVersion\n  - navigator.platform\n  - navigator.productSub\n  - navigator.vendor\n  - navigator.userAgent  \n  - -\n- 引入几个头部字段 \n  - Sec-CH-UA: \"Chrome\"; v=\"73\"\n  - Sec-CH-UA-Platform: \"Windows\"\n  - Sec-CH-UA-Arch: \"ARM64\"\n  - Sec-CH-UA-Model: \"Pixel 2 XL\"\n  - **Sec-CH-UA-Mobile: ?1**\n  - Sec-CH-UA-Full-Version: \"73.1.2343B.TR\"  \n  - -\n- **navigator.getUserAgent()** 将被注入到 Javascript APIs\n\n\n2020 年 9 月中旬发布的 Chrome85 预计将会完全移除用户代理字符串。其它浏览器供应商，包括 Mozilla Firefox、Microsoft Edge 以及 Apple Safari，都表示支持这一举措。但目前还不清楚他们何时会采取行动。\n\n\n\n\n### 相关文章\n[Infoq - Chrome Phasing out Support for User Agent](https://www.infoq.cn/article/A3flGDTKpszgHKRQoQMQ)\n[WIGG ua-client-hints](https://github.com/WICG/ua-client-hints)\n[Browser_detection_using_the_user_agent](https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Browser_detection_using_the_user_agent)","source":"_posts/谷歌将逐步停止支持-User-Agent.md","raw":"---\ntitle: 谷歌将逐步停止支持 User Agent\ndate: 2020-04-03 11:22:30\ncategory: news\ntags: [user agent,chrome]\n---\n\n谷歌将逐步停止支持 User Agent, Chrome 将从 v81 开始逐步淘汰 User Agent, 2020 年 9 月中旬发布的 v85 预计将会完全移除用户代理字符串\n\n<!-- more -->\n\n每一个 HTTP 请求, 都会将 User Agent 作为请求头的一部分发送到服务器。但是这个头字段现在变得越来越长和难以理解  \n在 Chrome on iOS 被标识为\n```\nUser-Agent: Mozilla/5.0 (iPhone; CPU iPhone OS 12_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) CriOS/69.0.3497.105 Mobile/15E148 Safari/605.1\n```\n在 Chrome on Android 被标识为\n```\nUser-Agent: Mozilla/5.0 (Linux; Android 9; Pixel 2 XL Build/PPP3.180510.008) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/67.0.3396.87 Mobile Safari/537.36\n```\n这真是一大串字符, 包含了很多信息。 Safari 采取了一些措施对该字符串进行删减, Chrome 使用了另一种方式, 具体有以下改变 \n\n- 用户代理将冻结\n  - navigator.appVersion\n  - navigator.platform\n  - navigator.productSub\n  - navigator.vendor\n  - navigator.userAgent  \n  - -\n- 引入几个头部字段 \n  - Sec-CH-UA: \"Chrome\"; v=\"73\"\n  - Sec-CH-UA-Platform: \"Windows\"\n  - Sec-CH-UA-Arch: \"ARM64\"\n  - Sec-CH-UA-Model: \"Pixel 2 XL\"\n  - **Sec-CH-UA-Mobile: ?1**\n  - Sec-CH-UA-Full-Version: \"73.1.2343B.TR\"  \n  - -\n- **navigator.getUserAgent()** 将被注入到 Javascript APIs\n\n\n2020 年 9 月中旬发布的 Chrome85 预计将会完全移除用户代理字符串。其它浏览器供应商，包括 Mozilla Firefox、Microsoft Edge 以及 Apple Safari，都表示支持这一举措。但目前还不清楚他们何时会采取行动。\n\n\n\n\n### 相关文章\n[Infoq - Chrome Phasing out Support for User Agent](https://www.infoq.cn/article/A3flGDTKpszgHKRQoQMQ)\n[WIGG ua-client-hints](https://github.com/WICG/ua-client-hints)\n[Browser_detection_using_the_user_agent](https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Browser_detection_using_the_user_agent)","slug":"谷歌将逐步停止支持-User-Agent","published":1,"updated":"2020-04-04T04:45:30.563Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck8nz89ka0008qcnc0dymdmka","content":"<p>谷歌将逐步停止支持 User Agent, Chrome 将从 v81 开始逐步淘汰 User Agent, 2020 年 9 月中旬发布的 v85 预计将会完全移除用户代理字符串</p>\n<a id=\"more\"></a>\n\n<p>每一个 HTTP 请求, 都会将 User Agent 作为请求头的一部分发送到服务器。但是这个头字段现在变得越来越长和难以理解<br>在 Chrome on iOS 被标识为</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">User-Agent: Mozilla&#x2F;5.0 (iPhone; CPU iPhone OS 12_0 like Mac OS X) AppleWebKit&#x2F;605.1.15 (KHTML, like Gecko) CriOS&#x2F;69.0.3497.105 Mobile&#x2F;15E148 Safari&#x2F;605.1</span><br></pre></td></tr></table></figure>\n<p>在 Chrome on Android 被标识为</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">User-Agent: Mozilla&#x2F;5.0 (Linux; Android 9; Pixel 2 XL Build&#x2F;PPP3.180510.008) AppleWebKit&#x2F;537.36 (KHTML, like Gecko) Chrome&#x2F;67.0.3396.87 Mobile Safari&#x2F;537.36</span><br></pre></td></tr></table></figure>\n<p>这真是一大串字符, 包含了很多信息。 Safari 采取了一些措施对该字符串进行删减, Chrome 使用了另一种方式, 具体有以下改变 </p>\n<ul>\n<li>用户代理将冻结<ul>\n<li>navigator.appVersion</li>\n<li>navigator.platform</li>\n<li>navigator.productSub</li>\n<li>navigator.vendor</li>\n<li>navigator.userAgent  </li>\n<li>-</li>\n</ul>\n</li>\n<li>引入几个头部字段 <ul>\n<li>Sec-CH-UA: “Chrome”; v=”73”</li>\n<li>Sec-CH-UA-Platform: “Windows”</li>\n<li>Sec-CH-UA-Arch: “ARM64”</li>\n<li>Sec-CH-UA-Model: “Pixel 2 XL”</li>\n<li><strong>Sec-CH-UA-Mobile: ?1</strong></li>\n<li>Sec-CH-UA-Full-Version: “73.1.2343B.TR”  </li>\n<li>-</li>\n</ul>\n</li>\n<li><strong>navigator.getUserAgent()</strong> 将被注入到 Javascript APIs</li>\n</ul>\n<p>2020 年 9 月中旬发布的 Chrome85 预计将会完全移除用户代理字符串。其它浏览器供应商，包括 Mozilla Firefox、Microsoft Edge 以及 Apple Safari，都表示支持这一举措。但目前还不清楚他们何时会采取行动。</p>\n<h3 id=\"相关文章\"><a href=\"#相关文章\" class=\"headerlink\" title=\"相关文章\"></a>相关文章</h3><p><a href=\"https://www.infoq.cn/article/A3flGDTKpszgHKRQoQMQ\" target=\"_blank\" rel=\"noopener\">Infoq - Chrome Phasing out Support for User Agent</a><br><a href=\"https://github.com/WICG/ua-client-hints\" target=\"_blank\" rel=\"noopener\">WIGG ua-client-hints</a><br><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Browser_detection_using_the_user_agent\" target=\"_blank\" rel=\"noopener\">Browser_detection_using_the_user_agent</a></p>\n","site":{"data":{}},"length":1091,"excerpt":"<p>谷歌将逐步停止支持 User Agent, Chrome 将从 v81 开始逐步淘汰 User Agent, 2020 年 9 月中旬发布的 v85 预计将会完全移除用户代理字符串</p>","more":"<p>每一个 HTTP 请求, 都会将 User Agent 作为请求头的一部分发送到服务器。但是这个头字段现在变得越来越长和难以理解<br>在 Chrome on iOS 被标识为</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">User-Agent: Mozilla&#x2F;5.0 (iPhone; CPU iPhone OS 12_0 like Mac OS X) AppleWebKit&#x2F;605.1.15 (KHTML, like Gecko) CriOS&#x2F;69.0.3497.105 Mobile&#x2F;15E148 Safari&#x2F;605.1</span><br></pre></td></tr></table></figure>\n<p>在 Chrome on Android 被标识为</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">User-Agent: Mozilla&#x2F;5.0 (Linux; Android 9; Pixel 2 XL Build&#x2F;PPP3.180510.008) AppleWebKit&#x2F;537.36 (KHTML, like Gecko) Chrome&#x2F;67.0.3396.87 Mobile Safari&#x2F;537.36</span><br></pre></td></tr></table></figure>\n<p>这真是一大串字符, 包含了很多信息。 Safari 采取了一些措施对该字符串进行删减, Chrome 使用了另一种方式, 具体有以下改变 </p>\n<ul>\n<li>用户代理将冻结<ul>\n<li>navigator.appVersion</li>\n<li>navigator.platform</li>\n<li>navigator.productSub</li>\n<li>navigator.vendor</li>\n<li>navigator.userAgent  </li>\n<li>-</li>\n</ul>\n</li>\n<li>引入几个头部字段 <ul>\n<li>Sec-CH-UA: “Chrome”; v=”73”</li>\n<li>Sec-CH-UA-Platform: “Windows”</li>\n<li>Sec-CH-UA-Arch: “ARM64”</li>\n<li>Sec-CH-UA-Model: “Pixel 2 XL”</li>\n<li><strong>Sec-CH-UA-Mobile: ?1</strong></li>\n<li>Sec-CH-UA-Full-Version: “73.1.2343B.TR”  </li>\n<li>-</li>\n</ul>\n</li>\n<li><strong>navigator.getUserAgent()</strong> 将被注入到 Javascript APIs</li>\n</ul>\n<p>2020 年 9 月中旬发布的 Chrome85 预计将会完全移除用户代理字符串。其它浏览器供应商，包括 Mozilla Firefox、Microsoft Edge 以及 Apple Safari，都表示支持这一举措。但目前还不清楚他们何时会采取行动。</p>\n<h3 id=\"相关文章\"><a href=\"#相关文章\" class=\"headerlink\" title=\"相关文章\"></a>相关文章</h3><p><a href=\"https://www.infoq.cn/article/A3flGDTKpszgHKRQoQMQ\" target=\"_blank\" rel=\"noopener\">Infoq - Chrome Phasing out Support for User Agent</a><br><a href=\"https://github.com/WICG/ua-client-hints\" target=\"_blank\" rel=\"noopener\">WIGG ua-client-hints</a><br><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Browser_detection_using_the_user_agent\" target=\"_blank\" rel=\"noopener\">Browser_detection_using_the_user_agent</a></p>"},{"title":"使用 verdaccio 搭建私有 NPM","date":"2019-09-27T17:06:18.000Z","_content":"\n本篇分享如何搭建一个私有 NPM 服务来管理内部模块 \n\n<!-- more -->\n\n#### 为什么要搭建私有 NPM\nNPM (node 包管理器), 用来解决模块管理问题。这使得用们可以很方便的去使用和管理一个模块。NPM 上的包是公开的, 所有人都可以下载。 内部的模块并不能发布到 NPM 上, 那么就需要一个私有的 NPM 来管理内部模块  \n\n这里使用 verdaccio 来搭建。 这是一个从 sinopia frok 过来的一个项目, 目前第4个版本\n\n#### 安装\n```\nnpm i -g verdaccio\n```\n安装完运行 verdaccio \n\n![运行](/images/posts/verdaccio.run.jpg)\n\n第一次执行会生成一个 config 文件  \n\n#### 配置 config\n```\nstorage: ./storage       // 这里会缓存安装过的文件, 下次安装不用到 upstream \nplugins: ./plugins       // 插件\nweb:\n  title: Verdaccio       // 标题\n\nauth:\n  htpasswd:\n    file: ./htpasswd    // 这里记录这用户名和密码 .e.g. clc:$6B6QAAfdF:autocreated 2019-03-28T18:18:47.022Z\n    max_users: 1000     // 用户上限  设置为 -1 禁止添加\n\n# a list of other known repositories we can talk to\n// 这里配置上游, 可以配置多个\n// 你可以为不同的组指定上游, 这将决定包会从哪里下载, 或上传到哪里\nuplinks:\n  taobaoNpm:\n    url: https://registry.npm.taobao.org/     // url\n    max_fails: 5                              // 失败重试次数\n    fail_timeout: 2m                          // 超时时间\n  npmjs:\n    url: https://registry.npmjs.org/\n    max_fails: 5\n    fail_timeout: 2m\n\n// \nurl_prefix: /verdaccio/\n\npackages:\n  '**':\n    # scoped packageslisten:\n  https://localhost:9981\n\nhttps:\n  key:  /root/.config/verdaccio/verdaccio-key.pem\n  cert: /root/.config/verdaccio/verdaccio-cert.pem\n  ca:   /root/.config/verdaccio/verdaccio-csr.pem\n\n    access: $all\n    publish: $authenticated\n    unpublish: $authenticated\n    #proxy: npmjs\n\n  '@st*':\n    access: $authenticated\n    publish: $authenticated\n    unpublish: $authenticated\n\n\n\n```\n###\n\n#### 如何使用\n\n#### nginx 反向代理\n\n\nPS: NPM 解决了模块管理问题, 但对管理更新并没有解决的方案, 如果项目数量和依赖模块达到一定数量, 那将是地狱。 verdaccio 也支持 monorepo 管理模式 [Configure to Verdaccio Monorepo](https://github.com/verdaccio/monorepo/blob/master/CONTRIBUTING.md)\n\n\n#### 参考文献\n[Verdaccio home page](https://verdaccio.org/)\n// https://github.com/verdaccio/verdaccio/blob/ebae410c8164ac3e42c73c9d7cec6a8162a74457/src/lib/utils.ts#L142\n[Verdaccio Monorepo](https://github.com/verdaccio/monorepo/blob/master/CONTRIBUTING.md)","source":"_posts/使用verdaccio搭建私有NPM.md","raw":"---\ntitle: 使用 verdaccio 搭建私有 NPM\ndate: 2019-09-28 01:06:18\ncategory: posts\ntags: [verdaccio, npm]\n---\n\n本篇分享如何搭建一个私有 NPM 服务来管理内部模块 \n\n<!-- more -->\n\n#### 为什么要搭建私有 NPM\nNPM (node 包管理器), 用来解决模块管理问题。这使得用们可以很方便的去使用和管理一个模块。NPM 上的包是公开的, 所有人都可以下载。 内部的模块并不能发布到 NPM 上, 那么就需要一个私有的 NPM 来管理内部模块  \n\n这里使用 verdaccio 来搭建。 这是一个从 sinopia frok 过来的一个项目, 目前第4个版本\n\n#### 安装\n```\nnpm i -g verdaccio\n```\n安装完运行 verdaccio \n\n![运行](/images/posts/verdaccio.run.jpg)\n\n第一次执行会生成一个 config 文件  \n\n#### 配置 config\n```\nstorage: ./storage       // 这里会缓存安装过的文件, 下次安装不用到 upstream \nplugins: ./plugins       // 插件\nweb:\n  title: Verdaccio       // 标题\n\nauth:\n  htpasswd:\n    file: ./htpasswd    // 这里记录这用户名和密码 .e.g. clc:$6B6QAAfdF:autocreated 2019-03-28T18:18:47.022Z\n    max_users: 1000     // 用户上限  设置为 -1 禁止添加\n\n# a list of other known repositories we can talk to\n// 这里配置上游, 可以配置多个\n// 你可以为不同的组指定上游, 这将决定包会从哪里下载, 或上传到哪里\nuplinks:\n  taobaoNpm:\n    url: https://registry.npm.taobao.org/     // url\n    max_fails: 5                              // 失败重试次数\n    fail_timeout: 2m                          // 超时时间\n  npmjs:\n    url: https://registry.npmjs.org/\n    max_fails: 5\n    fail_timeout: 2m\n\n// \nurl_prefix: /verdaccio/\n\npackages:\n  '**':\n    # scoped packageslisten:\n  https://localhost:9981\n\nhttps:\n  key:  /root/.config/verdaccio/verdaccio-key.pem\n  cert: /root/.config/verdaccio/verdaccio-cert.pem\n  ca:   /root/.config/verdaccio/verdaccio-csr.pem\n\n    access: $all\n    publish: $authenticated\n    unpublish: $authenticated\n    #proxy: npmjs\n\n  '@st*':\n    access: $authenticated\n    publish: $authenticated\n    unpublish: $authenticated\n\n\n\n```\n###\n\n#### 如何使用\n\n#### nginx 反向代理\n\n\nPS: NPM 解决了模块管理问题, 但对管理更新并没有解决的方案, 如果项目数量和依赖模块达到一定数量, 那将是地狱。 verdaccio 也支持 monorepo 管理模式 [Configure to Verdaccio Monorepo](https://github.com/verdaccio/monorepo/blob/master/CONTRIBUTING.md)\n\n\n#### 参考文献\n[Verdaccio home page](https://verdaccio.org/)\n// https://github.com/verdaccio/verdaccio/blob/ebae410c8164ac3e42c73c9d7cec6a8162a74457/src/lib/utils.ts#L142\n[Verdaccio Monorepo](https://github.com/verdaccio/monorepo/blob/master/CONTRIBUTING.md)","slug":"使用verdaccio搭建私有NPM","published":1,"updated":"2020-04-07T15:20:30.477Z","_id":"ck8nz89p3000wqcnc40bid3ye","comments":1,"layout":"post","photos":[],"link":"","content":"<p>本篇分享如何搭建一个私有 NPM 服务来管理内部模块 </p>\n<a id=\"more\"></a>\n\n<h4 id=\"为什么要搭建私有-NPM\"><a href=\"#为什么要搭建私有-NPM\" class=\"headerlink\" title=\"为什么要搭建私有 NPM\"></a>为什么要搭建私有 NPM</h4><p>NPM (node 包管理器), 用来解决模块管理问题。这使得用们可以很方便的去使用和管理一个模块。NPM 上的包是公开的, 所有人都可以下载。 内部的模块并不能发布到 NPM 上, 那么就需要一个私有的 NPM 来管理内部模块  </p>\n<p>这里使用 verdaccio 来搭建。 这是一个从 sinopia frok 过来的一个项目, 目前第4个版本</p>\n<h4 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm i -g verdaccio</span><br></pre></td></tr></table></figure>\n<p>安装完运行 verdaccio </p>\n<p><img src=\"/images/posts/verdaccio.run.jpg\" alt=\"运行\"></p>\n<p>第一次执行会生成一个 config 文件  </p>\n<h4 id=\"配置-config\"><a href=\"#配置-config\" class=\"headerlink\" title=\"配置 config\"></a>配置 config</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">storage: .&#x2F;storage       &#x2F;&#x2F; 这里会缓存安装过的文件, 下次安装不用到 upstream </span><br><span class=\"line\">plugins: .&#x2F;plugins       &#x2F;&#x2F; 插件</span><br><span class=\"line\">web:</span><br><span class=\"line\">  title: Verdaccio       &#x2F;&#x2F; 标题</span><br><span class=\"line\"></span><br><span class=\"line\">auth:</span><br><span class=\"line\">  htpasswd:</span><br><span class=\"line\">    file: .&#x2F;htpasswd    &#x2F;&#x2F; 这里记录这用户名和密码 .e.g. clc:$6B6QAAfdF:autocreated 2019-03-28T18:18:47.022Z</span><br><span class=\"line\">    max_users: 1000     &#x2F;&#x2F; 用户上限  设置为 -1 禁止添加</span><br><span class=\"line\"></span><br><span class=\"line\"># a list of other known repositories we can talk to</span><br><span class=\"line\">&#x2F;&#x2F; 这里配置上游, 可以配置多个</span><br><span class=\"line\">&#x2F;&#x2F; 你可以为不同的组指定上游, 这将决定包会从哪里下载, 或上传到哪里</span><br><span class=\"line\">uplinks:</span><br><span class=\"line\">  taobaoNpm:</span><br><span class=\"line\">    url: https:&#x2F;&#x2F;registry.npm.taobao.org&#x2F;     &#x2F;&#x2F; url</span><br><span class=\"line\">    max_fails: 5                              &#x2F;&#x2F; 失败重试次数</span><br><span class=\"line\">    fail_timeout: 2m                          &#x2F;&#x2F; 超时时间</span><br><span class=\"line\">  npmjs:</span><br><span class=\"line\">    url: https:&#x2F;&#x2F;registry.npmjs.org&#x2F;</span><br><span class=\"line\">    max_fails: 5</span><br><span class=\"line\">    fail_timeout: 2m</span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;&#x2F; </span><br><span class=\"line\">url_prefix: &#x2F;verdaccio&#x2F;</span><br><span class=\"line\"></span><br><span class=\"line\">packages:</span><br><span class=\"line\">  &#39;**&#39;:</span><br><span class=\"line\">    # scoped packageslisten:</span><br><span class=\"line\">  https:&#x2F;&#x2F;localhost:9981</span><br><span class=\"line\"></span><br><span class=\"line\">https:</span><br><span class=\"line\">  key:  &#x2F;root&#x2F;.config&#x2F;verdaccio&#x2F;verdaccio-key.pem</span><br><span class=\"line\">  cert: &#x2F;root&#x2F;.config&#x2F;verdaccio&#x2F;verdaccio-cert.pem</span><br><span class=\"line\">  ca:   &#x2F;root&#x2F;.config&#x2F;verdaccio&#x2F;verdaccio-csr.pem</span><br><span class=\"line\"></span><br><span class=\"line\">    access: $all</span><br><span class=\"line\">    publish: $authenticated</span><br><span class=\"line\">    unpublish: $authenticated</span><br><span class=\"line\">    #proxy: npmjs</span><br><span class=\"line\"></span><br><span class=\"line\">  &#39;@st*&#39;:</span><br><span class=\"line\">    access: $authenticated</span><br><span class=\"line\">    publish: $authenticated</span><br><span class=\"line\">    unpublish: $authenticated</span><br></pre></td></tr></table></figure>\n<p>###</p>\n<h4 id=\"如何使用\"><a href=\"#如何使用\" class=\"headerlink\" title=\"如何使用\"></a>如何使用</h4><h4 id=\"nginx-反向代理\"><a href=\"#nginx-反向代理\" class=\"headerlink\" title=\"nginx 反向代理\"></a>nginx 反向代理</h4><p>PS: NPM 解决了模块管理问题, 但对管理更新并没有解决的方案, 如果项目数量和依赖模块达到一定数量, 那将是地狱。 verdaccio 也支持 monorepo 管理模式 <a href=\"https://github.com/verdaccio/monorepo/blob/master/CONTRIBUTING.md\" target=\"_blank\" rel=\"noopener\">Configure to Verdaccio Monorepo</a></p>\n<h4 id=\"参考文献\"><a href=\"#参考文献\" class=\"headerlink\" title=\"参考文献\"></a>参考文献</h4><p><a href=\"https://verdaccio.org/\" target=\"_blank\" rel=\"noopener\">Verdaccio home page</a><br>// <a href=\"https://github.com/verdaccio/verdaccio/blob/ebae410c8164ac3e42c73c9d7cec6a8162a74457/src/lib/utils.ts#L142\" target=\"_blank\" rel=\"noopener\">https://github.com/verdaccio/verdaccio/blob/ebae410c8164ac3e42c73c9d7cec6a8162a74457/src/lib/utils.ts#L142</a><br><a href=\"https://github.com/verdaccio/monorepo/blob/master/CONTRIBUTING.md\" target=\"_blank\" rel=\"noopener\">Verdaccio Monorepo</a></p>\n","site":{"data":{}},"length":1679,"excerpt":"<p>本篇分享如何搭建一个私有 NPM 服务来管理内部模块 </p>","more":"<h4 id=\"为什么要搭建私有-NPM\"><a href=\"#为什么要搭建私有-NPM\" class=\"headerlink\" title=\"为什么要搭建私有 NPM\"></a>为什么要搭建私有 NPM</h4><p>NPM (node 包管理器), 用来解决模块管理问题。这使得用们可以很方便的去使用和管理一个模块。NPM 上的包是公开的, 所有人都可以下载。 内部的模块并不能发布到 NPM 上, 那么就需要一个私有的 NPM 来管理内部模块  </p>\n<p>这里使用 verdaccio 来搭建。 这是一个从 sinopia frok 过来的一个项目, 目前第4个版本</p>\n<h4 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm i -g verdaccio</span><br></pre></td></tr></table></figure>\n<p>安装完运行 verdaccio </p>\n<p><img src=\"/images/posts/verdaccio.run.jpg\" alt=\"运行\"></p>\n<p>第一次执行会生成一个 config 文件  </p>\n<h4 id=\"配置-config\"><a href=\"#配置-config\" class=\"headerlink\" title=\"配置 config\"></a>配置 config</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">storage: .&#x2F;storage       &#x2F;&#x2F; 这里会缓存安装过的文件, 下次安装不用到 upstream </span><br><span class=\"line\">plugins: .&#x2F;plugins       &#x2F;&#x2F; 插件</span><br><span class=\"line\">web:</span><br><span class=\"line\">  title: Verdaccio       &#x2F;&#x2F; 标题</span><br><span class=\"line\"></span><br><span class=\"line\">auth:</span><br><span class=\"line\">  htpasswd:</span><br><span class=\"line\">    file: .&#x2F;htpasswd    &#x2F;&#x2F; 这里记录这用户名和密码 .e.g. clc:$6B6QAAfdF:autocreated 2019-03-28T18:18:47.022Z</span><br><span class=\"line\">    max_users: 1000     &#x2F;&#x2F; 用户上限  设置为 -1 禁止添加</span><br><span class=\"line\"></span><br><span class=\"line\"># a list of other known repositories we can talk to</span><br><span class=\"line\">&#x2F;&#x2F; 这里配置上游, 可以配置多个</span><br><span class=\"line\">&#x2F;&#x2F; 你可以为不同的组指定上游, 这将决定包会从哪里下载, 或上传到哪里</span><br><span class=\"line\">uplinks:</span><br><span class=\"line\">  taobaoNpm:</span><br><span class=\"line\">    url: https:&#x2F;&#x2F;registry.npm.taobao.org&#x2F;     &#x2F;&#x2F; url</span><br><span class=\"line\">    max_fails: 5                              &#x2F;&#x2F; 失败重试次数</span><br><span class=\"line\">    fail_timeout: 2m                          &#x2F;&#x2F; 超时时间</span><br><span class=\"line\">  npmjs:</span><br><span class=\"line\">    url: https:&#x2F;&#x2F;registry.npmjs.org&#x2F;</span><br><span class=\"line\">    max_fails: 5</span><br><span class=\"line\">    fail_timeout: 2m</span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;&#x2F; </span><br><span class=\"line\">url_prefix: &#x2F;verdaccio&#x2F;</span><br><span class=\"line\"></span><br><span class=\"line\">packages:</span><br><span class=\"line\">  &#39;**&#39;:</span><br><span class=\"line\">    # scoped packageslisten:</span><br><span class=\"line\">  https:&#x2F;&#x2F;localhost:9981</span><br><span class=\"line\"></span><br><span class=\"line\">https:</span><br><span class=\"line\">  key:  &#x2F;root&#x2F;.config&#x2F;verdaccio&#x2F;verdaccio-key.pem</span><br><span class=\"line\">  cert: &#x2F;root&#x2F;.config&#x2F;verdaccio&#x2F;verdaccio-cert.pem</span><br><span class=\"line\">  ca:   &#x2F;root&#x2F;.config&#x2F;verdaccio&#x2F;verdaccio-csr.pem</span><br><span class=\"line\"></span><br><span class=\"line\">    access: $all</span><br><span class=\"line\">    publish: $authenticated</span><br><span class=\"line\">    unpublish: $authenticated</span><br><span class=\"line\">    #proxy: npmjs</span><br><span class=\"line\"></span><br><span class=\"line\">  &#39;@st*&#39;:</span><br><span class=\"line\">    access: $authenticated</span><br><span class=\"line\">    publish: $authenticated</span><br><span class=\"line\">    unpublish: $authenticated</span><br></pre></td></tr></table></figure>\n<p>###</p>\n<h4 id=\"如何使用\"><a href=\"#如何使用\" class=\"headerlink\" title=\"如何使用\"></a>如何使用</h4><h4 id=\"nginx-反向代理\"><a href=\"#nginx-反向代理\" class=\"headerlink\" title=\"nginx 反向代理\"></a>nginx 反向代理</h4><p>PS: NPM 解决了模块管理问题, 但对管理更新并没有解决的方案, 如果项目数量和依赖模块达到一定数量, 那将是地狱。 verdaccio 也支持 monorepo 管理模式 <a href=\"https://github.com/verdaccio/monorepo/blob/master/CONTRIBUTING.md\" target=\"_blank\" rel=\"noopener\">Configure to Verdaccio Monorepo</a></p>\n<h4 id=\"参考文献\"><a href=\"#参考文献\" class=\"headerlink\" title=\"参考文献\"></a>参考文献</h4><p><a href=\"https://verdaccio.org/\" target=\"_blank\" rel=\"noopener\">Verdaccio home page</a><br>// <a href=\"https://github.com/verdaccio/verdaccio/blob/ebae410c8164ac3e42c73c9d7cec6a8162a74457/src/lib/utils.ts#L142\" target=\"_blank\" rel=\"noopener\">https://github.com/verdaccio/verdaccio/blob/ebae410c8164ac3e42c73c9d7cec6a8162a74457/src/lib/utils.ts#L142</a><br><a href=\"https://github.com/verdaccio/monorepo/blob/master/CONTRIBUTING.md\" target=\"_blank\" rel=\"noopener\">Verdaccio Monorepo</a></p>"},{"title":"前端安全-CSRF","date":"2019-01-21T12:12:26.000Z","_content":"\n随着 Web 高速发展, 越来越多的线下业务都转移到线上。Web 程序变得越来越复杂同时安全也成为重中之重。本文将带你认识CSRF, 和其带来的严重危害, 应该如何来进行防御  \n   \n<!-- more -->\n\n#### 什么是 CSRF \nCSRF (Cross-site request forgery) 跨站请求伪造。 冒用用户身份凭证, 对目标网站进行设置。\n\n#### CSRF 的攻击过程\n- 用户登录了 a.com, 浏览器保留了登录凭证\n- 攻击者引诱用户访问攻击网站 b.com\n- b.com 向 a.com 发出了一个请求, 例如: a.com?add-user=xxxxxx\n- a.com 接收到请求, 进行验证, 有有效凭证, a.com 认为是用户发送的请求\n- a.com 执行了操作 add-user\n- 攻击完成, 用户并不知道\n\n<!-- more -->\n\n#### 攻击类型\n- Get 类型\n```\n<img src=\"https://bank.com?act=xxx\">\n```\n用户访问页面带有如上图片, 浏览器自动请求地址, 攻击完成  \n\n- Post 类型\n```\n<form action=\"https://bank.com\" method=\"POST\">\n  <input type=\"hidden\" name=\"account\" value=\"xiaoming\" />\n  <input type=\"hidden\" name=\"amount\" value=\"100\" />\n  <input type=\"hidden\" name=\"act\" value=\"transfer\" />\n</form>\n<script> document.forms[0].submit(); </script> \n```\n用户访问页面, 表单自动提交, 攻击完成    \n\n- 链接类型\n```\n<a href=\"https://bank.com?act=xxx\">点我送100话费</a>\n```\n链接类型比较少见, 比起前两种一打开页面就中招, 这种还需要用户进行点击, 才能完成攻击  \n这种类型比较可能出现在社区网站或者论坛, 直接发起同域攻击或者跳到攻击页面  \n这也是社区网站对外链都是严格控制或者不可以发布外链的原因\n\n\n#### 攻击场景\n有一天, 小明登录了 Gmail 邮箱, 悠闲的看着邮件。 突然收到了一封陌生邮件, 特价甩卖, 比特币 888 元一个。  \n英明神武的小明肯定不相信, 但还是点开了链接进去瞧瞧。进入后是一个空页面, 于是小明关掉网页。  \n过了一段时间, 小明突然发现自己某网站的密码被修改了, 里面的金币也被消费完了。  \n修改密码需要通过邮箱, 小明回想起之前的奇怪邮件, 找回那个空白页面, 打开源码一看 \n```\n<form method=\"POST\" action=\"https://mail.google.com/mail/h/ewt1jmuj4ddv/?v=prf\" enctype=\"multipart/form-data\"> \n    <input type=\"hidden\" name=\"cf2_emc\" value=\"true\"/> \n    <input type=\"hidden\" name=\"cf2_email\" value=\"evilinbox@mail.com\"/> \n    <input type=\"hidden\" name=\"cf1_from\" value=\"\"/> \n</form> \n<script> \n    document.forms[0].submit();\n</script>\n```\n这个页面提交了一个请求, 添加了一个过滤规则, 所有邮件都将转发至 evilinbox#mail.com\n看似风平浪静的页面, 其实黑客已经得手了(所以为什么点开邮件的链接会有安全提示)。 \n这是一个真实的攻击页面 [Google Gmail E-mail Hijack Technique](https://www.gnucitizen.org/blog/google-gmail-e-mail-hijack-technique/)   \n\n\n#### CSRF 特点\n- 攻击一般从第三方发起, 也有可能本域发起\n- 攻击者只能冒用用户凭证进行操作, 无法窃取数据\n- 需要诱导用户进入攻击网站\n\n#### 防御策略\n从攻击原理看, 我们并没有办法阻止CSRF攻击的发生, 但是我们可以针对CSRF的特点进行防御  \n\n**1. Referer**\n\nCSRF 攻击一般从第三方发起, 针对这一特点, 可以通过阻止外域调用来进行防御  \n浏览器在发起请求时会在头部添加 referer 字段, 表示来源。可以通过判断 referer 来判断请求是否从外域发起, 并拒绝请求。例如这样一个接口 POST bank.com?transfer=1000, 黑客从第三方 hacku.com 发起时, referer 是指向该域名的  \n\n这种方法只需要后端进行过滤, 前端不用处理, 实施起来比较简单。但这并不是一个可靠的办法, referer 字段是由浏览器添加上去的, 我们不能将安全都寄托在浏览器  \n\n大部分现代浏览器都支持了 Referrer Policy ([Referrer-Policy - HTTP | MDN](https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Referrer-Policy)) 策略, 允许去除 referrer 字段  \n```\n<meta name=\"referrer\" content=\"no-referrer\"> // 全局\n<a href=\"http://example.com\" rel=\"noreferrer\"> // 单条\n```\n如果攻击页面除移了 referer, 后端就得不到该值无法进行过滤。\n\n{% note info %}\nreferer 会记录来源地址, 存在用户隐私问题。可能存在网站自身除移掉该字段的情况 [Referer 隐私问题](https://75.team/post/everything-you-could-ever-want-to-know-and-more-about-controlling-the-referer-header-fastmail-blog.html)\n{% endnote %}\n\n\n**2. Dobule cookies**  \nCSRF 通过冒用凭证进行攻击, 但无法获取到数据, 针对这一特点, 对 cookie 进行2次验证。  \n\n**实现流程**\n- 用户登录后返回 cookie, 并带有csrfcookie=eW1kISE=\n- 客户端发送接口时, 需要从 cookies 获取 csrfcookie, 并加入到接口参数发送 (POST //hostname.comc?srfcookie=eW1kISE=)\n- 后端验证参数 csrfcookie 是否与 cookie 一致\n\n该方法实施起来相对简单, 也无需额外存储。但只适用与接口是同域, 例如 a.com 的接口地址是 api.a.com, 就实施。这是非常常见的情况。当然如果是 domain=a.com, 将 cookies 存在顶域是可以实现的, 但通常不会这么做\n\n{% note info %}\n如果有 XSS 漏洞防御无效\n{% endnote %}\n\n**3. CSRF token**\n同样针对 CSRF 无法获取数据的特点, 接口需要加入从页面获取数据做为参数  \n\n**实现流程**\n- 用户打开页面时, 由后端生成加密token并插入到页面\n```\n<input type=\"hidden\" value=\"eW1kISE=\" name=\"token\">\n```\n- 客户端发送请求时, 携带该token\n```\nconst token = document.querySelector('token').value\nfetch('https://yourdomain.com', {\n  method: 'POST',\n  headers: new Headers({\n    'Content-Type': 'application/json'\n  }),\n  body: JSON.stringify({\n    token,\n    sid: 'xxxx'\n  })\n})\n```\n- 后端获取 token, 校验是否一致\n\n该方法可以有效防御, 相比起 referer 更加安全, 但实施起来比较麻烦, 需要后端为每个页面生成 token 并插入到页面。 token 更新也比较麻烦\n\n{% note info %}\n如果有 XSS 漏洞防御无效\n{% endnote %}\n\n\n**4. Header token**\n这也是使用 token 进行验证, 和上一种不同在于 token 放在头部\n\n**实现流程**\n- 用户登录后后端生成加密 token 并返回, 客户端取得 token=eW1kISE= 并存在 Storage\n```\n// login 取得 token 存储\nfetch('https://a.com?a=login')\n.then(res => {\n  window.localStorage.setItem('token', res.token)\n})\n```\n- 客户端发送接口时, 从 Storage 取得 token, 并加入到自定义头部 \n```\n// 发送请求时加入 token\nfetch('https://a.com?a=send', {\n  method: 'POST',\n  headers: new Headers({\n    'token': window.localStorage.getItem('token')\n  }),\n})\n```\n- 后端读取 header token, 解密字段, 校验token是否失效, 并进行对比\n\n这种方法也可以有效的防御, token 更新相对简单，可以在请求接口时统一添加 header。但可能存在有些组件使用 form 提交, 无法加入自定义 header。\n\n和上一种方法一样, 如果你的网站存在 XSS 漏洞的话防御就失效, 所以很多金融类网站要求再次输入密码, 进行2次身份验证  \n\n\n**5. SameSite Cookies**\nSameSite Cookie 允许服务器要求某个 cookie 在跨站请求时不会被发送。可以阻止从第三方发起时发送 cookie\n```\nSet-Cookie: key=value; SameSite=Strict\n```\nSameSite 有3个值\n- None 同域跨域都会发送\n- Strict 只在同域时发送, 从外域跳转进来不发送, 例如从搜索引擎进入时\n- Lax 也是只在同域时发送, 相对于 strict 较宽松, Same-site cookies 将会为一些跨站子请求保留, 如图片加载或者frames的调用，但只有当用户从外部站点导航到URL时才会发送。如link链接\n\n{% note info %}\n在新版本的浏览器中，SameSite的默认属性是SameSite=Lax。换句话说，当Cookie没有设置SameSite属性时，将会视作SameSite属性被设置为Lax——这意味着Cookies将会在当前用户使用时被自动发送。如果想要指定Cookies在同站、跨站请求都被发送，那么需要明确指定SameSite为None\n{% endnote %}\n\n如果设置了 strict, 浏览器任何跨域都不会携带 cookie, 即使跳转进入也不会携带。 那也就没有 CSRF 攻击的机会了。 对于子域的跳转, cookie 也不会保留, 用户必须重新登录, 对于用户来讲体验不好\n\n如果设置 lax, 则外部跳转时会保留 cookie。 用户从外部或则子域进来时不需要重新登录\n\nSameSite不支持子域名, 但项目很常见的一种情况, 站点和接口不同域名, 例如 a.com 接口地址是 api.a.com。对于这种情况就不能通过SameSite来防御, 但如果相同的话 SameSite 实施也比较方便\n\n#### 一些历史事件\n[Gmail security hijack](https://www.davidairey.com/google-gmail-security-hijack/) \n[Youtube notifications](https://cloud.tencent.com/developer/article/1425657)\n[wordpress CSRF to Remote Code Execution](https://blog.ripstech.com/2019/wordpress-csrf-to-rce/)\n\n#### 总结\nCSRF 是一种危害较大的攻击, 以上防御方法可以很大程度的防御攻击。各方法的实施难度, 效果, 适用情况都不同。 没有完美的解决方案, 我们只能通过实际情况选择最合适的方法。\n\n#### 参考文献\n[Wiki CSRF](http://en.wikipedia.org/wiki/Cross-site_request_forgery)\n[IBM CSRF 攻击的应对之道](https://www.ibm.com/developerworks/cn/web/1102_niugang_csrf/)\n[MDN SameSite Cookie](hhttps://developer.mozilla.org/zh-CN/docs/Web/HTTP/Cookies#SameSite_Cookies)\n[MDN Same-origin-policy](https://developer.mozilla.org/zh-CN/docs/Web/Security/Same-origin_policy)","source":"_posts/前端安全-CSRF.md","raw":"---\ntitle: 前端安全-CSRF\ndate: 2019-01-21 20:12:26\ncategory: posts\ntags: [前端安全,CSRF]\n---\n\n随着 Web 高速发展, 越来越多的线下业务都转移到线上。Web 程序变得越来越复杂同时安全也成为重中之重。本文将带你认识CSRF, 和其带来的严重危害, 应该如何来进行防御  \n   \n<!-- more -->\n\n#### 什么是 CSRF \nCSRF (Cross-site request forgery) 跨站请求伪造。 冒用用户身份凭证, 对目标网站进行设置。\n\n#### CSRF 的攻击过程\n- 用户登录了 a.com, 浏览器保留了登录凭证\n- 攻击者引诱用户访问攻击网站 b.com\n- b.com 向 a.com 发出了一个请求, 例如: a.com?add-user=xxxxxx\n- a.com 接收到请求, 进行验证, 有有效凭证, a.com 认为是用户发送的请求\n- a.com 执行了操作 add-user\n- 攻击完成, 用户并不知道\n\n<!-- more -->\n\n#### 攻击类型\n- Get 类型\n```\n<img src=\"https://bank.com?act=xxx\">\n```\n用户访问页面带有如上图片, 浏览器自动请求地址, 攻击完成  \n\n- Post 类型\n```\n<form action=\"https://bank.com\" method=\"POST\">\n  <input type=\"hidden\" name=\"account\" value=\"xiaoming\" />\n  <input type=\"hidden\" name=\"amount\" value=\"100\" />\n  <input type=\"hidden\" name=\"act\" value=\"transfer\" />\n</form>\n<script> document.forms[0].submit(); </script> \n```\n用户访问页面, 表单自动提交, 攻击完成    \n\n- 链接类型\n```\n<a href=\"https://bank.com?act=xxx\">点我送100话费</a>\n```\n链接类型比较少见, 比起前两种一打开页面就中招, 这种还需要用户进行点击, 才能完成攻击  \n这种类型比较可能出现在社区网站或者论坛, 直接发起同域攻击或者跳到攻击页面  \n这也是社区网站对外链都是严格控制或者不可以发布外链的原因\n\n\n#### 攻击场景\n有一天, 小明登录了 Gmail 邮箱, 悠闲的看着邮件。 突然收到了一封陌生邮件, 特价甩卖, 比特币 888 元一个。  \n英明神武的小明肯定不相信, 但还是点开了链接进去瞧瞧。进入后是一个空页面, 于是小明关掉网页。  \n过了一段时间, 小明突然发现自己某网站的密码被修改了, 里面的金币也被消费完了。  \n修改密码需要通过邮箱, 小明回想起之前的奇怪邮件, 找回那个空白页面, 打开源码一看 \n```\n<form method=\"POST\" action=\"https://mail.google.com/mail/h/ewt1jmuj4ddv/?v=prf\" enctype=\"multipart/form-data\"> \n    <input type=\"hidden\" name=\"cf2_emc\" value=\"true\"/> \n    <input type=\"hidden\" name=\"cf2_email\" value=\"evilinbox@mail.com\"/> \n    <input type=\"hidden\" name=\"cf1_from\" value=\"\"/> \n</form> \n<script> \n    document.forms[0].submit();\n</script>\n```\n这个页面提交了一个请求, 添加了一个过滤规则, 所有邮件都将转发至 evilinbox#mail.com\n看似风平浪静的页面, 其实黑客已经得手了(所以为什么点开邮件的链接会有安全提示)。 \n这是一个真实的攻击页面 [Google Gmail E-mail Hijack Technique](https://www.gnucitizen.org/blog/google-gmail-e-mail-hijack-technique/)   \n\n\n#### CSRF 特点\n- 攻击一般从第三方发起, 也有可能本域发起\n- 攻击者只能冒用用户凭证进行操作, 无法窃取数据\n- 需要诱导用户进入攻击网站\n\n#### 防御策略\n从攻击原理看, 我们并没有办法阻止CSRF攻击的发生, 但是我们可以针对CSRF的特点进行防御  \n\n**1. Referer**\n\nCSRF 攻击一般从第三方发起, 针对这一特点, 可以通过阻止外域调用来进行防御  \n浏览器在发起请求时会在头部添加 referer 字段, 表示来源。可以通过判断 referer 来判断请求是否从外域发起, 并拒绝请求。例如这样一个接口 POST bank.com?transfer=1000, 黑客从第三方 hacku.com 发起时, referer 是指向该域名的  \n\n这种方法只需要后端进行过滤, 前端不用处理, 实施起来比较简单。但这并不是一个可靠的办法, referer 字段是由浏览器添加上去的, 我们不能将安全都寄托在浏览器  \n\n大部分现代浏览器都支持了 Referrer Policy ([Referrer-Policy - HTTP | MDN](https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Referrer-Policy)) 策略, 允许去除 referrer 字段  \n```\n<meta name=\"referrer\" content=\"no-referrer\"> // 全局\n<a href=\"http://example.com\" rel=\"noreferrer\"> // 单条\n```\n如果攻击页面除移了 referer, 后端就得不到该值无法进行过滤。\n\n{% note info %}\nreferer 会记录来源地址, 存在用户隐私问题。可能存在网站自身除移掉该字段的情况 [Referer 隐私问题](https://75.team/post/everything-you-could-ever-want-to-know-and-more-about-controlling-the-referer-header-fastmail-blog.html)\n{% endnote %}\n\n\n**2. Dobule cookies**  \nCSRF 通过冒用凭证进行攻击, 但无法获取到数据, 针对这一特点, 对 cookie 进行2次验证。  \n\n**实现流程**\n- 用户登录后返回 cookie, 并带有csrfcookie=eW1kISE=\n- 客户端发送接口时, 需要从 cookies 获取 csrfcookie, 并加入到接口参数发送 (POST //hostname.comc?srfcookie=eW1kISE=)\n- 后端验证参数 csrfcookie 是否与 cookie 一致\n\n该方法实施起来相对简单, 也无需额外存储。但只适用与接口是同域, 例如 a.com 的接口地址是 api.a.com, 就实施。这是非常常见的情况。当然如果是 domain=a.com, 将 cookies 存在顶域是可以实现的, 但通常不会这么做\n\n{% note info %}\n如果有 XSS 漏洞防御无效\n{% endnote %}\n\n**3. CSRF token**\n同样针对 CSRF 无法获取数据的特点, 接口需要加入从页面获取数据做为参数  \n\n**实现流程**\n- 用户打开页面时, 由后端生成加密token并插入到页面\n```\n<input type=\"hidden\" value=\"eW1kISE=\" name=\"token\">\n```\n- 客户端发送请求时, 携带该token\n```\nconst token = document.querySelector('token').value\nfetch('https://yourdomain.com', {\n  method: 'POST',\n  headers: new Headers({\n    'Content-Type': 'application/json'\n  }),\n  body: JSON.stringify({\n    token,\n    sid: 'xxxx'\n  })\n})\n```\n- 后端获取 token, 校验是否一致\n\n该方法可以有效防御, 相比起 referer 更加安全, 但实施起来比较麻烦, 需要后端为每个页面生成 token 并插入到页面。 token 更新也比较麻烦\n\n{% note info %}\n如果有 XSS 漏洞防御无效\n{% endnote %}\n\n\n**4. Header token**\n这也是使用 token 进行验证, 和上一种不同在于 token 放在头部\n\n**实现流程**\n- 用户登录后后端生成加密 token 并返回, 客户端取得 token=eW1kISE= 并存在 Storage\n```\n// login 取得 token 存储\nfetch('https://a.com?a=login')\n.then(res => {\n  window.localStorage.setItem('token', res.token)\n})\n```\n- 客户端发送接口时, 从 Storage 取得 token, 并加入到自定义头部 \n```\n// 发送请求时加入 token\nfetch('https://a.com?a=send', {\n  method: 'POST',\n  headers: new Headers({\n    'token': window.localStorage.getItem('token')\n  }),\n})\n```\n- 后端读取 header token, 解密字段, 校验token是否失效, 并进行对比\n\n这种方法也可以有效的防御, token 更新相对简单，可以在请求接口时统一添加 header。但可能存在有些组件使用 form 提交, 无法加入自定义 header。\n\n和上一种方法一样, 如果你的网站存在 XSS 漏洞的话防御就失效, 所以很多金融类网站要求再次输入密码, 进行2次身份验证  \n\n\n**5. SameSite Cookies**\nSameSite Cookie 允许服务器要求某个 cookie 在跨站请求时不会被发送。可以阻止从第三方发起时发送 cookie\n```\nSet-Cookie: key=value; SameSite=Strict\n```\nSameSite 有3个值\n- None 同域跨域都会发送\n- Strict 只在同域时发送, 从外域跳转进来不发送, 例如从搜索引擎进入时\n- Lax 也是只在同域时发送, 相对于 strict 较宽松, Same-site cookies 将会为一些跨站子请求保留, 如图片加载或者frames的调用，但只有当用户从外部站点导航到URL时才会发送。如link链接\n\n{% note info %}\n在新版本的浏览器中，SameSite的默认属性是SameSite=Lax。换句话说，当Cookie没有设置SameSite属性时，将会视作SameSite属性被设置为Lax——这意味着Cookies将会在当前用户使用时被自动发送。如果想要指定Cookies在同站、跨站请求都被发送，那么需要明确指定SameSite为None\n{% endnote %}\n\n如果设置了 strict, 浏览器任何跨域都不会携带 cookie, 即使跳转进入也不会携带。 那也就没有 CSRF 攻击的机会了。 对于子域的跳转, cookie 也不会保留, 用户必须重新登录, 对于用户来讲体验不好\n\n如果设置 lax, 则外部跳转时会保留 cookie。 用户从外部或则子域进来时不需要重新登录\n\nSameSite不支持子域名, 但项目很常见的一种情况, 站点和接口不同域名, 例如 a.com 接口地址是 api.a.com。对于这种情况就不能通过SameSite来防御, 但如果相同的话 SameSite 实施也比较方便\n\n#### 一些历史事件\n[Gmail security hijack](https://www.davidairey.com/google-gmail-security-hijack/) \n[Youtube notifications](https://cloud.tencent.com/developer/article/1425657)\n[wordpress CSRF to Remote Code Execution](https://blog.ripstech.com/2019/wordpress-csrf-to-rce/)\n\n#### 总结\nCSRF 是一种危害较大的攻击, 以上防御方法可以很大程度的防御攻击。各方法的实施难度, 效果, 适用情况都不同。 没有完美的解决方案, 我们只能通过实际情况选择最合适的方法。\n\n#### 参考文献\n[Wiki CSRF](http://en.wikipedia.org/wiki/Cross-site_request_forgery)\n[IBM CSRF 攻击的应对之道](https://www.ibm.com/developerworks/cn/web/1102_niugang_csrf/)\n[MDN SameSite Cookie](hhttps://developer.mozilla.org/zh-CN/docs/Web/HTTP/Cookies#SameSite_Cookies)\n[MDN Same-origin-policy](https://developer.mozilla.org/zh-CN/docs/Web/Security/Same-origin_policy)","slug":"前端安全-CSRF","published":1,"updated":"2020-04-04T09:02:48.853Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck8nz89sa000xqcnc0u8d1end","content":"<p>随着 Web 高速发展, 越来越多的线下业务都转移到线上。Web 程序变得越来越复杂同时安全也成为重中之重。本文将带你认识CSRF, 和其带来的严重危害, 应该如何来进行防御  </p>\n<a id=\"more\"></a>\n\n<h4 id=\"什么是-CSRF\"><a href=\"#什么是-CSRF\" class=\"headerlink\" title=\"什么是 CSRF\"></a>什么是 CSRF</h4><p>CSRF (Cross-site request forgery) 跨站请求伪造。 冒用用户身份凭证, 对目标网站进行设置。</p>\n<h4 id=\"CSRF-的攻击过程\"><a href=\"#CSRF-的攻击过程\" class=\"headerlink\" title=\"CSRF 的攻击过程\"></a>CSRF 的攻击过程</h4><ul>\n<li>用户登录了 a.com, 浏览器保留了登录凭证</li>\n<li>攻击者引诱用户访问攻击网站 b.com</li>\n<li>b.com 向 a.com 发出了一个请求, 例如: a.com?add-user=xxxxxx</li>\n<li>a.com 接收到请求, 进行验证, 有有效凭证, a.com 认为是用户发送的请求</li>\n<li>a.com 执行了操作 add-user</li>\n<li>攻击完成, 用户并不知道</li>\n</ul>\n<!-- more -->\n\n<h4 id=\"攻击类型\"><a href=\"#攻击类型\" class=\"headerlink\" title=\"攻击类型\"></a>攻击类型</h4><ul>\n<li><p>Get 类型</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;img src&#x3D;&quot;https:&#x2F;&#x2F;bank.com?act&#x3D;xxx&quot;&gt;</span><br></pre></td></tr></table></figure>\n<p>用户访问页面带有如上图片, 浏览器自动请求地址, 攻击完成  </p>\n</li>\n<li><p>Post 类型</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;form action&#x3D;&quot;https:&#x2F;&#x2F;bank.com&quot; method&#x3D;&quot;POST&quot;&gt;</span><br><span class=\"line\">  &lt;input type&#x3D;&quot;hidden&quot; name&#x3D;&quot;account&quot; value&#x3D;&quot;xiaoming&quot; &#x2F;&gt;</span><br><span class=\"line\">  &lt;input type&#x3D;&quot;hidden&quot; name&#x3D;&quot;amount&quot; value&#x3D;&quot;100&quot; &#x2F;&gt;</span><br><span class=\"line\">  &lt;input type&#x3D;&quot;hidden&quot; name&#x3D;&quot;act&quot; value&#x3D;&quot;transfer&quot; &#x2F;&gt;</span><br><span class=\"line\">&lt;&#x2F;form&gt;</span><br><span class=\"line\">&lt;script&gt; document.forms[0].submit(); &lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>\n<p>用户访问页面, 表单自动提交, 攻击完成    </p>\n</li>\n<li><p>链接类型</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;a href&#x3D;&quot;https:&#x2F;&#x2F;bank.com?act&#x3D;xxx&quot;&gt;点我送100话费&lt;&#x2F;a&gt;</span><br></pre></td></tr></table></figure>\n<p>链接类型比较少见, 比起前两种一打开页面就中招, 这种还需要用户进行点击, 才能完成攻击<br>这种类型比较可能出现在社区网站或者论坛, 直接发起同域攻击或者跳到攻击页面<br>这也是社区网站对外链都是严格控制或者不可以发布外链的原因</p>\n</li>\n</ul>\n<h4 id=\"攻击场景\"><a href=\"#攻击场景\" class=\"headerlink\" title=\"攻击场景\"></a>攻击场景</h4><p>有一天, 小明登录了 Gmail 邮箱, 悠闲的看着邮件。 突然收到了一封陌生邮件, 特价甩卖, 比特币 888 元一个。<br>英明神武的小明肯定不相信, 但还是点开了链接进去瞧瞧。进入后是一个空页面, 于是小明关掉网页。<br>过了一段时间, 小明突然发现自己某网站的密码被修改了, 里面的金币也被消费完了。<br>修改密码需要通过邮箱, 小明回想起之前的奇怪邮件, 找回那个空白页面, 打开源码一看 </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;form method&#x3D;&quot;POST&quot; action&#x3D;&quot;https:&#x2F;&#x2F;mail.google.com&#x2F;mail&#x2F;h&#x2F;ewt1jmuj4ddv&#x2F;?v&#x3D;prf&quot; enctype&#x3D;&quot;multipart&#x2F;form-data&quot;&gt; </span><br><span class=\"line\">    &lt;input type&#x3D;&quot;hidden&quot; name&#x3D;&quot;cf2_emc&quot; value&#x3D;&quot;true&quot;&#x2F;&gt; </span><br><span class=\"line\">    &lt;input type&#x3D;&quot;hidden&quot; name&#x3D;&quot;cf2_email&quot; value&#x3D;&quot;evilinbox@mail.com&quot;&#x2F;&gt; </span><br><span class=\"line\">    &lt;input type&#x3D;&quot;hidden&quot; name&#x3D;&quot;cf1_from&quot; value&#x3D;&quot;&quot;&#x2F;&gt; </span><br><span class=\"line\">&lt;&#x2F;form&gt; </span><br><span class=\"line\">&lt;script&gt; </span><br><span class=\"line\">    document.forms[0].submit();</span><br><span class=\"line\">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>\n<p>这个页面提交了一个请求, 添加了一个过滤规则, 所有邮件都将转发至 evilinbox#mail.com<br>看似风平浪静的页面, 其实黑客已经得手了(所以为什么点开邮件的链接会有安全提示)。<br>这是一个真实的攻击页面 <a href=\"https://www.gnucitizen.org/blog/google-gmail-e-mail-hijack-technique/\" target=\"_blank\" rel=\"noopener\">Google Gmail E-mail Hijack Technique</a>   </p>\n<h4 id=\"CSRF-特点\"><a href=\"#CSRF-特点\" class=\"headerlink\" title=\"CSRF 特点\"></a>CSRF 特点</h4><ul>\n<li>攻击一般从第三方发起, 也有可能本域发起</li>\n<li>攻击者只能冒用用户凭证进行操作, 无法窃取数据</li>\n<li>需要诱导用户进入攻击网站</li>\n</ul>\n<h4 id=\"防御策略\"><a href=\"#防御策略\" class=\"headerlink\" title=\"防御策略\"></a>防御策略</h4><p>从攻击原理看, 我们并没有办法阻止CSRF攻击的发生, 但是我们可以针对CSRF的特点进行防御  </p>\n<p><strong>1. Referer</strong></p>\n<p>CSRF 攻击一般从第三方发起, 针对这一特点, 可以通过阻止外域调用来进行防御<br>浏览器在发起请求时会在头部添加 referer 字段, 表示来源。可以通过判断 referer 来判断请求是否从外域发起, 并拒绝请求。例如这样一个接口 POST bank.com?transfer=1000, 黑客从第三方 hacku.com 发起时, referer 是指向该域名的  </p>\n<p>这种方法只需要后端进行过滤, 前端不用处理, 实施起来比较简单。但这并不是一个可靠的办法, referer 字段是由浏览器添加上去的, 我们不能将安全都寄托在浏览器  </p>\n<p>大部分现代浏览器都支持了 Referrer Policy (<a href=\"https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Referrer-Policy\" target=\"_blank\" rel=\"noopener\">Referrer-Policy - HTTP | MDN</a>) 策略, 允许去除 referrer 字段  </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;meta name&#x3D;&quot;referrer&quot; content&#x3D;&quot;no-referrer&quot;&gt; &#x2F;&#x2F; 全局</span><br><span class=\"line\">&lt;a href&#x3D;&quot;http:&#x2F;&#x2F;example.com&quot; rel&#x3D;&quot;noreferrer&quot;&gt; &#x2F;&#x2F; 单条</span><br></pre></td></tr></table></figure>\n<p>如果攻击页面除移了 referer, 后端就得不到该值无法进行过滤。</p>\n<div class=\"note info\">\n            <p>referer 会记录来源地址, 存在用户隐私问题。可能存在网站自身除移掉该字段的情况 <a href=\"https://75.team/post/everything-you-could-ever-want-to-know-and-more-about-controlling-the-referer-header-fastmail-blog.html\" target=\"_blank\" rel=\"noopener\">Referer 隐私问题</a></p>\n          </div>\n\n\n<p><strong>2. Dobule cookies</strong><br>CSRF 通过冒用凭证进行攻击, 但无法获取到数据, 针对这一特点, 对 cookie 进行2次验证。  </p>\n<p><strong>实现流程</strong></p>\n<ul>\n<li>用户登录后返回 cookie, 并带有csrfcookie=eW1kISE=</li>\n<li>客户端发送接口时, 需要从 cookies 获取 csrfcookie, 并加入到接口参数发送 (POST //hostname.comc?srfcookie=eW1kISE=)</li>\n<li>后端验证参数 csrfcookie 是否与 cookie 一致</li>\n</ul>\n<p>该方法实施起来相对简单, 也无需额外存储。但只适用与接口是同域, 例如 a.com 的接口地址是 api.a.com, 就实施。这是非常常见的情况。当然如果是 domain=a.com, 将 cookies 存在顶域是可以实现的, 但通常不会这么做</p>\n<div class=\"note info\">\n            <p>如果有 XSS 漏洞防御无效</p>\n          </div>\n\n<p><strong>3. CSRF token</strong><br>同样针对 CSRF 无法获取数据的特点, 接口需要加入从页面获取数据做为参数  </p>\n<p><strong>实现流程</strong></p>\n<ul>\n<li>用户打开页面时, 由后端生成加密token并插入到页面<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;input type&#x3D;&quot;hidden&quot; value&#x3D;&quot;eW1kISE&#x3D;&quot; name&#x3D;&quot;token&quot;&gt;</span><br></pre></td></tr></table></figure></li>\n<li>客户端发送请求时, 携带该token<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">const token &#x3D; document.querySelector(&#39;token&#39;).value</span><br><span class=\"line\">fetch(&#39;https:&#x2F;&#x2F;yourdomain.com&#39;, &#123;</span><br><span class=\"line\">  method: &#39;POST&#39;,</span><br><span class=\"line\">  headers: new Headers(&#123;</span><br><span class=\"line\">    &#39;Content-Type&#39;: &#39;application&#x2F;json&#39;</span><br><span class=\"line\">  &#125;),</span><br><span class=\"line\">  body: JSON.stringify(&#123;</span><br><span class=\"line\">    token,</span><br><span class=\"line\">    sid: &#39;xxxx&#39;</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure></li>\n<li>后端获取 token, 校验是否一致</li>\n</ul>\n<p>该方法可以有效防御, 相比起 referer 更加安全, 但实施起来比较麻烦, 需要后端为每个页面生成 token 并插入到页面。 token 更新也比较麻烦</p>\n<div class=\"note info\">\n            <p>如果有 XSS 漏洞防御无效</p>\n          </div>\n\n\n<p><strong>4. Header token</strong><br>这也是使用 token 进行验证, 和上一种不同在于 token 放在头部</p>\n<p><strong>实现流程</strong></p>\n<ul>\n<li>用户登录后后端生成加密 token 并返回, 客户端取得 token=eW1kISE= 并存在 Storage<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#x2F;&#x2F; login 取得 token 存储</span><br><span class=\"line\">fetch(&#39;https:&#x2F;&#x2F;a.com?a&#x3D;login&#39;)</span><br><span class=\"line\">.then(res &#x3D;&gt; &#123;</span><br><span class=\"line\">  window.localStorage.setItem(&#39;token&#39;, res.token)</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure></li>\n<li>客户端发送接口时, 从 Storage 取得 token, 并加入到自定义头部 <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#x2F;&#x2F; 发送请求时加入 token</span><br><span class=\"line\">fetch(&#39;https:&#x2F;&#x2F;a.com?a&#x3D;send&#39;, &#123;</span><br><span class=\"line\">  method: &#39;POST&#39;,</span><br><span class=\"line\">  headers: new Headers(&#123;</span><br><span class=\"line\">    &#39;token&#39;: window.localStorage.getItem(&#39;token&#39;)</span><br><span class=\"line\">  &#125;),</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure></li>\n<li>后端读取 header token, 解密字段, 校验token是否失效, 并进行对比</li>\n</ul>\n<p>这种方法也可以有效的防御, token 更新相对简单，可以在请求接口时统一添加 header。但可能存在有些组件使用 form 提交, 无法加入自定义 header。</p>\n<p>和上一种方法一样, 如果你的网站存在 XSS 漏洞的话防御就失效, 所以很多金融类网站要求再次输入密码, 进行2次身份验证  </p>\n<p><strong>5. SameSite Cookies</strong><br>SameSite Cookie 允许服务器要求某个 cookie 在跨站请求时不会被发送。可以阻止从第三方发起时发送 cookie</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Set-Cookie: key&#x3D;value; SameSite&#x3D;Strict</span><br></pre></td></tr></table></figure>\n<p>SameSite 有3个值</p>\n<ul>\n<li>None 同域跨域都会发送</li>\n<li>Strict 只在同域时发送, 从外域跳转进来不发送, 例如从搜索引擎进入时</li>\n<li>Lax 也是只在同域时发送, 相对于 strict 较宽松, Same-site cookies 将会为一些跨站子请求保留, 如图片加载或者frames的调用，但只有当用户从外部站点导航到URL时才会发送。如link链接</li>\n</ul>\n<div class=\"note info\">\n            <p>在新版本的浏览器中，SameSite的默认属性是SameSite=Lax。换句话说，当Cookie没有设置SameSite属性时，将会视作SameSite属性被设置为Lax——这意味着Cookies将会在当前用户使用时被自动发送。如果想要指定Cookies在同站、跨站请求都被发送，那么需要明确指定SameSite为None</p>\n          </div>\n\n<p>如果设置了 strict, 浏览器任何跨域都不会携带 cookie, 即使跳转进入也不会携带。 那也就没有 CSRF 攻击的机会了。 对于子域的跳转, cookie 也不会保留, 用户必须重新登录, 对于用户来讲体验不好</p>\n<p>如果设置 lax, 则外部跳转时会保留 cookie。 用户从外部或则子域进来时不需要重新登录</p>\n<p>SameSite不支持子域名, 但项目很常见的一种情况, 站点和接口不同域名, 例如 a.com 接口地址是 api.a.com。对于这种情况就不能通过SameSite来防御, 但如果相同的话 SameSite 实施也比较方便</p>\n<h4 id=\"一些历史事件\"><a href=\"#一些历史事件\" class=\"headerlink\" title=\"一些历史事件\"></a>一些历史事件</h4><p><a href=\"https://www.davidairey.com/google-gmail-security-hijack/\" target=\"_blank\" rel=\"noopener\">Gmail security hijack</a><br><a href=\"https://cloud.tencent.com/developer/article/1425657\" target=\"_blank\" rel=\"noopener\">Youtube notifications</a><br><a href=\"https://blog.ripstech.com/2019/wordpress-csrf-to-rce/\" target=\"_blank\" rel=\"noopener\">wordpress CSRF to Remote Code Execution</a></p>\n<h4 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h4><p>CSRF 是一种危害较大的攻击, 以上防御方法可以很大程度的防御攻击。各方法的实施难度, 效果, 适用情况都不同。 没有完美的解决方案, 我们只能通过实际情况选择最合适的方法。</p>\n<h4 id=\"参考文献\"><a href=\"#参考文献\" class=\"headerlink\" title=\"参考文献\"></a>参考文献</h4><p><a href=\"http://en.wikipedia.org/wiki/Cross-site_request_forgery\" target=\"_blank\" rel=\"noopener\">Wiki CSRF</a><br><a href=\"https://www.ibm.com/developerworks/cn/web/1102_niugang_csrf/\" target=\"_blank\" rel=\"noopener\">IBM CSRF 攻击的应对之道</a><br><a href=\"hhttps://developer.mozilla.org/zh-CN/docs/Web/HTTP/Cookies#SameSite_Cookies\">MDN SameSite Cookie</a><br><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/Security/Same-origin_policy\" target=\"_blank\" rel=\"noopener\">MDN Same-origin-policy</a></p>\n","site":{"data":{}},"length":5285,"excerpt":"<p>随着 Web 高速发展, 越来越多的线下业务都转移到线上。Web 程序变得越来越复杂同时安全也成为重中之重。本文将带你认识CSRF, 和其带来的严重危害, 应该如何来进行防御  </p>","more":"<h4 id=\"什么是-CSRF\"><a href=\"#什么是-CSRF\" class=\"headerlink\" title=\"什么是 CSRF\"></a>什么是 CSRF</h4><p>CSRF (Cross-site request forgery) 跨站请求伪造。 冒用用户身份凭证, 对目标网站进行设置。</p>\n<h4 id=\"CSRF-的攻击过程\"><a href=\"#CSRF-的攻击过程\" class=\"headerlink\" title=\"CSRF 的攻击过程\"></a>CSRF 的攻击过程</h4><ul>\n<li>用户登录了 a.com, 浏览器保留了登录凭证</li>\n<li>攻击者引诱用户访问攻击网站 b.com</li>\n<li>b.com 向 a.com 发出了一个请求, 例如: a.com?add-user=xxxxxx</li>\n<li>a.com 接收到请求, 进行验证, 有有效凭证, a.com 认为是用户发送的请求</li>\n<li>a.com 执行了操作 add-user</li>\n<li>攻击完成, 用户并不知道</li>\n</ul>\n<!-- more -->\n\n<h4 id=\"攻击类型\"><a href=\"#攻击类型\" class=\"headerlink\" title=\"攻击类型\"></a>攻击类型</h4><ul>\n<li><p>Get 类型</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;img src&#x3D;&quot;https:&#x2F;&#x2F;bank.com?act&#x3D;xxx&quot;&gt;</span><br></pre></td></tr></table></figure>\n<p>用户访问页面带有如上图片, 浏览器自动请求地址, 攻击完成  </p>\n</li>\n<li><p>Post 类型</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;form action&#x3D;&quot;https:&#x2F;&#x2F;bank.com&quot; method&#x3D;&quot;POST&quot;&gt;</span><br><span class=\"line\">  &lt;input type&#x3D;&quot;hidden&quot; name&#x3D;&quot;account&quot; value&#x3D;&quot;xiaoming&quot; &#x2F;&gt;</span><br><span class=\"line\">  &lt;input type&#x3D;&quot;hidden&quot; name&#x3D;&quot;amount&quot; value&#x3D;&quot;100&quot; &#x2F;&gt;</span><br><span class=\"line\">  &lt;input type&#x3D;&quot;hidden&quot; name&#x3D;&quot;act&quot; value&#x3D;&quot;transfer&quot; &#x2F;&gt;</span><br><span class=\"line\">&lt;&#x2F;form&gt;</span><br><span class=\"line\">&lt;script&gt; document.forms[0].submit(); &lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>\n<p>用户访问页面, 表单自动提交, 攻击完成    </p>\n</li>\n<li><p>链接类型</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;a href&#x3D;&quot;https:&#x2F;&#x2F;bank.com?act&#x3D;xxx&quot;&gt;点我送100话费&lt;&#x2F;a&gt;</span><br></pre></td></tr></table></figure>\n<p>链接类型比较少见, 比起前两种一打开页面就中招, 这种还需要用户进行点击, 才能完成攻击<br>这种类型比较可能出现在社区网站或者论坛, 直接发起同域攻击或者跳到攻击页面<br>这也是社区网站对外链都是严格控制或者不可以发布外链的原因</p>\n</li>\n</ul>\n<h4 id=\"攻击场景\"><a href=\"#攻击场景\" class=\"headerlink\" title=\"攻击场景\"></a>攻击场景</h4><p>有一天, 小明登录了 Gmail 邮箱, 悠闲的看着邮件。 突然收到了一封陌生邮件, 特价甩卖, 比特币 888 元一个。<br>英明神武的小明肯定不相信, 但还是点开了链接进去瞧瞧。进入后是一个空页面, 于是小明关掉网页。<br>过了一段时间, 小明突然发现自己某网站的密码被修改了, 里面的金币也被消费完了。<br>修改密码需要通过邮箱, 小明回想起之前的奇怪邮件, 找回那个空白页面, 打开源码一看 </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;form method&#x3D;&quot;POST&quot; action&#x3D;&quot;https:&#x2F;&#x2F;mail.google.com&#x2F;mail&#x2F;h&#x2F;ewt1jmuj4ddv&#x2F;?v&#x3D;prf&quot; enctype&#x3D;&quot;multipart&#x2F;form-data&quot;&gt; </span><br><span class=\"line\">    &lt;input type&#x3D;&quot;hidden&quot; name&#x3D;&quot;cf2_emc&quot; value&#x3D;&quot;true&quot;&#x2F;&gt; </span><br><span class=\"line\">    &lt;input type&#x3D;&quot;hidden&quot; name&#x3D;&quot;cf2_email&quot; value&#x3D;&quot;evilinbox@mail.com&quot;&#x2F;&gt; </span><br><span class=\"line\">    &lt;input type&#x3D;&quot;hidden&quot; name&#x3D;&quot;cf1_from&quot; value&#x3D;&quot;&quot;&#x2F;&gt; </span><br><span class=\"line\">&lt;&#x2F;form&gt; </span><br><span class=\"line\">&lt;script&gt; </span><br><span class=\"line\">    document.forms[0].submit();</span><br><span class=\"line\">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>\n<p>这个页面提交了一个请求, 添加了一个过滤规则, 所有邮件都将转发至 evilinbox#mail.com<br>看似风平浪静的页面, 其实黑客已经得手了(所以为什么点开邮件的链接会有安全提示)。<br>这是一个真实的攻击页面 <a href=\"https://www.gnucitizen.org/blog/google-gmail-e-mail-hijack-technique/\" target=\"_blank\" rel=\"noopener\">Google Gmail E-mail Hijack Technique</a>   </p>\n<h4 id=\"CSRF-特点\"><a href=\"#CSRF-特点\" class=\"headerlink\" title=\"CSRF 特点\"></a>CSRF 特点</h4><ul>\n<li>攻击一般从第三方发起, 也有可能本域发起</li>\n<li>攻击者只能冒用用户凭证进行操作, 无法窃取数据</li>\n<li>需要诱导用户进入攻击网站</li>\n</ul>\n<h4 id=\"防御策略\"><a href=\"#防御策略\" class=\"headerlink\" title=\"防御策略\"></a>防御策略</h4><p>从攻击原理看, 我们并没有办法阻止CSRF攻击的发生, 但是我们可以针对CSRF的特点进行防御  </p>\n<p><strong>1. Referer</strong></p>\n<p>CSRF 攻击一般从第三方发起, 针对这一特点, 可以通过阻止外域调用来进行防御<br>浏览器在发起请求时会在头部添加 referer 字段, 表示来源。可以通过判断 referer 来判断请求是否从外域发起, 并拒绝请求。例如这样一个接口 POST bank.com?transfer=1000, 黑客从第三方 hacku.com 发起时, referer 是指向该域名的  </p>\n<p>这种方法只需要后端进行过滤, 前端不用处理, 实施起来比较简单。但这并不是一个可靠的办法, referer 字段是由浏览器添加上去的, 我们不能将安全都寄托在浏览器  </p>\n<p>大部分现代浏览器都支持了 Referrer Policy (<a href=\"https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Referrer-Policy\" target=\"_blank\" rel=\"noopener\">Referrer-Policy - HTTP | MDN</a>) 策略, 允许去除 referrer 字段  </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;meta name&#x3D;&quot;referrer&quot; content&#x3D;&quot;no-referrer&quot;&gt; &#x2F;&#x2F; 全局</span><br><span class=\"line\">&lt;a href&#x3D;&quot;http:&#x2F;&#x2F;example.com&quot; rel&#x3D;&quot;noreferrer&quot;&gt; &#x2F;&#x2F; 单条</span><br></pre></td></tr></table></figure>\n<p>如果攻击页面除移了 referer, 后端就得不到该值无法进行过滤。</p>\n<div class=\"note info\">\n            <p>referer 会记录来源地址, 存在用户隐私问题。可能存在网站自身除移掉该字段的情况 <a href=\"https://75.team/post/everything-you-could-ever-want-to-know-and-more-about-controlling-the-referer-header-fastmail-blog.html\" target=\"_blank\" rel=\"noopener\">Referer 隐私问题</a></p>\n          </div>\n\n\n<p><strong>2. Dobule cookies</strong><br>CSRF 通过冒用凭证进行攻击, 但无法获取到数据, 针对这一特点, 对 cookie 进行2次验证。  </p>\n<p><strong>实现流程</strong></p>\n<ul>\n<li>用户登录后返回 cookie, 并带有csrfcookie=eW1kISE=</li>\n<li>客户端发送接口时, 需要从 cookies 获取 csrfcookie, 并加入到接口参数发送 (POST //hostname.comc?srfcookie=eW1kISE=)</li>\n<li>后端验证参数 csrfcookie 是否与 cookie 一致</li>\n</ul>\n<p>该方法实施起来相对简单, 也无需额外存储。但只适用与接口是同域, 例如 a.com 的接口地址是 api.a.com, 就实施。这是非常常见的情况。当然如果是 domain=a.com, 将 cookies 存在顶域是可以实现的, 但通常不会这么做</p>\n<div class=\"note info\">\n            <p>如果有 XSS 漏洞防御无效</p>\n          </div>\n\n<p><strong>3. CSRF token</strong><br>同样针对 CSRF 无法获取数据的特点, 接口需要加入从页面获取数据做为参数  </p>\n<p><strong>实现流程</strong></p>\n<ul>\n<li>用户打开页面时, 由后端生成加密token并插入到页面<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;input type&#x3D;&quot;hidden&quot; value&#x3D;&quot;eW1kISE&#x3D;&quot; name&#x3D;&quot;token&quot;&gt;</span><br></pre></td></tr></table></figure></li>\n<li>客户端发送请求时, 携带该token<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">const token &#x3D; document.querySelector(&#39;token&#39;).value</span><br><span class=\"line\">fetch(&#39;https:&#x2F;&#x2F;yourdomain.com&#39;, &#123;</span><br><span class=\"line\">  method: &#39;POST&#39;,</span><br><span class=\"line\">  headers: new Headers(&#123;</span><br><span class=\"line\">    &#39;Content-Type&#39;: &#39;application&#x2F;json&#39;</span><br><span class=\"line\">  &#125;),</span><br><span class=\"line\">  body: JSON.stringify(&#123;</span><br><span class=\"line\">    token,</span><br><span class=\"line\">    sid: &#39;xxxx&#39;</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure></li>\n<li>后端获取 token, 校验是否一致</li>\n</ul>\n<p>该方法可以有效防御, 相比起 referer 更加安全, 但实施起来比较麻烦, 需要后端为每个页面生成 token 并插入到页面。 token 更新也比较麻烦</p>\n<div class=\"note info\">\n            <p>如果有 XSS 漏洞防御无效</p>\n          </div>\n\n\n<p><strong>4. Header token</strong><br>这也是使用 token 进行验证, 和上一种不同在于 token 放在头部</p>\n<p><strong>实现流程</strong></p>\n<ul>\n<li>用户登录后后端生成加密 token 并返回, 客户端取得 token=eW1kISE= 并存在 Storage<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#x2F;&#x2F; login 取得 token 存储</span><br><span class=\"line\">fetch(&#39;https:&#x2F;&#x2F;a.com?a&#x3D;login&#39;)</span><br><span class=\"line\">.then(res &#x3D;&gt; &#123;</span><br><span class=\"line\">  window.localStorage.setItem(&#39;token&#39;, res.token)</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure></li>\n<li>客户端发送接口时, 从 Storage 取得 token, 并加入到自定义头部 <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#x2F;&#x2F; 发送请求时加入 token</span><br><span class=\"line\">fetch(&#39;https:&#x2F;&#x2F;a.com?a&#x3D;send&#39;, &#123;</span><br><span class=\"line\">  method: &#39;POST&#39;,</span><br><span class=\"line\">  headers: new Headers(&#123;</span><br><span class=\"line\">    &#39;token&#39;: window.localStorage.getItem(&#39;token&#39;)</span><br><span class=\"line\">  &#125;),</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure></li>\n<li>后端读取 header token, 解密字段, 校验token是否失效, 并进行对比</li>\n</ul>\n<p>这种方法也可以有效的防御, token 更新相对简单，可以在请求接口时统一添加 header。但可能存在有些组件使用 form 提交, 无法加入自定义 header。</p>\n<p>和上一种方法一样, 如果你的网站存在 XSS 漏洞的话防御就失效, 所以很多金融类网站要求再次输入密码, 进行2次身份验证  </p>\n<p><strong>5. SameSite Cookies</strong><br>SameSite Cookie 允许服务器要求某个 cookie 在跨站请求时不会被发送。可以阻止从第三方发起时发送 cookie</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Set-Cookie: key&#x3D;value; SameSite&#x3D;Strict</span><br></pre></td></tr></table></figure>\n<p>SameSite 有3个值</p>\n<ul>\n<li>None 同域跨域都会发送</li>\n<li>Strict 只在同域时发送, 从外域跳转进来不发送, 例如从搜索引擎进入时</li>\n<li>Lax 也是只在同域时发送, 相对于 strict 较宽松, Same-site cookies 将会为一些跨站子请求保留, 如图片加载或者frames的调用，但只有当用户从外部站点导航到URL时才会发送。如link链接</li>\n</ul>\n<div class=\"note info\">\n            <p>在新版本的浏览器中，SameSite的默认属性是SameSite=Lax。换句话说，当Cookie没有设置SameSite属性时，将会视作SameSite属性被设置为Lax——这意味着Cookies将会在当前用户使用时被自动发送。如果想要指定Cookies在同站、跨站请求都被发送，那么需要明确指定SameSite为None</p>\n          </div>\n\n<p>如果设置了 strict, 浏览器任何跨域都不会携带 cookie, 即使跳转进入也不会携带。 那也就没有 CSRF 攻击的机会了。 对于子域的跳转, cookie 也不会保留, 用户必须重新登录, 对于用户来讲体验不好</p>\n<p>如果设置 lax, 则外部跳转时会保留 cookie。 用户从外部或则子域进来时不需要重新登录</p>\n<p>SameSite不支持子域名, 但项目很常见的一种情况, 站点和接口不同域名, 例如 a.com 接口地址是 api.a.com。对于这种情况就不能通过SameSite来防御, 但如果相同的话 SameSite 实施也比较方便</p>\n<h4 id=\"一些历史事件\"><a href=\"#一些历史事件\" class=\"headerlink\" title=\"一些历史事件\"></a>一些历史事件</h4><p><a href=\"https://www.davidairey.com/google-gmail-security-hijack/\" target=\"_blank\" rel=\"noopener\">Gmail security hijack</a><br><a href=\"https://cloud.tencent.com/developer/article/1425657\" target=\"_blank\" rel=\"noopener\">Youtube notifications</a><br><a href=\"https://blog.ripstech.com/2019/wordpress-csrf-to-rce/\" target=\"_blank\" rel=\"noopener\">wordpress CSRF to Remote Code Execution</a></p>\n<h4 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h4><p>CSRF 是一种危害较大的攻击, 以上防御方法可以很大程度的防御攻击。各方法的实施难度, 效果, 适用情况都不同。 没有完美的解决方案, 我们只能通过实际情况选择最合适的方法。</p>\n<h4 id=\"参考文献\"><a href=\"#参考文献\" class=\"headerlink\" title=\"参考文献\"></a>参考文献</h4><p><a href=\"http://en.wikipedia.org/wiki/Cross-site_request_forgery\" target=\"_blank\" rel=\"noopener\">Wiki CSRF</a><br><a href=\"https://www.ibm.com/developerworks/cn/web/1102_niugang_csrf/\" target=\"_blank\" rel=\"noopener\">IBM CSRF 攻击的应对之道</a><br><a href=\"hhttps://developer.mozilla.org/zh-CN/docs/Web/HTTP/Cookies#SameSite_Cookies\">MDN SameSite Cookie</a><br><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/Security/Same-origin_policy\" target=\"_blank\" rel=\"noopener\">MDN Same-origin-policy</a></p>"},{"title":"ios8-web-app","_content":"\n\n```\n<!doctype html>\n\n<!-- http://taylor.fausak.me/2015/01/27/ios-8-web-apps/ -->\n\n<html>\n  <head>\n    <title>iOS 8 web app</title>\n\n    <!-- CONFIGURATION -->\n\n    <!-- Allow web app to be run in full-screen mode. -->\n    <meta name=\"apple-mobile-web-app-capable\"\n          content=\"yes\">\n\n    <!-- Make the app title different than the page title. -->\n    <meta name=\"apple-mobile-web-app-title\"\n          content=\"iOS 8 web app\">\n\n    <!-- Configure the status bar. -->\n    <meta name=\"apple-mobile-web-app-status-bar-style\"\n          content=\"black\">\n\n    <!-- Set the viewport. -->\n    <meta name=\"viewport\"\n          content=\"initial-scale=1\">\n\n    <!-- Disable automatic phone number detection. -->\n    <meta name=\"format-detection\"\n          content=\"telephone=no\">\n\n    <!-- ICONS -->\n\n    <!-- iPad retina icon -->\n    <link href=\"https://placehold.it/152\"\n          sizes=\"152x152\"\n          rel=\"apple-touch-icon-precomposed\">\n\n    <!-- iPad retina icon (iOS < 7) -->\n    <link href=\"https://placehold.it/144\"\n          sizes=\"144x144\"\n          rel=\"apple-touch-icon-precomposed\">\n\n    <!-- iPad non-retina icon -->\n    <link href=\"https://placehold.it/76\"\n          sizes=\"76x76\"\n          rel=\"apple-touch-icon-precomposed\">\n\n    <!-- iPad non-retina icon (iOS < 7) -->\n    <link href=\"https://placehold.it/72\"\n          sizes=\"72x72\"\n          rel=\"apple-touch-icon-precomposed\">\n\n    <!-- iPhone 6 Plus icon -->\n    <link href=\"https://placehold.it/180\"\n          sizes=\"120x120\"\n          rel=\"apple-touch-icon-precomposed\">\n\n    <!-- iPhone retina icon (iOS < 7) -->\n    <link href=\"https://placehold.it/114\"\n          sizes=\"114x114\"\n          rel=\"apple-touch-icon-precomposed\">\n\n    <!-- iPhone non-retina icon (iOS < 7) -->\n    <link href=\"https://placehold.it/57\"\n          sizes=\"57x57\"\n          rel=\"apple-touch-icon-precomposed\">\n\n    <!-- STARTUP IMAGES -->\n\n    <!-- iPad retina portrait startup image -->\n    <link href=\"https://placehold.it/1536x2008\"\n          media=\"(device-width: 768px) and (device-height: 1024px)\n                 and (-webkit-device-pixel-ratio: 2)\n                 and (orientation: portrait)\"\n          rel=\"apple-touch-startup-image\">\n\n    <!-- iPad retina landscape startup image -->\n    <link href=\"https://placehold.it/1496x2048\"\n          media=\"(device-width: 768px) and (device-height: 1024px)\n                 and (-webkit-device-pixel-ratio: 2)\n                 and (orientation: landscape)\"\n          rel=\"apple-touch-startup-image\">\n\n    <!-- iPad non-retina portrait startup image -->\n    <link href=\"https://placehold.it/768x1004\"\n          media=\"(device-width: 768px) and (device-height: 1024px)\n                 and (-webkit-device-pixel-ratio: 1)\n                 and (orientation: portrait)\"\n          rel=\"apple-touch-startup-image\">\n\n    <!-- iPad non-retina landscape startup image -->\n    <link href=\"https://placehold.it/748x1024\"\n          media=\"(device-width: 768px) and (device-height: 1024px)\n                 and (-webkit-device-pixel-ratio: 1)\n                 and (orientation: landscape)\"\n          rel=\"apple-touch-startup-image\">\n\n    <!-- iPhone 6 Plus portrait startup image -->\n    <link href=\"https://placehold.it/1242x2148\"\n          media=\"(device-width: 414px) and (device-height: 736px)\n                 and (-webkit-device-pixel-ratio: 3)\n                 and (orientation: portrait)\"\n          rel=\"apple-touch-startup-image\">\n\n    <!-- iPhone 6 Plus landscape startup image -->\n    <link href=\"https://placehold.it/1182x2208\"\n          media=\"(device-width: 414px) and (device-height: 736px)\n                 and (-webkit-device-pixel-ratio: 3)\n                 and (orientation: landscape)\"\n          rel=\"apple-touch-startup-image\">\n\n    <!-- iPhone 6 startup image -->\n    <link href=\"https://placehold.it/750x1294\"\n          media=\"(device-width: 375px) and (device-height: 667px)\n                 and (-webkit-device-pixel-ratio: 2)\"\n          rel=\"apple-touch-startup-image\">\n\n    <!-- iPhone 5 startup image -->\n    <link href=\"https://placehold.it/640x1096\"\n          media=\"(device-width: 320px) and (device-height: 568px)\n                 and (-webkit-device-pixel-ratio: 2)\"\n          rel=\"apple-touch-startup-image\">\n\n    <!-- iPhone < 5 retina startup image -->\n    <link href=\"https://placehold.it/640x920\"\n          media=\"(device-width: 320px) and (device-height: 480px)\n                 and (-webkit-device-pixel-ratio: 2)\"\n          rel=\"apple-touch-startup-image\">\n\n    <!-- iPhone < 5 non-retina startup image -->\n    <link href=\"https://placehold.it/320x460\"\n          media=\"(device-width: 320px) and (device-height: 480px)\n                 and (-webkit-device-pixel-ratio: 1)\"\n          rel=\"apple-touch-startup-image\">\n\n    <!-- HACKS -->\n\n    <!-- Prevent text size change on orientation change. -->\n    <style>\n      html {\n        -webkit-text-size-adjust: 100%;\n      }\n    </style>\n  </head>\n\n  <body>\n    <h1>iOS 8 web app</h1>\n  </body>\n</html>\n\n```","source":"_drafts/ios8-web-app.md","raw":"---\ntitle: ios8-web-app\ntags: [webapp, ios8, meta]\n---\n\n\n```\n<!doctype html>\n\n<!-- http://taylor.fausak.me/2015/01/27/ios-8-web-apps/ -->\n\n<html>\n  <head>\n    <title>iOS 8 web app</title>\n\n    <!-- CONFIGURATION -->\n\n    <!-- Allow web app to be run in full-screen mode. -->\n    <meta name=\"apple-mobile-web-app-capable\"\n          content=\"yes\">\n\n    <!-- Make the app title different than the page title. -->\n    <meta name=\"apple-mobile-web-app-title\"\n          content=\"iOS 8 web app\">\n\n    <!-- Configure the status bar. -->\n    <meta name=\"apple-mobile-web-app-status-bar-style\"\n          content=\"black\">\n\n    <!-- Set the viewport. -->\n    <meta name=\"viewport\"\n          content=\"initial-scale=1\">\n\n    <!-- Disable automatic phone number detection. -->\n    <meta name=\"format-detection\"\n          content=\"telephone=no\">\n\n    <!-- ICONS -->\n\n    <!-- iPad retina icon -->\n    <link href=\"https://placehold.it/152\"\n          sizes=\"152x152\"\n          rel=\"apple-touch-icon-precomposed\">\n\n    <!-- iPad retina icon (iOS < 7) -->\n    <link href=\"https://placehold.it/144\"\n          sizes=\"144x144\"\n          rel=\"apple-touch-icon-precomposed\">\n\n    <!-- iPad non-retina icon -->\n    <link href=\"https://placehold.it/76\"\n          sizes=\"76x76\"\n          rel=\"apple-touch-icon-precomposed\">\n\n    <!-- iPad non-retina icon (iOS < 7) -->\n    <link href=\"https://placehold.it/72\"\n          sizes=\"72x72\"\n          rel=\"apple-touch-icon-precomposed\">\n\n    <!-- iPhone 6 Plus icon -->\n    <link href=\"https://placehold.it/180\"\n          sizes=\"120x120\"\n          rel=\"apple-touch-icon-precomposed\">\n\n    <!-- iPhone retina icon (iOS < 7) -->\n    <link href=\"https://placehold.it/114\"\n          sizes=\"114x114\"\n          rel=\"apple-touch-icon-precomposed\">\n\n    <!-- iPhone non-retina icon (iOS < 7) -->\n    <link href=\"https://placehold.it/57\"\n          sizes=\"57x57\"\n          rel=\"apple-touch-icon-precomposed\">\n\n    <!-- STARTUP IMAGES -->\n\n    <!-- iPad retina portrait startup image -->\n    <link href=\"https://placehold.it/1536x2008\"\n          media=\"(device-width: 768px) and (device-height: 1024px)\n                 and (-webkit-device-pixel-ratio: 2)\n                 and (orientation: portrait)\"\n          rel=\"apple-touch-startup-image\">\n\n    <!-- iPad retina landscape startup image -->\n    <link href=\"https://placehold.it/1496x2048\"\n          media=\"(device-width: 768px) and (device-height: 1024px)\n                 and (-webkit-device-pixel-ratio: 2)\n                 and (orientation: landscape)\"\n          rel=\"apple-touch-startup-image\">\n\n    <!-- iPad non-retina portrait startup image -->\n    <link href=\"https://placehold.it/768x1004\"\n          media=\"(device-width: 768px) and (device-height: 1024px)\n                 and (-webkit-device-pixel-ratio: 1)\n                 and (orientation: portrait)\"\n          rel=\"apple-touch-startup-image\">\n\n    <!-- iPad non-retina landscape startup image -->\n    <link href=\"https://placehold.it/748x1024\"\n          media=\"(device-width: 768px) and (device-height: 1024px)\n                 and (-webkit-device-pixel-ratio: 1)\n                 and (orientation: landscape)\"\n          rel=\"apple-touch-startup-image\">\n\n    <!-- iPhone 6 Plus portrait startup image -->\n    <link href=\"https://placehold.it/1242x2148\"\n          media=\"(device-width: 414px) and (device-height: 736px)\n                 and (-webkit-device-pixel-ratio: 3)\n                 and (orientation: portrait)\"\n          rel=\"apple-touch-startup-image\">\n\n    <!-- iPhone 6 Plus landscape startup image -->\n    <link href=\"https://placehold.it/1182x2208\"\n          media=\"(device-width: 414px) and (device-height: 736px)\n                 and (-webkit-device-pixel-ratio: 3)\n                 and (orientation: landscape)\"\n          rel=\"apple-touch-startup-image\">\n\n    <!-- iPhone 6 startup image -->\n    <link href=\"https://placehold.it/750x1294\"\n          media=\"(device-width: 375px) and (device-height: 667px)\n                 and (-webkit-device-pixel-ratio: 2)\"\n          rel=\"apple-touch-startup-image\">\n\n    <!-- iPhone 5 startup image -->\n    <link href=\"https://placehold.it/640x1096\"\n          media=\"(device-width: 320px) and (device-height: 568px)\n                 and (-webkit-device-pixel-ratio: 2)\"\n          rel=\"apple-touch-startup-image\">\n\n    <!-- iPhone < 5 retina startup image -->\n    <link href=\"https://placehold.it/640x920\"\n          media=\"(device-width: 320px) and (device-height: 480px)\n                 and (-webkit-device-pixel-ratio: 2)\"\n          rel=\"apple-touch-startup-image\">\n\n    <!-- iPhone < 5 non-retina startup image -->\n    <link href=\"https://placehold.it/320x460\"\n          media=\"(device-width: 320px) and (device-height: 480px)\n                 and (-webkit-device-pixel-ratio: 1)\"\n          rel=\"apple-touch-startup-image\">\n\n    <!-- HACKS -->\n\n    <!-- Prevent text size change on orientation change. -->\n    <style>\n      html {\n        -webkit-text-size-adjust: 100%;\n      }\n    </style>\n  </head>\n\n  <body>\n    <h1>iOS 8 web app</h1>\n  </body>\n</html>\n\n```","slug":"ios8-web-app","published":0,"date":"2020-04-06T08:14:23.086Z","updated":"2020-04-06T08:14:50.769Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck8pgqix50000scnc3x3k65ib","content":"<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!doctype html&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;!-- http:&#x2F;&#x2F;taylor.fausak.me&#x2F;2015&#x2F;01&#x2F;27&#x2F;ios-8-web-apps&#x2F; --&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">  &lt;head&gt;</span><br><span class=\"line\">    &lt;title&gt;iOS 8 web app&lt;&#x2F;title&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;!-- CONFIGURATION --&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;!-- Allow web app to be run in full-screen mode. --&gt;</span><br><span class=\"line\">    &lt;meta name&#x3D;&quot;apple-mobile-web-app-capable&quot;</span><br><span class=\"line\">          content&#x3D;&quot;yes&quot;&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;!-- Make the app title different than the page title. --&gt;</span><br><span class=\"line\">    &lt;meta name&#x3D;&quot;apple-mobile-web-app-title&quot;</span><br><span class=\"line\">          content&#x3D;&quot;iOS 8 web app&quot;&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;!-- Configure the status bar. --&gt;</span><br><span class=\"line\">    &lt;meta name&#x3D;&quot;apple-mobile-web-app-status-bar-style&quot;</span><br><span class=\"line\">          content&#x3D;&quot;black&quot;&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;!-- Set the viewport. --&gt;</span><br><span class=\"line\">    &lt;meta name&#x3D;&quot;viewport&quot;</span><br><span class=\"line\">          content&#x3D;&quot;initial-scale&#x3D;1&quot;&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;!-- Disable automatic phone number detection. --&gt;</span><br><span class=\"line\">    &lt;meta name&#x3D;&quot;format-detection&quot;</span><br><span class=\"line\">          content&#x3D;&quot;telephone&#x3D;no&quot;&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;!-- ICONS --&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;!-- iPad retina icon --&gt;</span><br><span class=\"line\">    &lt;link href&#x3D;&quot;https:&#x2F;&#x2F;placehold.it&#x2F;152&quot;</span><br><span class=\"line\">          sizes&#x3D;&quot;152x152&quot;</span><br><span class=\"line\">          rel&#x3D;&quot;apple-touch-icon-precomposed&quot;&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;!-- iPad retina icon (iOS &lt; 7) --&gt;</span><br><span class=\"line\">    &lt;link href&#x3D;&quot;https:&#x2F;&#x2F;placehold.it&#x2F;144&quot;</span><br><span class=\"line\">          sizes&#x3D;&quot;144x144&quot;</span><br><span class=\"line\">          rel&#x3D;&quot;apple-touch-icon-precomposed&quot;&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;!-- iPad non-retina icon --&gt;</span><br><span class=\"line\">    &lt;link href&#x3D;&quot;https:&#x2F;&#x2F;placehold.it&#x2F;76&quot;</span><br><span class=\"line\">          sizes&#x3D;&quot;76x76&quot;</span><br><span class=\"line\">          rel&#x3D;&quot;apple-touch-icon-precomposed&quot;&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;!-- iPad non-retina icon (iOS &lt; 7) --&gt;</span><br><span class=\"line\">    &lt;link href&#x3D;&quot;https:&#x2F;&#x2F;placehold.it&#x2F;72&quot;</span><br><span class=\"line\">          sizes&#x3D;&quot;72x72&quot;</span><br><span class=\"line\">          rel&#x3D;&quot;apple-touch-icon-precomposed&quot;&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;!-- iPhone 6 Plus icon --&gt;</span><br><span class=\"line\">    &lt;link href&#x3D;&quot;https:&#x2F;&#x2F;placehold.it&#x2F;180&quot;</span><br><span class=\"line\">          sizes&#x3D;&quot;120x120&quot;</span><br><span class=\"line\">          rel&#x3D;&quot;apple-touch-icon-precomposed&quot;&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;!-- iPhone retina icon (iOS &lt; 7) --&gt;</span><br><span class=\"line\">    &lt;link href&#x3D;&quot;https:&#x2F;&#x2F;placehold.it&#x2F;114&quot;</span><br><span class=\"line\">          sizes&#x3D;&quot;114x114&quot;</span><br><span class=\"line\">          rel&#x3D;&quot;apple-touch-icon-precomposed&quot;&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;!-- iPhone non-retina icon (iOS &lt; 7) --&gt;</span><br><span class=\"line\">    &lt;link href&#x3D;&quot;https:&#x2F;&#x2F;placehold.it&#x2F;57&quot;</span><br><span class=\"line\">          sizes&#x3D;&quot;57x57&quot;</span><br><span class=\"line\">          rel&#x3D;&quot;apple-touch-icon-precomposed&quot;&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;!-- STARTUP IMAGES --&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;!-- iPad retina portrait startup image --&gt;</span><br><span class=\"line\">    &lt;link href&#x3D;&quot;https:&#x2F;&#x2F;placehold.it&#x2F;1536x2008&quot;</span><br><span class=\"line\">          media&#x3D;&quot;(device-width: 768px) and (device-height: 1024px)</span><br><span class=\"line\">                 and (-webkit-device-pixel-ratio: 2)</span><br><span class=\"line\">                 and (orientation: portrait)&quot;</span><br><span class=\"line\">          rel&#x3D;&quot;apple-touch-startup-image&quot;&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;!-- iPad retina landscape startup image --&gt;</span><br><span class=\"line\">    &lt;link href&#x3D;&quot;https:&#x2F;&#x2F;placehold.it&#x2F;1496x2048&quot;</span><br><span class=\"line\">          media&#x3D;&quot;(device-width: 768px) and (device-height: 1024px)</span><br><span class=\"line\">                 and (-webkit-device-pixel-ratio: 2)</span><br><span class=\"line\">                 and (orientation: landscape)&quot;</span><br><span class=\"line\">          rel&#x3D;&quot;apple-touch-startup-image&quot;&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;!-- iPad non-retina portrait startup image --&gt;</span><br><span class=\"line\">    &lt;link href&#x3D;&quot;https:&#x2F;&#x2F;placehold.it&#x2F;768x1004&quot;</span><br><span class=\"line\">          media&#x3D;&quot;(device-width: 768px) and (device-height: 1024px)</span><br><span class=\"line\">                 and (-webkit-device-pixel-ratio: 1)</span><br><span class=\"line\">                 and (orientation: portrait)&quot;</span><br><span class=\"line\">          rel&#x3D;&quot;apple-touch-startup-image&quot;&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;!-- iPad non-retina landscape startup image --&gt;</span><br><span class=\"line\">    &lt;link href&#x3D;&quot;https:&#x2F;&#x2F;placehold.it&#x2F;748x1024&quot;</span><br><span class=\"line\">          media&#x3D;&quot;(device-width: 768px) and (device-height: 1024px)</span><br><span class=\"line\">                 and (-webkit-device-pixel-ratio: 1)</span><br><span class=\"line\">                 and (orientation: landscape)&quot;</span><br><span class=\"line\">          rel&#x3D;&quot;apple-touch-startup-image&quot;&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;!-- iPhone 6 Plus portrait startup image --&gt;</span><br><span class=\"line\">    &lt;link href&#x3D;&quot;https:&#x2F;&#x2F;placehold.it&#x2F;1242x2148&quot;</span><br><span class=\"line\">          media&#x3D;&quot;(device-width: 414px) and (device-height: 736px)</span><br><span class=\"line\">                 and (-webkit-device-pixel-ratio: 3)</span><br><span class=\"line\">                 and (orientation: portrait)&quot;</span><br><span class=\"line\">          rel&#x3D;&quot;apple-touch-startup-image&quot;&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;!-- iPhone 6 Plus landscape startup image --&gt;</span><br><span class=\"line\">    &lt;link href&#x3D;&quot;https:&#x2F;&#x2F;placehold.it&#x2F;1182x2208&quot;</span><br><span class=\"line\">          media&#x3D;&quot;(device-width: 414px) and (device-height: 736px)</span><br><span class=\"line\">                 and (-webkit-device-pixel-ratio: 3)</span><br><span class=\"line\">                 and (orientation: landscape)&quot;</span><br><span class=\"line\">          rel&#x3D;&quot;apple-touch-startup-image&quot;&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;!-- iPhone 6 startup image --&gt;</span><br><span class=\"line\">    &lt;link href&#x3D;&quot;https:&#x2F;&#x2F;placehold.it&#x2F;750x1294&quot;</span><br><span class=\"line\">          media&#x3D;&quot;(device-width: 375px) and (device-height: 667px)</span><br><span class=\"line\">                 and (-webkit-device-pixel-ratio: 2)&quot;</span><br><span class=\"line\">          rel&#x3D;&quot;apple-touch-startup-image&quot;&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;!-- iPhone 5 startup image --&gt;</span><br><span class=\"line\">    &lt;link href&#x3D;&quot;https:&#x2F;&#x2F;placehold.it&#x2F;640x1096&quot;</span><br><span class=\"line\">          media&#x3D;&quot;(device-width: 320px) and (device-height: 568px)</span><br><span class=\"line\">                 and (-webkit-device-pixel-ratio: 2)&quot;</span><br><span class=\"line\">          rel&#x3D;&quot;apple-touch-startup-image&quot;&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;!-- iPhone &lt; 5 retina startup image --&gt;</span><br><span class=\"line\">    &lt;link href&#x3D;&quot;https:&#x2F;&#x2F;placehold.it&#x2F;640x920&quot;</span><br><span class=\"line\">          media&#x3D;&quot;(device-width: 320px) and (device-height: 480px)</span><br><span class=\"line\">                 and (-webkit-device-pixel-ratio: 2)&quot;</span><br><span class=\"line\">          rel&#x3D;&quot;apple-touch-startup-image&quot;&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;!-- iPhone &lt; 5 non-retina startup image --&gt;</span><br><span class=\"line\">    &lt;link href&#x3D;&quot;https:&#x2F;&#x2F;placehold.it&#x2F;320x460&quot;</span><br><span class=\"line\">          media&#x3D;&quot;(device-width: 320px) and (device-height: 480px)</span><br><span class=\"line\">                 and (-webkit-device-pixel-ratio: 1)&quot;</span><br><span class=\"line\">          rel&#x3D;&quot;apple-touch-startup-image&quot;&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;!-- HACKS --&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;!-- Prevent text size change on orientation change. --&gt;</span><br><span class=\"line\">    &lt;style&gt;</span><br><span class=\"line\">      html &#123;</span><br><span class=\"line\">        -webkit-text-size-adjust: 100%;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &lt;&#x2F;style&gt;</span><br><span class=\"line\">  &lt;&#x2F;head&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">  &lt;body&gt;</span><br><span class=\"line\">    &lt;h1&gt;iOS 8 web app&lt;&#x2F;h1&gt;</span><br><span class=\"line\">  &lt;&#x2F;body&gt;</span><br><span class=\"line\">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>","site":{"data":{}},"length":5649,"excerpt":"","more":"<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!doctype html&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;!-- http:&#x2F;&#x2F;taylor.fausak.me&#x2F;2015&#x2F;01&#x2F;27&#x2F;ios-8-web-apps&#x2F; --&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">  &lt;head&gt;</span><br><span class=\"line\">    &lt;title&gt;iOS 8 web app&lt;&#x2F;title&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;!-- CONFIGURATION --&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;!-- Allow web app to be run in full-screen mode. --&gt;</span><br><span class=\"line\">    &lt;meta name&#x3D;&quot;apple-mobile-web-app-capable&quot;</span><br><span class=\"line\">          content&#x3D;&quot;yes&quot;&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;!-- Make the app title different than the page title. --&gt;</span><br><span class=\"line\">    &lt;meta name&#x3D;&quot;apple-mobile-web-app-title&quot;</span><br><span class=\"line\">          content&#x3D;&quot;iOS 8 web app&quot;&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;!-- Configure the status bar. --&gt;</span><br><span class=\"line\">    &lt;meta name&#x3D;&quot;apple-mobile-web-app-status-bar-style&quot;</span><br><span class=\"line\">          content&#x3D;&quot;black&quot;&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;!-- Set the viewport. --&gt;</span><br><span class=\"line\">    &lt;meta name&#x3D;&quot;viewport&quot;</span><br><span class=\"line\">          content&#x3D;&quot;initial-scale&#x3D;1&quot;&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;!-- Disable automatic phone number detection. --&gt;</span><br><span class=\"line\">    &lt;meta name&#x3D;&quot;format-detection&quot;</span><br><span class=\"line\">          content&#x3D;&quot;telephone&#x3D;no&quot;&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;!-- ICONS --&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;!-- iPad retina icon --&gt;</span><br><span class=\"line\">    &lt;link href&#x3D;&quot;https:&#x2F;&#x2F;placehold.it&#x2F;152&quot;</span><br><span class=\"line\">          sizes&#x3D;&quot;152x152&quot;</span><br><span class=\"line\">          rel&#x3D;&quot;apple-touch-icon-precomposed&quot;&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;!-- iPad retina icon (iOS &lt; 7) --&gt;</span><br><span class=\"line\">    &lt;link href&#x3D;&quot;https:&#x2F;&#x2F;placehold.it&#x2F;144&quot;</span><br><span class=\"line\">          sizes&#x3D;&quot;144x144&quot;</span><br><span class=\"line\">          rel&#x3D;&quot;apple-touch-icon-precomposed&quot;&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;!-- iPad non-retina icon --&gt;</span><br><span class=\"line\">    &lt;link href&#x3D;&quot;https:&#x2F;&#x2F;placehold.it&#x2F;76&quot;</span><br><span class=\"line\">          sizes&#x3D;&quot;76x76&quot;</span><br><span class=\"line\">          rel&#x3D;&quot;apple-touch-icon-precomposed&quot;&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;!-- iPad non-retina icon (iOS &lt; 7) --&gt;</span><br><span class=\"line\">    &lt;link href&#x3D;&quot;https:&#x2F;&#x2F;placehold.it&#x2F;72&quot;</span><br><span class=\"line\">          sizes&#x3D;&quot;72x72&quot;</span><br><span class=\"line\">          rel&#x3D;&quot;apple-touch-icon-precomposed&quot;&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;!-- iPhone 6 Plus icon --&gt;</span><br><span class=\"line\">    &lt;link href&#x3D;&quot;https:&#x2F;&#x2F;placehold.it&#x2F;180&quot;</span><br><span class=\"line\">          sizes&#x3D;&quot;120x120&quot;</span><br><span class=\"line\">          rel&#x3D;&quot;apple-touch-icon-precomposed&quot;&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;!-- iPhone retina icon (iOS &lt; 7) --&gt;</span><br><span class=\"line\">    &lt;link href&#x3D;&quot;https:&#x2F;&#x2F;placehold.it&#x2F;114&quot;</span><br><span class=\"line\">          sizes&#x3D;&quot;114x114&quot;</span><br><span class=\"line\">          rel&#x3D;&quot;apple-touch-icon-precomposed&quot;&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;!-- iPhone non-retina icon (iOS &lt; 7) --&gt;</span><br><span class=\"line\">    &lt;link href&#x3D;&quot;https:&#x2F;&#x2F;placehold.it&#x2F;57&quot;</span><br><span class=\"line\">          sizes&#x3D;&quot;57x57&quot;</span><br><span class=\"line\">          rel&#x3D;&quot;apple-touch-icon-precomposed&quot;&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;!-- STARTUP IMAGES --&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;!-- iPad retina portrait startup image --&gt;</span><br><span class=\"line\">    &lt;link href&#x3D;&quot;https:&#x2F;&#x2F;placehold.it&#x2F;1536x2008&quot;</span><br><span class=\"line\">          media&#x3D;&quot;(device-width: 768px) and (device-height: 1024px)</span><br><span class=\"line\">                 and (-webkit-device-pixel-ratio: 2)</span><br><span class=\"line\">                 and (orientation: portrait)&quot;</span><br><span class=\"line\">          rel&#x3D;&quot;apple-touch-startup-image&quot;&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;!-- iPad retina landscape startup image --&gt;</span><br><span class=\"line\">    &lt;link href&#x3D;&quot;https:&#x2F;&#x2F;placehold.it&#x2F;1496x2048&quot;</span><br><span class=\"line\">          media&#x3D;&quot;(device-width: 768px) and (device-height: 1024px)</span><br><span class=\"line\">                 and (-webkit-device-pixel-ratio: 2)</span><br><span class=\"line\">                 and (orientation: landscape)&quot;</span><br><span class=\"line\">          rel&#x3D;&quot;apple-touch-startup-image&quot;&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;!-- iPad non-retina portrait startup image --&gt;</span><br><span class=\"line\">    &lt;link href&#x3D;&quot;https:&#x2F;&#x2F;placehold.it&#x2F;768x1004&quot;</span><br><span class=\"line\">          media&#x3D;&quot;(device-width: 768px) and (device-height: 1024px)</span><br><span class=\"line\">                 and (-webkit-device-pixel-ratio: 1)</span><br><span class=\"line\">                 and (orientation: portrait)&quot;</span><br><span class=\"line\">          rel&#x3D;&quot;apple-touch-startup-image&quot;&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;!-- iPad non-retina landscape startup image --&gt;</span><br><span class=\"line\">    &lt;link href&#x3D;&quot;https:&#x2F;&#x2F;placehold.it&#x2F;748x1024&quot;</span><br><span class=\"line\">          media&#x3D;&quot;(device-width: 768px) and (device-height: 1024px)</span><br><span class=\"line\">                 and (-webkit-device-pixel-ratio: 1)</span><br><span class=\"line\">                 and (orientation: landscape)&quot;</span><br><span class=\"line\">          rel&#x3D;&quot;apple-touch-startup-image&quot;&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;!-- iPhone 6 Plus portrait startup image --&gt;</span><br><span class=\"line\">    &lt;link href&#x3D;&quot;https:&#x2F;&#x2F;placehold.it&#x2F;1242x2148&quot;</span><br><span class=\"line\">          media&#x3D;&quot;(device-width: 414px) and (device-height: 736px)</span><br><span class=\"line\">                 and (-webkit-device-pixel-ratio: 3)</span><br><span class=\"line\">                 and (orientation: portrait)&quot;</span><br><span class=\"line\">          rel&#x3D;&quot;apple-touch-startup-image&quot;&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;!-- iPhone 6 Plus landscape startup image --&gt;</span><br><span class=\"line\">    &lt;link href&#x3D;&quot;https:&#x2F;&#x2F;placehold.it&#x2F;1182x2208&quot;</span><br><span class=\"line\">          media&#x3D;&quot;(device-width: 414px) and (device-height: 736px)</span><br><span class=\"line\">                 and (-webkit-device-pixel-ratio: 3)</span><br><span class=\"line\">                 and (orientation: landscape)&quot;</span><br><span class=\"line\">          rel&#x3D;&quot;apple-touch-startup-image&quot;&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;!-- iPhone 6 startup image --&gt;</span><br><span class=\"line\">    &lt;link href&#x3D;&quot;https:&#x2F;&#x2F;placehold.it&#x2F;750x1294&quot;</span><br><span class=\"line\">          media&#x3D;&quot;(device-width: 375px) and (device-height: 667px)</span><br><span class=\"line\">                 and (-webkit-device-pixel-ratio: 2)&quot;</span><br><span class=\"line\">          rel&#x3D;&quot;apple-touch-startup-image&quot;&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;!-- iPhone 5 startup image --&gt;</span><br><span class=\"line\">    &lt;link href&#x3D;&quot;https:&#x2F;&#x2F;placehold.it&#x2F;640x1096&quot;</span><br><span class=\"line\">          media&#x3D;&quot;(device-width: 320px) and (device-height: 568px)</span><br><span class=\"line\">                 and (-webkit-device-pixel-ratio: 2)&quot;</span><br><span class=\"line\">          rel&#x3D;&quot;apple-touch-startup-image&quot;&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;!-- iPhone &lt; 5 retina startup image --&gt;</span><br><span class=\"line\">    &lt;link href&#x3D;&quot;https:&#x2F;&#x2F;placehold.it&#x2F;640x920&quot;</span><br><span class=\"line\">          media&#x3D;&quot;(device-width: 320px) and (device-height: 480px)</span><br><span class=\"line\">                 and (-webkit-device-pixel-ratio: 2)&quot;</span><br><span class=\"line\">          rel&#x3D;&quot;apple-touch-startup-image&quot;&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;!-- iPhone &lt; 5 non-retina startup image --&gt;</span><br><span class=\"line\">    &lt;link href&#x3D;&quot;https:&#x2F;&#x2F;placehold.it&#x2F;320x460&quot;</span><br><span class=\"line\">          media&#x3D;&quot;(device-width: 320px) and (device-height: 480px)</span><br><span class=\"line\">                 and (-webkit-device-pixel-ratio: 1)&quot;</span><br><span class=\"line\">          rel&#x3D;&quot;apple-touch-startup-image&quot;&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;!-- HACKS --&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;!-- Prevent text size change on orientation change. --&gt;</span><br><span class=\"line\">    &lt;style&gt;</span><br><span class=\"line\">      html &#123;</span><br><span class=\"line\">        -webkit-text-size-adjust: 100%;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &lt;&#x2F;style&gt;</span><br><span class=\"line\">  &lt;&#x2F;head&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">  &lt;body&gt;</span><br><span class=\"line\">    &lt;h1&gt;iOS 8 web app&lt;&#x2F;h1&gt;</span><br><span class=\"line\">  &lt;&#x2F;body&gt;</span><br><span class=\"line\">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>"}],"PostAsset":[],"PostCategory":[{"post_id":"ck8nz89ka0008qcnc0dymdmka","category_id":"ck8nz89jb0005qcnchz7oeovy","_id":"ck8nz89kh000cqcnc6cbdgxiq"},{"post_id":"ck8nz89j70003qcnc1kkr950o","category_id":"ck8nz89jb0005qcnchz7oeovy","_id":"ck8nz89kk000gqcncdzpj3jto"},{"post_id":"ck8nz89j90004qcnc9rzbcpk3","category_id":"ck8nz89jb0005qcnchz7oeovy","_id":"ck8nz89kl000hqcncgrdsflzz"},{"post_id":"ck8nz89jd0006qcnc7a35at4r","category_id":"ck8nz89kh000dqcnc7sod95xb","_id":"ck8nz89kx000kqcnc8eso8beu"},{"post_id":"ck8nz89sa000xqcnc0u8d1end","category_id":"ck8nz89kh000dqcnc7sod95xb","_id":"ck8nz89sc000zqcnc5m1h75l7"},{"post_id":"ck8nz89p3000wqcnc40bid3ye","category_id":"ck8nz89kh000dqcnc7sod95xb","_id":"ck8q2r48u00012fn72spc20qd"}],"PostTag":[{"post_id":"ck8nz89io0000qcnc61txcmxy","tag_id":"ck8nz89j40002qcnc2a22ahxc","_id":"ck8nz89kg000bqcnc99ch6yrw"},{"post_id":"ck8nz89io0000qcnc61txcmxy","tag_id":"ck8nz89je0007qcncg3o1ghj0","_id":"ck8nz89kh000eqcnchyhv0fzo"},{"post_id":"ck8nz89j70003qcnc1kkr950o","tag_id":"ck8nz89kf000aqcnceqot7832","_id":"ck8nz89kw000jqcncdpn33tc3"},{"post_id":"ck8nz89j70003qcnc1kkr950o","tag_id":"ck8nz89ki000fqcncazvy1u2y","_id":"ck8nz89kx000lqcnc7dmaauol"},{"post_id":"ck8nz89j90004qcnc9rzbcpk3","tag_id":"ck8nz89kl000iqcnc247f8wsz","_id":"ck8nz89ky000nqcncaak17o15"},{"post_id":"ck8nz89jd0006qcnc7a35at4r","tag_id":"ck8nz89kx000mqcnce2q5bfei","_id":"ck8nz89l3000qqcnc91zsf31y"},{"post_id":"ck8nz89jd0006qcnc7a35at4r","tag_id":"ck8nz89kz000oqcnc046bdx0j","_id":"ck8nz89lh000rqcnc53g5ej52"},{"post_id":"ck8nz89ka0008qcnc0dymdmka","tag_id":"ck8nz89l2000pqcnccz1b357m","_id":"ck8nz89lx000tqcncgpylfwj6"},{"post_id":"ck8nz89ka0008qcnc0dymdmka","tag_id":"ck8nz89li000sqcnc65211c01","_id":"ck8nz89ly000uqcncallj16bb"},{"post_id":"ck8nz89sa000xqcnc0u8d1end","tag_id":"ck8nz89sb000yqcncf4cv3n9h","_id":"ck8nz89sd0011qcnc4ajeh2b2"},{"post_id":"ck8nz89sa000xqcnc0u8d1end","tag_id":"ck8nz89sc0010qcnc21kw5rx9","_id":"ck8nz89sd0012qcnc57xe68ec"},{"post_id":"ck8pgqix50000scnc3x3k65ib","tag_id":"ck8pgqixq0001scnc5vdy78fc","_id":"ck8pgqixu0004scnc79k72uuw"},{"post_id":"ck8pgqix50000scnc3x3k65ib","tag_id":"ck8pgqixt0002scnchh5taj56","_id":"ck8pgqixu0005scnc5qadaind"},{"post_id":"ck8pgqix50000scnc3x3k65ib","tag_id":"ck8pgqixt0003scnccucdcnsb","_id":"ck8pgqixu0006scncgrtk0fbq"},{"post_id":"ck8nz89p3000wqcnc40bid3ye","tag_id":"ck8q2r48q00002fn75hob5j2z","_id":"ck8q2r48v00032fn74jhuexba"},{"post_id":"ck8nz89p3000wqcnc40bid3ye","tag_id":"ck8q2r48u00022fn77n8dbfby","_id":"ck8q2r48v00042fn7dislawao"}],"Tag":[{"name":"HTTP/3","_id":"ck8nz89j40002qcnc2a22ahxc"},{"name":"HTTP","_id":"ck8nz89je0007qcncg3o1ghj0"},{"name":"NPM","_id":"ck8nz89kf000aqcnceqot7832"},{"name":"menorepo","_id":"ck8nz89ki000fqcncazvy1u2y"},{"name":"PWA","_id":"ck8nz89kl000iqcnc247f8wsz"},{"name":"HTTP2","_id":"ck8nz89kx000mqcnce2q5bfei"},{"name":"WireShark","_id":"ck8nz89kz000oqcnc046bdx0j"},{"name":"user agent","_id":"ck8nz89l2000pqcnccz1b357m"},{"name":"chrome","_id":"ck8nz89li000sqcnc65211c01"},{"name":"前端安全","_id":"ck8nz89sb000yqcncf4cv3n9h"},{"name":"CSRF","_id":"ck8nz89sc0010qcnc21kw5rx9"},{"name":"webapp","_id":"ck8pgqixq0001scnc5vdy78fc"},{"name":"ios8","_id":"ck8pgqixt0002scnchh5taj56"},{"name":"meta","_id":"ck8pgqixt0003scnccucdcnsb"},{"name":"verdaccio","_id":"ck8q2r48q00002fn75hob5j2z"},{"name":"npm","_id":"ck8q2r48u00022fn77n8dbfby"}]}}